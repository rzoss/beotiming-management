<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>BEO-Timing: RFID_Reader/rfidinputdialog.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<h1>RFID_Reader/rfidinputdialog.cpp</h1><a href="rfidinputdialog_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00032"></a>00032 <span class="preprocessor">#include "<a class="code" href="rfidinputdialog_8h.html" title="Stellt die Eingabemaske, sowie die benötigten Funktionen zum auswerten von RFID-Tags...">rfidinputdialog.h</a>"</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include "<a class="code" href="_r_f_i_d___c_r500_8h.html" title="Enthält alle Eigenschaften des RFID-Lesers CR500-USB.">RFID_Reader/RFID_CR500.h</a>"</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;QtSql&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;QtGui&gt;</span>
<a name="l00041"></a><a class="code" href="class_r_f_i_d_input_dialog.html#cf018ae029903a460da1d2e8a6b4ab01">00041</a> <a class="code" href="class_r_f_i_d_input_dialog.html#cf018ae029903a460da1d2e8a6b4ab01" title="Konstruktor.">RFIDInputDialog::RFIDInputDialog</a>(<a class="code" href="class_r_f_i_d___c_r500.html" title="Enthält alle Eigenschaften des RFID-Lesers CR500-USB.">RFID_CR500</a>* <a class="code" href="class_r_f_i_d_input_dialog.html#2fffb8807b878f9debba8d9b13046854">pRfid</a>, QWidget *parent)
<a name="l00042"></a>00042     : QDialog(parent)
<a name="l00043"></a>00043 {
<a name="l00044"></a>00044         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#7b24e54527465a18688667456e5d3b6b">setupUi</a>(<span class="keyword">this</span>);
<a name="l00045"></a>00045         this-&gt;pRfid=pRfid;
<a name="l00046"></a>00046         <span class="comment">// ComboBox für Nationaliten aus der Datenbank heraus erstellen</span>
<a name="l00047"></a>00047         QStringList list;
<a name="l00048"></a>00048         QSqlQuery query(<span class="stringliteral">"SELECT name FROM nationalitaeten ORDER BY name ASC"</span>);
<a name="l00049"></a>00049         query.exec();
<a name="l00050"></a>00050         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;query.numRowsAffected();++i){
<a name="l00051"></a>00051                 query.next();
<a name="l00052"></a>00052                 list.append(query.value(0).toString());
<a name="l00053"></a>00053         }
<a name="l00054"></a>00054         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#178fa80ddddaf49ec9096cb08cc76494">nationalitaetComboBox</a>-&gt;addItems(list);
<a name="l00055"></a>00055         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#178fa80ddddaf49ec9096cb08cc76494">nationalitaetComboBox</a>-&gt;setCurrentIndex(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#178fa80ddddaf49ec9096cb08cc76494">nationalitaetComboBox</a>-&gt;findText(<span class="stringliteral">"Schweiz"</span>));
<a name="l00056"></a>00056         list.clear();
<a name="l00057"></a>00057         query.clear();
<a name="l00058"></a>00058         <span class="comment">// ComboBox mit den Kategorien aus der Datenbank auffüllen</span>
<a name="l00059"></a>00059         query.exec(<span class="stringliteral">"SELECT name FROM kategorien"</span>); 
<a name="l00060"></a>00060         qDebug() &lt;&lt; query.lastError();
<a name="l00061"></a>00061         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;query.numRowsAffected();++i){
<a name="l00062"></a>00062                 query.next();
<a name="l00063"></a>00063                 list.append(query.value(0).toString());
<a name="l00064"></a>00064         }
<a name="l00065"></a>00065         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#5e8b3cf5f29c85c7592ca34fd56ec686">KategoriecomboBox</a>-&gt;addItems(list);
<a name="l00066"></a>00066         <span class="comment">// Verschiedene Labels mit den Informationen versorgen</span>
<a name="l00067"></a>00067         <span class="comment">// Die Informationen der RFID-Karte stehen nach dem Lesen </span>
<a name="l00068"></a>00068         <span class="comment">// in verschiedenen Attributen der Klasse des Lesers zur Verfügung.</span>
<a name="l00069"></a>00069         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#fa81bfd32f474497e50bdc9a49603f94">StarttimeLabel</a>-&gt;setText(<a class="code" href="class_r_f_i_d_input_dialog.html#f4cc582a23571818a7fa8c796806107f" title="Zeiten aus der Struktur zur anzeige vorbereiten.">toDateString</a>(&amp;pRfid-&gt;startdate));
<a name="l00070"></a>00070         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#b8984751b020e9fa366f81334a159e9e">EndtimeLabel</a>-&gt;setText(<a class="code" href="class_r_f_i_d_input_dialog.html#f4cc582a23571818a7fa8c796806107f" title="Zeiten aus der Struktur zur anzeige vorbereiten.">toDateString</a>(&amp;pRfid-&gt;<a class="code" href="class_r_f_i_d___c_r500.html#a833f1ef40098bd9f9d07787bfe45271">enddate</a>));
<a name="l00071"></a>00071         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#0157542b72688ffeda45eb05d43e6e76">FahrzeitLabel</a>-&gt;setText(<a class="code" href="class_r_f_i_d_input_dialog.html#f4cc582a23571818a7fa8c796806107f" title="Zeiten aus der Struktur zur anzeige vorbereiten.">toDateString</a>(&amp;pRfid-&gt;<a class="code" href="class_r_f_i_d___c_r500.html#1790d6c17d8367723c96ad74515bd709">racetime</a>));
<a name="l00072"></a>00072         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#e1cf828e7765fc2de4958f12a5f20457">rfidsnrLabel</a>-&gt;setText(pRfid-&gt;<a class="code" href="class_r_f_i_d___c_r500.html#80434957a623b58350ddd0b0eea45133">serial</a>);
<a name="l00073"></a>00073         <span class="comment">// Informationen zur Strecke aus der Datenbank abrufen </span>
<a name="l00074"></a>00074         QStringList temp = <a class="code" href="class_r_f_i_d_input_dialog.html#a39510d98f5b5fb27dedf20efb7cf415" title="Informationen zum Streckentyp aus der Datenbank abrufen.">getStreckenNameTyp</a>(pRfid-&gt;<a class="code" href="class_r_f_i_d___c_r500.html#2fa7bc6f3433a1acf060356166d591a6">strecke</a>);
<a name="l00075"></a>00075         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#7b713247b88918a9e24f92b810e1c9d2">StreckennameLabel</a>-&gt;setText(temp.at(0));
<a name="l00076"></a>00076         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#1272a976363682dd34399d74b1fbd968">StreckenTypLabel</a>-&gt;setText(temp.at(1));
<a name="l00077"></a>00077         connect(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#522ea6b44f4494a26cfd4920252ff99f">maenlichRadioButton</a>,SIGNAL(pressed()),<span class="keyword">this</span>,SLOT(<a class="code" href="class_r_f_i_d_input_dialog.html#02ecbebd64e8e4d176f9da497366dede" title="überprüfen, ob der bisherige Eintrag einzigartig ist.">checkSingularity</a>()));
<a name="l00078"></a>00078         connect(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#5e6931622decd2011e21bb494a941dba">weiblichRadioButton</a>,SIGNAL(pressed()),<span class="keyword">this</span>,SLOT(<a class="code" href="class_r_f_i_d_input_dialog.html#02ecbebd64e8e4d176f9da497366dede" title="überprüfen, ob der bisherige Eintrag einzigartig ist.">checkSingularity</a>()));
<a name="l00079"></a>00079         
<a name="l00080"></a>00080         <span class="comment">// Validators</span>
<a name="l00081"></a>00081         <span class="comment">// Nur Buchstaben und Leerschläge</span>
<a name="l00082"></a>00082         QRegExp charExp (<span class="stringliteral">"[\\-\\w\\s]+"</span>);
<a name="l00083"></a>00083         <span class="comment">// Nur Zahlen</span>
<a name="l00084"></a>00084         QRegExp numbExp (<span class="stringliteral">"[\\d]+"</span>);
<a name="l00085"></a>00085         <span class="comment">// Nur Zahlen</span>
<a name="l00086"></a>00086         QRegExp telExp (<span class="stringliteral">"\\+[\\d]+"</span>);
<a name="l00087"></a>00087         <span class="comment">// Nur Buchstaben, Zahlen und Leerschläge</span>
<a name="l00088"></a>00088         QRegExp bothExp (<span class="stringliteral">"[\\w\\s]+"</span>);
<a name="l00089"></a>00089         <span class="comment">// E-mail address is validated according to RFC2821, RFC2822,</span>
<a name="l00090"></a>00090         <span class="comment">// see http://en.wikipedia.org/wiki/E-mail_address.</span>
<a name="l00091"></a>00091         <span class="comment">// http://www.virtualbox.org/changeset/7487?format=diff&amp;new=7487</span>
<a name="l00092"></a>00092         QRegExp emailExp (<span class="stringliteral">"(([a-zA-Z0-9_\\-\\.!#$%\\*/?|^{}`~&amp;'\\+=]*"</span>
<a name="l00093"></a>00093                                     <span class="stringliteral">"[a-zA-Z0-9_\\-!#$%\\*/?|^{}`~&amp;'\\+=])|"</span>
<a name="l00094"></a>00094                                   <span class="stringliteral">"(\"([\\x0001-\\x0008,\\x000B,\\x000C,\\x000E-\\x0019,\\x007F,"</span>
<a name="l00095"></a>00095                                        <span class="stringliteral">"\\x0021,\\x0023-\\x005B,\\x005D-\\x007E,"</span>
<a name="l00096"></a>00096                                        <span class="stringliteral">"\\x0009,\\x0020]|"</span>
<a name="l00097"></a>00097                                      <span class="stringliteral">"(\\\\[\\x0001-\\x0009,\\x000B,\\x000C,"</span>
<a name="l00098"></a>00098                                             <span class="stringliteral">"\\x000E-\\x007F]))*\"))"</span>
<a name="l00099"></a>00099                                     <span class="stringliteral">"@"</span>
<a name="l00100"></a>00100                                     <span class="stringliteral">"[a-zA-Z0-9\\-]+(\\.[a-zA-Z0-9\\-]+)*"</span>);
<a name="l00101"></a>00101                 
<a name="l00102"></a>00102         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#168853345738013708c4d46f3f3f84c0">nameLineEdit</a>-&gt;setValidator (<span class="keyword">new</span> QRegExpValidator (charExp, <span class="keyword">this</span>));
<a name="l00103"></a>00103         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#168853345738013708c4d46f3f3f84c0">nameLineEdit</a>-&gt;setMaxLength (50);
<a name="l00104"></a>00104         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#ff3670254a5ae940c6045463bae158ab">vornameLineEdit</a>-&gt;setValidator (<span class="keyword">new</span> QRegExpValidator (charExp, <span class="keyword">this</span>));
<a name="l00105"></a>00105         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#ff3670254a5ae940c6045463bae158ab">vornameLineEdit</a>-&gt;setMaxLength (50);
<a name="l00106"></a>00106         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#fcbdd99c7ed313b95eb96f49256ae8fd">adresseLineEdit</a>-&gt;setValidator (<span class="keyword">new</span> QRegExpValidator (bothExp, <span class="keyword">this</span>));
<a name="l00107"></a>00107         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#fcbdd99c7ed313b95eb96f49256ae8fd">adresseLineEdit</a>-&gt;setMaxLength (50);
<a name="l00108"></a>00108         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#20e8b6974519d4510cf733992d8c2027">plzLineEdit</a>-&gt;setValidator (<span class="keyword">new</span> QRegExpValidator (numbExp, <span class="keyword">this</span>));
<a name="l00109"></a>00109         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#20e8b6974519d4510cf733992d8c2027">plzLineEdit</a>-&gt;setMaxLength (4);
<a name="l00110"></a>00110         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#8524d17700c18aadaf06c968611bb835">ortLineEdit</a>-&gt;setValidator (<span class="keyword">new</span> QRegExpValidator (charExp, <span class="keyword">this</span>));
<a name="l00111"></a>00111         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#8524d17700c18aadaf06c968611bb835">ortLineEdit</a>-&gt;setMaxLength (50);
<a name="l00112"></a>00112         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#ab05223309a28747a07d0ed753b2a462">clubLineEdit</a>-&gt;setValidator (<span class="keyword">new</span> QRegExpValidator (bothExp, <span class="keyword">this</span>));
<a name="l00113"></a>00113         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#ab05223309a28747a07d0ed753b2a462">clubLineEdit</a>-&gt;setMaxLength (50);     
<a name="l00114"></a>00114         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#729f97e2df77d68801004df385955298">emailLineEdit</a>-&gt;setValidator (<span class="keyword">new</span> QRegExpValidator (emailExp, <span class="keyword">this</span>));
<a name="l00115"></a>00115         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#729f97e2df77d68801004df385955298">emailLineEdit</a>-&gt;setMaxLength (50);
<a name="l00116"></a>00116         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#db31c8901b94fac9a408a313e419c47e">telephonLineEdit</a>-&gt;setValidator (<span class="keyword">new</span> QRegExpValidator (telExp, <span class="keyword">this</span>));
<a name="l00117"></a>00117         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#db31c8901b94fac9a408a313e419c47e">telephonLineEdit</a>-&gt;setMaxLength (12); 
<a name="l00118"></a>00118         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#84a036036ae9f5a4c1814515bfdc1df8">mobileLineEdit</a>-&gt;setValidator (<span class="keyword">new</span> QRegExpValidator (telExp, <span class="keyword">this</span>));
<a name="l00119"></a>00119         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#84a036036ae9f5a4c1814515bfdc1df8">mobileLineEdit</a>-&gt;setMaxLength (12);   
<a name="l00120"></a>00120         <span class="comment">// Anpassen der Kategorie an den Default-Jahrgang</span>
<a name="l00121"></a>00121         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#5e8b3cf5f29c85c7592ca34fd56ec686">KategoriecomboBox</a>-&gt;setCurrentIndex(
<a name="l00122"></a>00122                         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#5e8b3cf5f29c85c7592ca34fd56ec686">KategoriecomboBox</a>-&gt;findText(
<a name="l00123"></a>00123                                         <a class="code" href="class_r_f_i_d_input_dialog.html#d034adfda34da3b178582a7aa17ae059" title="Berechne die Kategorie aufgrund der Altersbereiche in der Datenbank.">calculateKategorie</a>(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#049ac450ed517de9f065df16c1ab6dd6">jahrgangSpinBox</a>-&gt;value())
<a name="l00124"></a>00124                         )
<a name="l00125"></a>00125         ); 
<a name="l00126"></a>00126         <span class="comment">// automatisches Vervollständigen einschalten</span>
<a name="l00127"></a>00127         <a class="code" href="class_r_f_i_d_input_dialog.html#2c4dff3a7602a6bca4d967b5a561942d">autoInsert</a> = <span class="keyword">true</span>;
<a name="l00128"></a>00128         <a class="code" href="class_r_f_i_d_input_dialog.html#557be7292bf8509e793dc17e79d18e75">TeilnehmerKeyInt</a>=0;
<a name="l00129"></a>00129 }
<a name="l00133"></a><a class="code" href="class_r_f_i_d_input_dialog.html#59bcd5df12daee4281cdfbe451e11853">00133</a> <a class="code" href="class_r_f_i_d_input_dialog.html#59bcd5df12daee4281cdfbe451e11853" title="Destruktor.">RFIDInputDialog::~RFIDInputDialog</a>()
<a name="l00134"></a>00134 {
<a name="l00135"></a>00135         
<a name="l00136"></a>00136 }
<a name="l00140"></a><a class="code" href="class_r_f_i_d_input_dialog.html#f4cc582a23571818a7fa8c796806107f">00140</a> QString <a class="code" href="class_r_f_i_d_input_dialog.html#f4cc582a23571818a7fa8c796806107f" title="Zeiten aus der Struktur zur anzeige vorbereiten.">RFIDInputDialog::toDateString</a>(<span class="keyword">struct</span> <a class="code" href="struct_m_y_t_i_m_e.html" title="Struktur fuer die Fahrzeit (Groesse 4 Byte).">MYTIME</a>* time, QString format){
<a name="l00141"></a>00141         QTime* temp = <span class="keyword">new</span> QTime();
<a name="l00142"></a>00142         temp-&gt;setHMS(time-&gt;<a class="code" href="struct_m_y_t_i_m_e.html#bff85b8be85da96ffdb6b3b2a21088aa">hour</a>,time-&gt;<a class="code" href="struct_m_y_t_i_m_e.html#8033dc39f4e81961d8b11ce373dbbd56">minute</a>,time-&gt;<a class="code" href="struct_m_y_t_i_m_e.html#41ed7eedee0633eb8cd09672665c9c0c">second</a>,0);
<a name="l00143"></a>00143         
<a name="l00144"></a>00144         qDebug() &lt;&lt; temp-&gt;toString(format);
<a name="l00145"></a>00145         <span class="keywordflow">return</span> temp-&gt;toString(format);
<a name="l00146"></a>00146 }
<a name="l00150"></a><a class="code" href="class_r_f_i_d_input_dialog.html#20e43f0e0b5830c72b04031d80ed4f08">00150</a> QString <a class="code" href="class_r_f_i_d_input_dialog.html#f4cc582a23571818a7fa8c796806107f" title="Zeiten aus der Struktur zur anzeige vorbereiten.">RFIDInputDialog::toDateString</a>(<span class="keyword">struct</span> <a class="code" href="struct_m_y_d_a_t_e.html" title="Struktur fuer die Start- und Endzeit (Groesse 7 Byte).">MYDATE</a> *date, QString format){
<a name="l00151"></a>00151         QTime* time = <span class="keyword">new</span> QTime();
<a name="l00152"></a>00152         time-&gt;setHMS(date-&gt;<a class="code" href="struct_m_y_d_a_t_e.html#426549a0228935f65a4bcbc918e69031">hour</a>,date-&gt;<a class="code" href="struct_m_y_d_a_t_e.html#8224e4f5dd777baae8acf02944365d54">minute</a>,date-&gt;<a class="code" href="struct_m_y_d_a_t_e.html#063cbf62fc1c131f82e7b5ff7a3ec85f">second</a>,0);
<a name="l00153"></a>00153         QDate* tempdate = <span class="keyword">new</span> QDate();
<a name="l00154"></a>00154         tempdate-&gt;setDate(date-&gt;<a class="code" href="struct_m_y_d_a_t_e.html#7b77b272c8bcf373308e6903dcd440ae">year</a>,date-&gt;<a class="code" href="struct_m_y_d_a_t_e.html#406d9a0047246b45782cb239747cf769">month</a>,date-&gt;<a class="code" href="struct_m_y_d_a_t_e.html#91fee9ad577107c8efba01c1322b2b54">day</a>);
<a name="l00155"></a>00155         QDateTime* temp = <span class="keyword">new</span> QDateTime();
<a name="l00156"></a>00156         temp-&gt;setDate(*tempdate);
<a name="l00157"></a>00157         temp-&gt;setTime(*time);
<a name="l00158"></a>00158         <span class="keywordflow">return</span> temp-&gt;toString(format);
<a name="l00159"></a>00159 }
<a name="l00165"></a><a class="code" href="class_r_f_i_d_input_dialog.html#a39510d98f5b5fb27dedf20efb7cf415">00165</a> QStringList <a class="code" href="class_r_f_i_d_input_dialog.html#a39510d98f5b5fb27dedf20efb7cf415" title="Informationen zum Streckentyp aus der Datenbank abrufen.">RFIDInputDialog::getStreckenNameTyp</a>(<span class="keywordtype">int</span> <a class="code" href="class_r_f_i_d_input_dialog.html#711253f6ca49fde7b5e812a485d27a6c030de95b670036f36a9b0ee9913dc5bf">StreckenKey</a>){
<a name="l00166"></a>00166         QStringList temp;
<a name="l00167"></a>00167         
<a name="l00168"></a>00168         QSqlTableModel * strecke = <span class="keyword">new</span> QSqlTableModel();
<a name="l00169"></a>00169         strecke-&gt;setTable(<span class="stringliteral">"strecken"</span>);
<a name="l00170"></a>00170         strecke-&gt;setFilter(<span class="stringliteral">"StreckenKey="</span> + QString::number(StreckenKey));
<a name="l00171"></a>00171         strecke-&gt;select();
<a name="l00172"></a>00172         QString StreckentypenKeyString = strecke-&gt;data(strecke-&gt;index(0,<a class="code" href="class_r_f_i_d_input_dialog.html#711253f6ca49fde7b5e812a485d27a6cad8e5268e7b955194cc3c0eeb61f6400">StreckentypKey</a>)).toString();
<a name="l00173"></a>00173         temp.append(strecke-&gt;data(strecke-&gt;index(0,<a class="code" href="class_r_f_i_d_input_dialog.html#711253f6ca49fde7b5e812a485d27a6c2981910722bf19eb35d5917d5345770e">Streckenname</a>)).toString());
<a name="l00174"></a>00174         
<a name="l00175"></a>00175         QSqlTableModel * typ = <span class="keyword">new</span> QSqlTableModel();
<a name="l00176"></a>00176         typ-&gt;setTable(<span class="stringliteral">"streckentyp"</span>);
<a name="l00177"></a>00177         typ-&gt;setFilter(<span class="stringliteral">"StreckentypKey="</span> + StreckentypenKeyString);
<a name="l00178"></a>00178         typ-&gt;select();
<a name="l00179"></a>00179         temp.append(typ-&gt;data(typ-&gt;index(0,1)).toString());
<a name="l00180"></a>00180         qDebug() &lt;&lt; temp;
<a name="l00181"></a>00181         <span class="keywordflow">return</span> temp;
<a name="l00182"></a>00182 }
<a name="l00186"></a><a class="code" href="class_r_f_i_d_input_dialog.html#02ecbebd64e8e4d176f9da497366dede">00186</a> <span class="keywordtype">void</span> <a class="code" href="class_r_f_i_d_input_dialog.html#02ecbebd64e8e4d176f9da497366dede" title="überprüfen, ob der bisherige Eintrag einzigartig ist.">RFIDInputDialog::checkSingularity</a>(){
<a name="l00187"></a>00187         <span class="keywordflow">if</span>(!<a class="code" href="class_r_f_i_d_input_dialog.html#2c4dff3a7602a6bca4d967b5a561942d">autoInsert</a>) <span class="comment">// Verlassen, wenn das automatische Vervollständigen ausgeschaltet ist</span>
<a name="l00188"></a>00188                 <span class="keywordflow">return</span>;
<a name="l00189"></a>00189         <span class="keywordtype">int</span> count=0;
<a name="l00190"></a>00190         <span class="keywordtype">bool</span> first=<span class="keyword">true</span>;
<a name="l00191"></a>00191         QString sql = <span class="stringliteral">"SELECT count(name) FROM teilnehmer WHERE "</span>;
<a name="l00192"></a>00192         <span class="keywordflow">if</span>(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#168853345738013708c4d46f3f3f84c0">nameLineEdit</a>-&gt;isModified()){
<a name="l00193"></a>00193                 sql += <span class="stringliteral">"name LIKE '"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#168853345738013708c4d46f3f3f84c0">nameLineEdit</a>-&gt;text() + <span class="stringliteral">"\%' "</span>;
<a name="l00194"></a>00194                 first=<span class="keyword">false</span>;
<a name="l00195"></a>00195         }
<a name="l00196"></a>00196         <span class="keywordflow">if</span>(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#ff3670254a5ae940c6045463bae158ab">vornameLineEdit</a>-&gt;isModified()){
<a name="l00197"></a>00197                 <span class="keywordflow">if</span>(!first)
<a name="l00198"></a>00198                         sql += <span class="stringliteral">"AND "</span>;
<a name="l00199"></a>00199                 sql += <span class="stringliteral">"vorname LIKE '"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#ff3670254a5ae940c6045463bae158ab">vornameLineEdit</a>-&gt;text() + <span class="stringliteral">"\%' "</span>;
<a name="l00200"></a>00200                 first=<span class="keyword">false</span>;
<a name="l00201"></a>00201         }
<a name="l00202"></a>00202         <span class="keywordflow">if</span>(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#fcbdd99c7ed313b95eb96f49256ae8fd">adresseLineEdit</a>-&gt;isModified()){
<a name="l00203"></a>00203                 <span class="keywordflow">if</span>(!first)
<a name="l00204"></a>00204                         sql += <span class="stringliteral">"AND "</span>;
<a name="l00205"></a>00205                 sql += <span class="stringliteral">"adresse LIKE '"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#fcbdd99c7ed313b95eb96f49256ae8fd">adresseLineEdit</a>-&gt;text() + <span class="stringliteral">"\%' "</span>;
<a name="l00206"></a>00206                 first=<span class="keyword">false</span>;
<a name="l00207"></a>00207         }
<a name="l00208"></a>00208         <span class="keywordflow">if</span>(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#20e8b6974519d4510cf733992d8c2027">plzLineEdit</a>-&gt;isModified()){
<a name="l00209"></a>00209                 <span class="keywordflow">if</span>(!first)
<a name="l00210"></a>00210                         sql += <span class="stringliteral">"AND "</span>;
<a name="l00211"></a>00211                 sql += <span class="stringliteral">"plz LIKE '"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#20e8b6974519d4510cf733992d8c2027">plzLineEdit</a>-&gt;text() + <span class="stringliteral">"\%' "</span>;
<a name="l00212"></a>00212                 first=<span class="keyword">false</span>;
<a name="l00213"></a>00213         }
<a name="l00214"></a>00214         <span class="keywordflow">if</span>(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#8524d17700c18aadaf06c968611bb835">ortLineEdit</a>-&gt;isModified()){
<a name="l00215"></a>00215                 <span class="keywordflow">if</span>(!first)
<a name="l00216"></a>00216                         sql += <span class="stringliteral">"AND "</span>;
<a name="l00217"></a>00217                 sql += <span class="stringliteral">"Ort LIKE '"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#8524d17700c18aadaf06c968611bb835">ortLineEdit</a>-&gt;text() + <span class="stringliteral">"\%' "</span>;
<a name="l00218"></a>00218                 first=<span class="keyword">false</span>;
<a name="l00219"></a>00219         }
<a name="l00220"></a>00220         <span class="keywordflow">if</span>(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#ab05223309a28747a07d0ed753b2a462">clubLineEdit</a>-&gt;isModified()){
<a name="l00221"></a>00221                 <span class="keywordflow">if</span>(!first)
<a name="l00222"></a>00222                         sql += <span class="stringliteral">"AND "</span>;
<a name="l00223"></a>00223                 sql += <span class="stringliteral">"Club LIKE '"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#ab05223309a28747a07d0ed753b2a462">clubLineEdit</a>-&gt;text() + <span class="stringliteral">"\%' "</span>;
<a name="l00224"></a>00224                 first=<span class="keyword">false</span>;
<a name="l00225"></a>00225         }
<a name="l00226"></a>00226         <span class="keywordflow">if</span>(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#729f97e2df77d68801004df385955298">emailLineEdit</a>-&gt;isModified()){
<a name="l00227"></a>00227                 <span class="keywordflow">if</span>(!first)
<a name="l00228"></a>00228                         sql += <span class="stringliteral">"AND "</span>;
<a name="l00229"></a>00229                 sql += <span class="stringliteral">"EMail LIKE '"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#729f97e2df77d68801004df385955298">emailLineEdit</a>-&gt;text() + <span class="stringliteral">"\%' "</span>;
<a name="l00230"></a>00230                 first=<span class="keyword">false</span>;
<a name="l00231"></a>00231         }
<a name="l00232"></a>00232         <span class="keywordflow">if</span>(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#db31c8901b94fac9a408a313e419c47e">telephonLineEdit</a>-&gt;isModified()){
<a name="l00233"></a>00233                 <span class="keywordflow">if</span>(!first)
<a name="l00234"></a>00234                         sql += <span class="stringliteral">"AND "</span>;
<a name="l00235"></a>00235                 sql += <span class="stringliteral">"Telefon LIKE '"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#db31c8901b94fac9a408a313e419c47e">telephonLineEdit</a>-&gt;text() + <span class="stringliteral">"\%' "</span>;
<a name="l00236"></a>00236                 first=<span class="keyword">false</span>;
<a name="l00237"></a>00237         }
<a name="l00238"></a>00238         <span class="keywordflow">if</span>(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#84a036036ae9f5a4c1814515bfdc1df8">mobileLineEdit</a>-&gt;isModified()){
<a name="l00239"></a>00239                 <span class="keywordflow">if</span>(!first)
<a name="l00240"></a>00240                         sql += <span class="stringliteral">"AND "</span>;
<a name="l00241"></a>00241                 sql += <span class="stringliteral">"Mobile LIKE '"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#84a036036ae9f5a4c1814515bfdc1df8">mobileLineEdit</a>-&gt;text() + <span class="stringliteral">"\%' "</span>;
<a name="l00242"></a>00242                 first=<span class="keyword">false</span>;
<a name="l00243"></a>00243         }
<a name="l00244"></a>00244         
<a name="l00245"></a>00245         qDebug() &lt;&lt; sql;
<a name="l00246"></a>00246         QSqlQuery query(sql);
<a name="l00247"></a>00247         query.exec();
<a name="l00248"></a>00248         query.next();
<a name="l00249"></a>00249         count=query.value(0).toInt();
<a name="l00250"></a>00250         
<a name="l00251"></a>00251         <span class="keywordflow">if</span>(count==1){ <span class="comment">// Eintrag ist Einzigartig</span>
<a name="l00252"></a>00252                 qDebug() &lt;&lt; <span class="stringliteral">"Eintrag ist einzigartig"</span>;
<a name="l00253"></a>00253                 sql.replace(<span class="stringliteral">"count(name)"</span>,<span class="stringliteral">"TeilnehmerKey, Name, Vorname, Adresse, PLZ, Ort, Jahrgang, Geschlecht, Nationalitaet, Club, EMail, Telefon, Mobile, SNR_RFID"</span>);
<a name="l00254"></a>00254                 qDebug() &lt;&lt; sql;
<a name="l00255"></a>00255                 query.exec(sql);
<a name="l00256"></a>00256                 query.next();
<a name="l00257"></a>00257                 QMessageBox msgBox;
<a name="l00258"></a>00258                 QPushButton *eintragenButton = msgBox.addButton(QObject::tr(<span class="stringliteral">"Teilnehmer übernehmen und eintragen"</span>), QMessageBox::ActionRole);
<a name="l00259"></a>00259                 QPushButton *uebernehmenButton = msgBox.addButton(QObject::tr(<span class="stringliteral">"Teilnehmer übernehmen und verändern"</span>), QMessageBox::ActionRole);
<a name="l00260"></a>00260                 QPushButton *vorschlagButton = msgBox.addButton(QObject::tr(<span class="stringliteral">"Vorschlag als Vorlage für neunen Teilnehmer benutzen"</span>), QMessageBox::ActionRole);
<a name="l00261"></a>00261                 QPushButton *abbrechenButton = msgBox.addButton(QObject::tr(<span class="stringliteral">"Vorschlag verwerfen"</span>), QMessageBox::ActionRole);
<a name="l00262"></a>00262                 msgBox.setDefaultButton(uebernehmenButton);
<a name="l00263"></a>00263                 msgBox.setEscapeButton(abbrechenButton);
<a name="l00264"></a>00264 
<a name="l00265"></a>00265                 msgBox.setText(<span class="stringliteral">"In der Datenbank befindet sich nur ein Benutzer der mit der bisherigen Eingabe übereinstimmt:\n"</span>
<a name="l00266"></a>00266                                 <span class="stringliteral">"\nName: "</span> + query.value(<a class="code" href="class_r_f_i_d_input_dialog.html#3f9e936d6e5691d8ab946beebddc946c5b7740d0d9a7e0775d8caf2f249de06c">Name</a>).toString() + <span class="stringliteral">"\nVorname: "</span> + query.value(<a class="code" href="class_r_f_i_d_input_dialog.html#3f9e936d6e5691d8ab946beebddc946c02a6306c324a449f8af8af056bb0648a">Vorname</a>).toString() + 
<a name="l00267"></a>00267                                 <span class="stringliteral">"\nAdresse: "</span> + query.value(<a class="code" href="class_r_f_i_d_input_dialog.html#3f9e936d6e5691d8ab946beebddc946c9ea466e2f9aa34e7bb77a110e63d81d6">Adresse</a>).toString() + <span class="stringliteral">"\nPLZ: "</span> + query.value(<a class="code" href="class_r_f_i_d_input_dialog.html#3f9e936d6e5691d8ab946beebddc946cf957fc05e2d57e4842319e4343902047">PLZ</a>).toString() + 
<a name="l00268"></a>00268                                 <span class="stringliteral">"\nWohnort: "</span> + query.value(<a class="code" href="class_r_f_i_d_input_dialog.html#3f9e936d6e5691d8ab946beebddc946c560b673e73be5ac12263638979c6d0f5">Ort</a>).toString() + <span class="stringliteral">"\nNationalität: "</span> + query.value(<a class="code" href="class_r_f_i_d_input_dialog.html#3f9e936d6e5691d8ab946beebddc946cbf81876361ac3a49db8331ae278c7782">Nationalitaet</a>).toString() +
<a name="l00269"></a>00269                                 <span class="stringliteral">"\nJahrgang: "</span> + query.value(<a class="code" href="class_r_f_i_d_input_dialog.html#3f9e936d6e5691d8ab946beebddc946c78a38fa4ba1ef16bede3f6049b713347">Jahrgang</a>).toString() + <span class="stringliteral">"\nGeschlecht: "</span> + query.value(<a class="code" href="class_r_f_i_d_input_dialog.html#3f9e936d6e5691d8ab946beebddc946c8929715c51e09dbcb1a194a6fe1537f1">Geschlecht</a>).toString() + 
<a name="l00270"></a>00270                                 <span class="stringliteral">"\nTeam / Club: "</span> + query.value(<a class="code" href="class_r_f_i_d_input_dialog.html#3f9e936d6e5691d8ab946beebddc946cec585219326830d06a20a4be740c4877">Team_Club</a>).toString() + <span class="stringliteral">"\nEMail: "</span> + query.value(<a class="code" href="class_r_f_i_d_input_dialog.html#3f9e936d6e5691d8ab946beebddc946cf4333f273355e25c371716c814066ba6">Email</a>).toString() + 
<a name="l00271"></a>00271                                 <span class="stringliteral">"\nTelefon: "</span> + query.value(<a class="code" href="class_r_f_i_d_input_dialog.html#3f9e936d6e5691d8ab946beebddc946c5d1284d8792796682e668e50df23450b">Telefon</a>).toString() + <span class="stringliteral">"\nMobile: "</span> + query.value(<a class="code" href="class_r_f_i_d_input_dialog.html#3f9e936d6e5691d8ab946beebddc946c29e9f511ddc4f107c171b3dd4c5facdc">Mobile</a>).toString()
<a name="l00272"></a>00272                                 );
<a name="l00273"></a>00273                 
<a name="l00274"></a>00274                 msgBox.setWindowTitle(QObject::tr(<span class="stringliteral">"Einmaliger Eintrag in der Datenbank"</span>));
<a name="l00275"></a>00275                 msgBox.setIcon(QMessageBox::Question);
<a name="l00276"></a>00276                 msgBox.exec();
<a name="l00277"></a>00277                 <span class="keywordflow">if</span>(msgBox.clickedButton() == eintragenButton) {
<a name="l00278"></a>00278                         <span class="comment">// Kategorie berechnen</span>
<a name="l00279"></a>00279                         <a class="code" href="class_r_f_i_d_input_dialog.html#557be7292bf8509e793dc17e79d18e75">TeilnehmerKeyInt</a> = query.value(<a class="code" href="class_r_f_i_d_input_dialog.html#3f9e936d6e5691d8ab946beebddc946cd61473368c59e70a4a582e1fa4d85560">TeilnehmerKey</a>).toInt();
<a name="l00280"></a>00280                         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#5e8b3cf5f29c85c7592ca34fd56ec686">KategoriecomboBox</a>-&gt;setCurrentIndex(
<a name="l00281"></a>00281                                         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#5e8b3cf5f29c85c7592ca34fd56ec686">KategoriecomboBox</a>-&gt;findText(
<a name="l00282"></a>00282                                                         <a class="code" href="class_r_f_i_d_input_dialog.html#d034adfda34da3b178582a7aa17ae059" title="Berechne die Kategorie aufgrund der Altersbereiche in der Datenbank.">calculateKategorie</a>(query.value(<a class="code" href="class_r_f_i_d_input_dialog.html#3f9e936d6e5691d8ab946beebddc946c78a38fa4ba1ef16bede3f6049b713347">Jahrgang</a>).toInt())
<a name="l00283"></a>00283                                         )
<a name="l00284"></a>00284                         ); 
<a name="l00285"></a>00285                         <span class="keywordflow">if</span>(!<a class="code" href="class_r_f_i_d_input_dialog.html#a466a7c7bb57d2c3163ce2d400b9f6af" title="Löschen der Statusbits der Karte nach dem Auswerten.">clearValidFlag</a>()) <span class="comment">// Funktion beenden, falls nicht erfolgreich (Dialog bleibt)</span>
<a name="l00286"></a>00286                                 <span class="keywordflow">return</span>; 
<a name="l00287"></a>00287                         <span class="comment">// Zeit für erkannten Teilnehmer in die Datenbank einfügen</span>
<a name="l00288"></a>00288                         <a class="code" href="class_r_f_i_d_input_dialog.html#3f2a6693dd90d3a2308decf4dcd122dd" title="Einfügen der Fahrzeit in die Datenbank.">insertRacetime</a>(<a class="code" href="class_r_f_i_d_input_dialog.html#557be7292bf8509e793dc17e79d18e75">TeilnehmerKeyInt</a>);
<a name="l00289"></a>00289                         <span class="comment">// Dialog schliessen</span>
<a name="l00290"></a>00290                         this-&gt;close();
<a name="l00291"></a>00291                 }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(msgBox.clickedButton() == uebernehmenButton){
<a name="l00292"></a>00292                         <span class="comment">// Teilnehmer ID speichern</span>
<a name="l00293"></a>00293                         <a class="code" href="class_r_f_i_d_input_dialog.html#557be7292bf8509e793dc17e79d18e75">TeilnehmerKeyInt</a> = query.value(<a class="code" href="class_r_f_i_d_input_dialog.html#3f9e936d6e5691d8ab946beebddc946cd61473368c59e70a4a582e1fa4d85560">TeilnehmerKey</a>).toInt();
<a name="l00294"></a>00294                         <span class="comment">// Dialogfelder ausfüllen</span>
<a name="l00295"></a>00295                         <a class="code" href="class_r_f_i_d_input_dialog.html#7ed5355f398c29b79d81c4a4cd7b7c11" title="Ausfüllen des gewählten Vorschlags in die Textfelder.">fillForm</a>(&amp;query);
<a name="l00296"></a>00296                         <span class="comment">// AutoInsert ausschalten</span>
<a name="l00297"></a>00297                         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#454ba717043816e016529def2fb17ec2">autoCheckBox</a>-&gt;setChecked(<span class="keyword">false</span>);
<a name="l00298"></a>00298                         <a class="code" href="class_r_f_i_d_input_dialog.html#2c4dff3a7602a6bca4d967b5a561942d">autoInsert</a>=<span class="keyword">false</span>;
<a name="l00299"></a>00299                 }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(msgBox.clickedButton() == vorschlagButton){
<a name="l00300"></a>00300                         <span class="comment">// Teilnehmer ID !nicht! speichern  </span>
<a name="l00301"></a>00301                         <a class="code" href="class_r_f_i_d_input_dialog.html#557be7292bf8509e793dc17e79d18e75">TeilnehmerKeyInt</a> = 0;
<a name="l00302"></a>00302                         <span class="comment">// Dialogfelder ausfüllen</span>
<a name="l00303"></a>00303                         <a class="code" href="class_r_f_i_d_input_dialog.html#7ed5355f398c29b79d81c4a4cd7b7c11" title="Ausfüllen des gewählten Vorschlags in die Textfelder.">fillForm</a>(&amp;query);
<a name="l00304"></a>00304                         <span class="comment">// AutoInsert ausschalten</span>
<a name="l00305"></a>00305                         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#454ba717043816e016529def2fb17ec2">autoCheckBox</a>-&gt;setChecked(<span class="keyword">false</span>);
<a name="l00306"></a>00306                         <a class="code" href="class_r_f_i_d_input_dialog.html#2c4dff3a7602a6bca4d967b5a561942d">autoInsert</a>=<span class="keyword">false</span>;
<a name="l00307"></a>00307                 }<span class="keywordflow">else</span>{
<a name="l00308"></a>00308                         <span class="comment">// nichts tun</span>
<a name="l00309"></a>00309                         <span class="comment">// AutoInsert ausschalten</span>
<a name="l00310"></a>00310                         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#454ba717043816e016529def2fb17ec2">autoCheckBox</a>-&gt;setChecked(<span class="keyword">false</span>);
<a name="l00311"></a>00311                         <a class="code" href="class_r_f_i_d_input_dialog.html#2c4dff3a7602a6bca4d967b5a561942d">autoInsert</a>=<span class="keyword">false</span>;
<a name="l00312"></a>00312                 }
<a name="l00313"></a>00313         }
<a name="l00314"></a>00314         
<a name="l00315"></a>00315 }
<a name="l00319"></a><a class="code" href="class_r_f_i_d_input_dialog.html#7ed5355f398c29b79d81c4a4cd7b7c11">00319</a> <span class="keywordtype">void</span> <a class="code" href="class_r_f_i_d_input_dialog.html#7ed5355f398c29b79d81c4a4cd7b7c11" title="Ausfüllen des gewählten Vorschlags in die Textfelder.">RFIDInputDialog::fillForm</a>(QSqlQuery* query){
<a name="l00320"></a>00320         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#168853345738013708c4d46f3f3f84c0">nameLineEdit</a>-&gt;setText(query-&gt;value(<a class="code" href="class_r_f_i_d_input_dialog.html#3f9e936d6e5691d8ab946beebddc946c5b7740d0d9a7e0775d8caf2f249de06c">Name</a>).toString());
<a name="l00321"></a>00321         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#ff3670254a5ae940c6045463bae158ab">vornameLineEdit</a>-&gt;setText(query-&gt;value(<a class="code" href="class_r_f_i_d_input_dialog.html#3f9e936d6e5691d8ab946beebddc946c02a6306c324a449f8af8af056bb0648a">Vorname</a>).toString());
<a name="l00322"></a>00322         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#fcbdd99c7ed313b95eb96f49256ae8fd">adresseLineEdit</a>-&gt;setText(query-&gt;value(<a class="code" href="class_r_f_i_d_input_dialog.html#3f9e936d6e5691d8ab946beebddc946c9ea466e2f9aa34e7bb77a110e63d81d6">Adresse</a>).toString());
<a name="l00323"></a>00323         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#20e8b6974519d4510cf733992d8c2027">plzLineEdit</a>-&gt;setText(query-&gt;value(<a class="code" href="class_r_f_i_d_input_dialog.html#3f9e936d6e5691d8ab946beebddc946cf957fc05e2d57e4842319e4343902047">PLZ</a>).toString());
<a name="l00324"></a>00324         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#8524d17700c18aadaf06c968611bb835">ortLineEdit</a>-&gt;setText(query-&gt;value(<a class="code" href="class_r_f_i_d_input_dialog.html#3f9e936d6e5691d8ab946beebddc946c560b673e73be5ac12263638979c6d0f5">Ort</a>).toString());
<a name="l00325"></a>00325         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#db31c8901b94fac9a408a313e419c47e">telephonLineEdit</a>-&gt;setText(query-&gt;value(<a class="code" href="class_r_f_i_d_input_dialog.html#3f9e936d6e5691d8ab946beebddc946c5d1284d8792796682e668e50df23450b">Telefon</a>).toString());
<a name="l00326"></a>00326         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#84a036036ae9f5a4c1814515bfdc1df8">mobileLineEdit</a>-&gt;setText(query-&gt;value(<a class="code" href="class_r_f_i_d_input_dialog.html#3f9e936d6e5691d8ab946beebddc946c29e9f511ddc4f107c171b3dd4c5facdc">Mobile</a>).toString());
<a name="l00327"></a>00327         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#729f97e2df77d68801004df385955298">emailLineEdit</a>-&gt;setText(query-&gt;value(<a class="code" href="class_r_f_i_d_input_dialog.html#3f9e936d6e5691d8ab946beebddc946cf4333f273355e25c371716c814066ba6">Email</a>).toString());
<a name="l00328"></a>00328         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#ab05223309a28747a07d0ed753b2a462">clubLineEdit</a>-&gt;setText(query-&gt;value(<a class="code" href="class_r_f_i_d_input_dialog.html#3f9e936d6e5691d8ab946beebddc946cec585219326830d06a20a4be740c4877">Team_Club</a>).toString());
<a name="l00329"></a>00329         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#178fa80ddddaf49ec9096cb08cc76494">nationalitaetComboBox</a>-&gt;setCurrentIndex(
<a name="l00330"></a>00330                         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#178fa80ddddaf49ec9096cb08cc76494">nationalitaetComboBox</a>-&gt;findText(
<a name="l00331"></a>00331                                         query-&gt;value(<a class="code" href="class_r_f_i_d_input_dialog.html#3f9e936d6e5691d8ab946beebddc946cbf81876361ac3a49db8331ae278c7782">Nationalitaet</a>).toString()
<a name="l00332"></a>00332                         )
<a name="l00333"></a>00333         );
<a name="l00334"></a>00334         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#049ac450ed517de9f065df16c1ab6dd6">jahrgangSpinBox</a>-&gt;setValue(query-&gt;value(<a class="code" href="class_r_f_i_d_input_dialog.html#3f9e936d6e5691d8ab946beebddc946c78a38fa4ba1ef16bede3f6049b713347">Jahrgang</a>).toInt());
<a name="l00335"></a>00335         <span class="keywordflow">if</span>(query-&gt;value(<a class="code" href="class_r_f_i_d_input_dialog.html#3f9e936d6e5691d8ab946beebddc946c8929715c51e09dbcb1a194a6fe1537f1">Geschlecht</a>).toString()==<span class="stringliteral">"Maennlich"</span>)
<a name="l00336"></a>00336                 <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#522ea6b44f4494a26cfd4920252ff99f">maenlichRadioButton</a>-&gt;setChecked(<span class="keyword">true</span>);
<a name="l00337"></a>00337         <span class="keywordflow">else</span>
<a name="l00338"></a>00338                 <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#5e6931622decd2011e21bb494a941dba">weiblichRadioButton</a>-&gt;setChecked(<span class="keyword">true</span>);
<a name="l00339"></a>00339 }
<a name="l00344"></a><a class="code" href="class_r_f_i_d_input_dialog.html#3f2a6693dd90d3a2308decf4dcd122dd">00344</a> <span class="keywordtype">bool</span> <a class="code" href="class_r_f_i_d_input_dialog.html#3f2a6693dd90d3a2308decf4dcd122dd" title="Einfügen der Fahrzeit in die Datenbank.">RFIDInputDialog::insertRacetime</a>(<span class="keywordtype">int</span> <a class="code" href="class_r_f_i_d_input_dialog.html#557be7292bf8509e793dc17e79d18e75">TeilnehmerKeyInt</a>){
<a name="l00345"></a>00345         QSqlQuery query;
<a name="l00346"></a>00346         QString sql = <span class="stringliteral">"SELECT TeilnehmerKey FROM zeiten WHERE Startzeit='"</span> + 
<a name="l00347"></a>00347                                    <a class="code" href="class_r_f_i_d_input_dialog.html#f4cc582a23571818a7fa8c796806107f" title="Zeiten aus der Struktur zur anzeige vorbereiten.">toDateString</a>(&amp;<a class="code" href="class_r_f_i_d_input_dialog.html#2fffb8807b878f9debba8d9b13046854">pRfid</a>-&gt;startdate,<span class="stringliteral">"yyyy-MM-dd hh:mm:ss"</span>) + 
<a name="l00348"></a>00348                                    <span class="stringliteral">"' AND StreckenKey='"</span>+ QString::number(<a class="code" href="class_r_f_i_d_input_dialog.html#2fffb8807b878f9debba8d9b13046854">pRfid</a>-&gt;<a class="code" href="class_r_f_i_d___c_r500.html#2fa7bc6f3433a1acf060356166d591a6">strecke</a>) + 
<a name="l00349"></a>00349                                    <span class="stringliteral">"' AND Endzeit='"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#f4cc582a23571818a7fa8c796806107f" title="Zeiten aus der Struktur zur anzeige vorbereiten.">toDateString</a>(&amp;<a class="code" href="class_r_f_i_d_input_dialog.html#2fffb8807b878f9debba8d9b13046854">pRfid</a>-&gt;<a class="code" href="class_r_f_i_d___c_r500.html#a833f1ef40098bd9f9d07787bfe45271">enddate</a>,<span class="stringliteral">"yyyy-MM-dd hh:mm:ss"</span>) + <span class="stringliteral">"'"</span> ;
<a name="l00350"></a>00350         qDebug() &lt;&lt; sql;
<a name="l00351"></a>00351         query.exec(sql);
<a name="l00352"></a>00352         <span class="keywordflow">if</span>(query.next()){
<a name="l00353"></a>00353                 <span class="comment">// Zeit wurde per FTP übermittelt</span>
<a name="l00354"></a>00354                 <span class="comment">// "(Noch nicht ausgewertet)" Teilnehmer löschen</span>
<a name="l00355"></a>00355                 sql = <span class="stringliteral">"DELETE FROM teilnehmer WHERE TeilnehmerKey="</span> + query.value(0).toString();
<a name="l00356"></a>00356                 qDebug() &lt;&lt; sql;
<a name="l00357"></a>00357                 query.exec(sql);
<a name="l00358"></a>00358                 sql = <span class="stringliteral">"UPDATE zeiten SET TeilnehmerKey='"</span> + QString::number(TeilnehmerKeyInt) + <span class="stringliteral">"', Kategorie='"</span> +
<a name="l00359"></a>00359                                    <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#5e8b3cf5f29c85c7592ca34fd56ec686">KategoriecomboBox</a>-&gt;currentText() + <span class="stringliteral">"' WHERE Startzeit='"</span> + 
<a name="l00360"></a>00360                                    <a class="code" href="class_r_f_i_d_input_dialog.html#f4cc582a23571818a7fa8c796806107f" title="Zeiten aus der Struktur zur anzeige vorbereiten.">toDateString</a>(&amp;<a class="code" href="class_r_f_i_d_input_dialog.html#2fffb8807b878f9debba8d9b13046854">pRfid</a>-&gt;startdate,<span class="stringliteral">"yyyy-MM-dd hh:mm:ss"</span>) + 
<a name="l00361"></a>00361                                    <span class="stringliteral">"' AND StreckenKey='"</span>+ QString::number(<a class="code" href="class_r_f_i_d_input_dialog.html#2fffb8807b878f9debba8d9b13046854">pRfid</a>-&gt;<a class="code" href="class_r_f_i_d___c_r500.html#2fa7bc6f3433a1acf060356166d591a6">strecke</a>) + 
<a name="l00362"></a>00362                                    <span class="stringliteral">"' AND Endzeit='"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#f4cc582a23571818a7fa8c796806107f" title="Zeiten aus der Struktur zur anzeige vorbereiten.">toDateString</a>(&amp;<a class="code" href="class_r_f_i_d_input_dialog.html#2fffb8807b878f9debba8d9b13046854">pRfid</a>-&gt;<a class="code" href="class_r_f_i_d___c_r500.html#a833f1ef40098bd9f9d07787bfe45271">enddate</a>,<span class="stringliteral">"yyyy-MM-dd hh:mm:ss"</span>) + <span class="stringliteral">"'"</span> ;
<a name="l00363"></a>00363                 qDebug() &lt;&lt; sql;
<a name="l00364"></a>00364                 <span class="keywordflow">if</span>(query.exec(sql))
<a name="l00365"></a>00365                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00366"></a>00366                 qDebug()&lt;&lt;query.lastError();
<a name="l00367"></a>00367                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00368"></a>00368 
<a name="l00369"></a>00369         }<span class="keywordflow">else</span>{
<a name="l00370"></a>00370                 <span class="comment">// Zeit wurde nicht übertragen</span>
<a name="l00371"></a>00371                 sql = <span class="stringliteral">"INSERT INTO zeiten ("</span>
<a name="l00372"></a>00372                                 <span class="stringliteral">"TimeKey, Eintrag, Startzeit, Endzeit, StreckenKey, TeilnehmerKey, Kategorie, Fahrzeit, SNR_RFID, TimeID "</span>                      
<a name="l00373"></a>00373                                 <span class="stringliteral">")VALUES("</span>
<a name="l00374"></a>00374                                 <span class="stringliteral">"NULL, CURRENT_TIMESTAMP , '"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#f4cc582a23571818a7fa8c796806107f" title="Zeiten aus der Struktur zur anzeige vorbereiten.">toDateString</a>(&amp;<a class="code" href="class_r_f_i_d_input_dialog.html#2fffb8807b878f9debba8d9b13046854">pRfid</a>-&gt;startdate,<span class="stringliteral">"yyyy-MM-dd hh:mm:ss"</span>) + <span class="stringliteral">"', '"</span> +
<a name="l00375"></a>00375                                 <a class="code" href="class_r_f_i_d_input_dialog.html#f4cc582a23571818a7fa8c796806107f" title="Zeiten aus der Struktur zur anzeige vorbereiten.">toDateString</a>(&amp;<a class="code" href="class_r_f_i_d_input_dialog.html#2fffb8807b878f9debba8d9b13046854">pRfid</a>-&gt;<a class="code" href="class_r_f_i_d___c_r500.html#a833f1ef40098bd9f9d07787bfe45271">enddate</a>,<span class="stringliteral">"yyyy-MM-dd hh:mm:ss"</span>) + <span class="stringliteral">"', '"</span> + QString::number(<a class="code" href="class_r_f_i_d_input_dialog.html#2fffb8807b878f9debba8d9b13046854">pRfid</a>-&gt;<a class="code" href="class_r_f_i_d___c_r500.html#2fa7bc6f3433a1acf060356166d591a6">strecke</a>) + 
<a name="l00376"></a>00376                                 <span class="stringliteral">"', '"</span> + QString::number(TeilnehmerKeyInt) + <span class="stringliteral">"', '"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#5e8b3cf5f29c85c7592ca34fd56ec686">KategoriecomboBox</a>-&gt;currentText() + <span class="stringliteral">"', '"</span> + 
<a name="l00377"></a>00377                                 <a class="code" href="class_r_f_i_d_input_dialog.html#f4cc582a23571818a7fa8c796806107f" title="Zeiten aus der Struktur zur anzeige vorbereiten.">toDateString</a>(&amp;<a class="code" href="class_r_f_i_d_input_dialog.html#2fffb8807b878f9debba8d9b13046854">pRfid</a>-&gt;<a class="code" href="class_r_f_i_d___c_r500.html#1790d6c17d8367723c96ad74515bd709">racetime</a>) + <span class="stringliteral">"', NULL , '1')"</span>;
<a name="l00378"></a>00378                 qDebug() &lt;&lt; sql;
<a name="l00379"></a>00379                 query.exec(<span class="stringliteral">"LOCK TABLES zeiten WRITE"</span>);
<a name="l00380"></a>00380                 <span class="keywordflow">if</span>(query.exec(sql)){
<a name="l00381"></a>00381                         query.exec(<span class="stringliteral">"UNLOCK TABLES"</span>);
<a name="l00382"></a>00382                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00383"></a>00383                 }
<a name="l00384"></a>00384                 query.exec(<span class="stringliteral">"UNLOCK TABLES"</span>);
<a name="l00385"></a>00385                 qDebug()&lt;&lt;query.lastError();
<a name="l00386"></a>00386                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00387"></a>00387         }
<a name="l00388"></a>00388 }
<a name="l00392"></a><a class="code" href="class_r_f_i_d_input_dialog.html#5213121582a03ad6c9e78d1915729937">00392</a> <span class="keywordtype">bool</span> <a class="code" href="class_r_f_i_d_input_dialog.html#5213121582a03ad6c9e78d1915729937" title="Eintragen des neuen Teilnehmers und der Zeit.">RFIDInputDialog::insertPersonAndTime</a>(){
<a name="l00393"></a>00393         QString sql = <span class="stringliteral">"INSERT INTO teilnehmer ("</span>
<a name="l00394"></a>00394                         <span class="stringliteral">"TeilnehmerKey , Name , Vorname , Adresse , PLZ , Ort , Jahrgang ,"</span>
<a name="l00395"></a>00395                         <span class="stringliteral">"Geschlecht , Nationalitaet , Club , EMail , Telefon , Mobile , SNR_RFID"</span>
<a name="l00396"></a>00396                         <span class="stringliteral">")VALUES(NULL, "</span>;
<a name="l00397"></a>00397         sql += <span class="stringliteral">"'"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#168853345738013708c4d46f3f3f84c0">nameLineEdit</a>-&gt;text() + <span class="stringliteral">"', "</span>;
<a name="l00398"></a>00398         sql += <span class="stringliteral">"'"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#ff3670254a5ae940c6045463bae158ab">vornameLineEdit</a>-&gt;text() + <span class="stringliteral">"', "</span>;
<a name="l00399"></a>00399         sql += <span class="stringliteral">"'"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#fcbdd99c7ed313b95eb96f49256ae8fd">adresseLineEdit</a>-&gt;text() + <span class="stringliteral">"', "</span>;
<a name="l00400"></a>00400         sql += <span class="stringliteral">"'"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#20e8b6974519d4510cf733992d8c2027">plzLineEdit</a>-&gt;text() + <span class="stringliteral">"', "</span>;
<a name="l00401"></a>00401         sql += <span class="stringliteral">"'"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#8524d17700c18aadaf06c968611bb835">ortLineEdit</a>-&gt;text() + <span class="stringliteral">"', "</span>;
<a name="l00402"></a>00402         sql += <span class="stringliteral">"'"</span> + QString::number(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#049ac450ed517de9f065df16c1ab6dd6">jahrgangSpinBox</a>-&gt;value()) + <span class="stringliteral">"', "</span>;
<a name="l00403"></a>00403         <span class="keywordflow">if</span>(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#522ea6b44f4494a26cfd4920252ff99f">maenlichRadioButton</a>-&gt;isChecked())
<a name="l00404"></a>00404                 sql += <span class="stringliteral">"'Maennlich', "</span>;
<a name="l00405"></a>00405         <span class="keywordflow">else</span>
<a name="l00406"></a>00406                 sql += <span class="stringliteral">"'Weiblich', "</span>;
<a name="l00407"></a>00407         sql += <span class="stringliteral">"'"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#178fa80ddddaf49ec9096cb08cc76494">nationalitaetComboBox</a>-&gt;itemText(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#178fa80ddddaf49ec9096cb08cc76494">nationalitaetComboBox</a>-&gt;currentIndex()) + <span class="stringliteral">"', "</span>;
<a name="l00408"></a>00408         <span class="keywordflow">if</span>(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#ab05223309a28747a07d0ed753b2a462">clubLineEdit</a>-&gt;text()!=<span class="stringliteral">""</span>)
<a name="l00409"></a>00409                 sql += <span class="stringliteral">"'"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#ab05223309a28747a07d0ed753b2a462">clubLineEdit</a>-&gt;text() + <span class="stringliteral">"', "</span>;
<a name="l00410"></a>00410         <span class="keywordflow">else</span>
<a name="l00411"></a>00411                 sql += <span class="stringliteral">"NULL, "</span>;
<a name="l00412"></a>00412         <span class="keywordflow">if</span>(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#729f97e2df77d68801004df385955298">emailLineEdit</a>-&gt;text()!=<span class="stringliteral">""</span>)
<a name="l00413"></a>00413                 sql += <span class="stringliteral">"'"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#729f97e2df77d68801004df385955298">emailLineEdit</a>-&gt;text() + <span class="stringliteral">"', "</span>;
<a name="l00414"></a>00414         <span class="keywordflow">else</span>
<a name="l00415"></a>00415                 sql += <span class="stringliteral">"NULL, "</span>;
<a name="l00416"></a>00416         <span class="keywordflow">if</span>(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#db31c8901b94fac9a408a313e419c47e">telephonLineEdit</a>-&gt;text()!=<span class="stringliteral">""</span>)
<a name="l00417"></a>00417                 sql += <span class="stringliteral">"'"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#db31c8901b94fac9a408a313e419c47e">telephonLineEdit</a>-&gt;text() + <span class="stringliteral">"', "</span>;
<a name="l00418"></a>00418         <span class="keywordflow">else</span>
<a name="l00419"></a>00419                 sql += <span class="stringliteral">"NULL, "</span>;
<a name="l00420"></a>00420         <span class="keywordflow">if</span>(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#84a036036ae9f5a4c1814515bfdc1df8">mobileLineEdit</a>-&gt;text()!=<span class="stringliteral">""</span>)
<a name="l00421"></a>00421                 sql += <span class="stringliteral">"'"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#84a036036ae9f5a4c1814515bfdc1df8">mobileLineEdit</a>-&gt;text() + <span class="stringliteral">"', "</span>;
<a name="l00422"></a>00422         <span class="keywordflow">else</span>
<a name="l00423"></a>00423                 sql += <span class="stringliteral">"NULL, "</span>;
<a name="l00424"></a>00424         sql += <span class="stringliteral">"NULL)"</span>;
<a name="l00425"></a>00425         qDebug() &lt;&lt; sql;
<a name="l00426"></a>00426         QSqlQuery query;
<a name="l00427"></a>00427         query.exec(<span class="stringliteral">"LOCK TABLES teilnehmer WRITE"</span>);
<a name="l00428"></a>00428         query.exec(sql);
<a name="l00429"></a>00429         query.exec(<span class="stringliteral">"UNLOCK TABLES"</span>);
<a name="l00430"></a>00430         <span class="comment">// TeilnehmerKey des soeben erstellten Benutzers finden</span>
<a name="l00431"></a>00431         sql = <span class="stringliteral">"SELECT TeilnehmerKey FROM teilnehmer WHERE "</span>;
<a name="l00432"></a>00432         sql += <span class="stringliteral">"name ='"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#168853345738013708c4d46f3f3f84c0">nameLineEdit</a>-&gt;text() + <span class="stringliteral">"' AND "</span>;
<a name="l00433"></a>00433         sql += <span class="stringliteral">"vorname ='"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#ff3670254a5ae940c6045463bae158ab">vornameLineEdit</a>-&gt;text() + <span class="stringliteral">"' AND "</span>;
<a name="l00434"></a>00434         sql += <span class="stringliteral">"adresse ='"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#fcbdd99c7ed313b95eb96f49256ae8fd">adresseLineEdit</a>-&gt;text() + <span class="stringliteral">"' AND "</span>;
<a name="l00435"></a>00435         sql += <span class="stringliteral">"plz ='"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#20e8b6974519d4510cf733992d8c2027">plzLineEdit</a>-&gt;text() + <span class="stringliteral">"' AND "</span>;
<a name="l00436"></a>00436         sql += <span class="stringliteral">"ort ='"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#8524d17700c18aadaf06c968611bb835">ortLineEdit</a>-&gt;text() + <span class="stringliteral">"' "</span>;
<a name="l00437"></a>00437 
<a name="l00438"></a>00438         qDebug() &lt;&lt; sql;
<a name="l00439"></a>00439         query.exec(sql);
<a name="l00440"></a>00440         query.next();
<a name="l00441"></a>00441         <span class="comment">// Fahrzeit mit zuordnung zum erstellten Teilnehmers eintragen</span>
<a name="l00442"></a>00442         <a class="code" href="class_r_f_i_d_input_dialog.html#3f2a6693dd90d3a2308decf4dcd122dd" title="Einfügen der Fahrzeit in die Datenbank.">insertRacetime</a>(query.value(0).toInt());
<a name="l00443"></a>00443         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00444"></a>00444 }
<a name="l00445"></a>00445 
<a name="l00449"></a><a class="code" href="class_r_f_i_d_input_dialog.html#cfbdcec5da0cd09b10edbb23bfd9a185">00449</a> <span class="keywordtype">bool</span> <a class="code" href="class_r_f_i_d_input_dialog.html#cfbdcec5da0cd09b10edbb23bfd9a185" title="Änderungen der Benutzerdaten in die Datenbank übertragen.">RFIDInputDialog::updatePerson</a>(<span class="keywordtype">int</span> <a class="code" href="class_r_f_i_d_input_dialog.html#557be7292bf8509e793dc17e79d18e75">TeilnehmerKeyInt</a>){
<a name="l00450"></a>00450         QString sql = <span class="stringliteral">"UPDATE teilnehmer SET "</span>;
<a name="l00451"></a>00451         <span class="keywordtype">bool</span> first=<span class="keyword">true</span>;
<a name="l00452"></a>00452         <span class="keywordflow">if</span>(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#168853345738013708c4d46f3f3f84c0">nameLineEdit</a>-&gt;isModified()){
<a name="l00453"></a>00453                 sql += <span class="stringliteral">"name = '"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#168853345738013708c4d46f3f3f84c0">nameLineEdit</a>-&gt;text() + <span class="stringliteral">"' "</span>;
<a name="l00454"></a>00454                 first=<span class="keyword">false</span>;
<a name="l00455"></a>00455         }
<a name="l00456"></a>00456         <span class="keywordflow">if</span>(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#ff3670254a5ae940c6045463bae158ab">vornameLineEdit</a>-&gt;isModified()){
<a name="l00457"></a>00457                 <span class="keywordflow">if</span>(!first)
<a name="l00458"></a>00458                         sql += <span class="stringliteral">", "</span>;
<a name="l00459"></a>00459                 sql += <span class="stringliteral">"vorname = '"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#ff3670254a5ae940c6045463bae158ab">vornameLineEdit</a>-&gt;text() + <span class="stringliteral">"' "</span>;
<a name="l00460"></a>00460                 first=<span class="keyword">false</span>;
<a name="l00461"></a>00461         }
<a name="l00462"></a>00462         <span class="keywordflow">if</span>(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#fcbdd99c7ed313b95eb96f49256ae8fd">adresseLineEdit</a>-&gt;isModified()){
<a name="l00463"></a>00463                 <span class="keywordflow">if</span>(!first)
<a name="l00464"></a>00464                         sql += <span class="stringliteral">", "</span>;
<a name="l00465"></a>00465                 sql += <span class="stringliteral">"adresse = '"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#fcbdd99c7ed313b95eb96f49256ae8fd">adresseLineEdit</a>-&gt;text() + <span class="stringliteral">"' "</span>;
<a name="l00466"></a>00466                 first=<span class="keyword">false</span>;
<a name="l00467"></a>00467         }
<a name="l00468"></a>00468         <span class="keywordflow">if</span>(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#20e8b6974519d4510cf733992d8c2027">plzLineEdit</a>-&gt;isModified()){
<a name="l00469"></a>00469                 <span class="keywordflow">if</span>(!first)
<a name="l00470"></a>00470                         sql += <span class="stringliteral">", "</span>;
<a name="l00471"></a>00471                 sql += <span class="stringliteral">"plz = '"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#20e8b6974519d4510cf733992d8c2027">plzLineEdit</a>-&gt;text() + <span class="stringliteral">"' "</span>;
<a name="l00472"></a>00472                 first=<span class="keyword">false</span>;
<a name="l00473"></a>00473         }
<a name="l00474"></a>00474         <span class="keywordflow">if</span>(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#8524d17700c18aadaf06c968611bb835">ortLineEdit</a>-&gt;isModified()){
<a name="l00475"></a>00475                 <span class="keywordflow">if</span>(!first)
<a name="l00476"></a>00476                         sql += <span class="stringliteral">", "</span>;
<a name="l00477"></a>00477                 sql += <span class="stringliteral">"Ort = '"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#8524d17700c18aadaf06c968611bb835">ortLineEdit</a>-&gt;text() + <span class="stringliteral">"' "</span>;
<a name="l00478"></a>00478                 first=<span class="keyword">false</span>;
<a name="l00479"></a>00479         }
<a name="l00480"></a>00480         <span class="keywordflow">if</span>(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#ab05223309a28747a07d0ed753b2a462">clubLineEdit</a>-&gt;isModified()){
<a name="l00481"></a>00481                 <span class="keywordflow">if</span>(!first)
<a name="l00482"></a>00482                         sql += <span class="stringliteral">", "</span>;
<a name="l00483"></a>00483                 sql += <span class="stringliteral">"Club = '"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#ab05223309a28747a07d0ed753b2a462">clubLineEdit</a>-&gt;text() + <span class="stringliteral">"' "</span>;
<a name="l00484"></a>00484                 first=<span class="keyword">false</span>;
<a name="l00485"></a>00485         }
<a name="l00486"></a>00486         <span class="keywordflow">if</span>(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#729f97e2df77d68801004df385955298">emailLineEdit</a>-&gt;isModified()){
<a name="l00487"></a>00487                 <span class="keywordflow">if</span>(!first)
<a name="l00488"></a>00488                         sql += <span class="stringliteral">", "</span>;
<a name="l00489"></a>00489                 sql += <span class="stringliteral">"EMail = '"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#729f97e2df77d68801004df385955298">emailLineEdit</a>-&gt;text() + <span class="stringliteral">"' "</span>;
<a name="l00490"></a>00490                 first=<span class="keyword">false</span>;
<a name="l00491"></a>00491         }
<a name="l00492"></a>00492         <span class="keywordflow">if</span>(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#db31c8901b94fac9a408a313e419c47e">telephonLineEdit</a>-&gt;isModified()){
<a name="l00493"></a>00493                 <span class="keywordflow">if</span>(!first)
<a name="l00494"></a>00494                         sql += <span class="stringliteral">", "</span>;
<a name="l00495"></a>00495                 sql += <span class="stringliteral">"Telefon = '"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#db31c8901b94fac9a408a313e419c47e">telephonLineEdit</a>-&gt;text() + <span class="stringliteral">"' "</span>;
<a name="l00496"></a>00496                 first=<span class="keyword">false</span>;
<a name="l00497"></a>00497         }
<a name="l00498"></a>00498         <span class="keywordflow">if</span>(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#84a036036ae9f5a4c1814515bfdc1df8">mobileLineEdit</a>-&gt;isModified()){
<a name="l00499"></a>00499                 <span class="keywordflow">if</span>(!first)
<a name="l00500"></a>00500                         sql += <span class="stringliteral">", "</span>;
<a name="l00501"></a>00501                 sql += <span class="stringliteral">"Mobile = '"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#84a036036ae9f5a4c1814515bfdc1df8">mobileLineEdit</a>-&gt;text() + <span class="stringliteral">"' "</span>;
<a name="l00502"></a>00502                 first=<span class="keyword">false</span>;
<a name="l00503"></a>00503         }
<a name="l00504"></a>00504         <span class="keywordflow">if</span>(!first)
<a name="l00505"></a>00505                 sql += <span class="stringliteral">", "</span>;
<a name="l00506"></a>00506         sql += <span class="stringliteral">"Nationalitaet = '"</span> + <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#178fa80ddddaf49ec9096cb08cc76494">nationalitaetComboBox</a>-&gt;itemText(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#178fa80ddddaf49ec9096cb08cc76494">nationalitaetComboBox</a>-&gt;currentIndex()) + <span class="stringliteral">"' "</span>;
<a name="l00507"></a>00507         first=<span class="keyword">false</span>;
<a name="l00508"></a>00508         sql += <span class="stringliteral">", Jahrgang = '"</span> + QString::number(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#049ac450ed517de9f065df16c1ab6dd6">jahrgangSpinBox</a>-&gt;value()) + <span class="stringliteral">"' "</span>;
<a name="l00509"></a>00509         <span class="keywordflow">if</span>(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#522ea6b44f4494a26cfd4920252ff99f">maenlichRadioButton</a>-&gt;isChecked())
<a name="l00510"></a>00510                 sql += <span class="stringliteral">", Geschlecht = 'Maennlich' "</span>;
<a name="l00511"></a>00511         <span class="keywordflow">else</span>
<a name="l00512"></a>00512                 sql += <span class="stringliteral">", Geschlecht = 'Weiblich' "</span>;
<a name="l00513"></a>00513         sql += <span class="stringliteral">"WHERE TeilnehmerKey = "</span> + QString::number(TeilnehmerKeyInt);
<a name="l00514"></a>00514         
<a name="l00515"></a>00515         qDebug() &lt;&lt; sql;
<a name="l00516"></a>00516         QSqlQuery query;
<a name="l00517"></a>00517         <span class="keywordflow">if</span>(query.exec(sql))
<a name="l00518"></a>00518                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00519"></a>00519         qDebug()&lt;&lt;query.lastError();
<a name="l00520"></a>00520         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00521"></a>00521 }
<a name="l00525"></a><a class="code" href="class_r_f_i_d_input_dialog.html#5318d27b73bdd6b480d2bd7e4393d9b3">00525</a> <span class="keywordtype">void</span> <a class="code" href="class_r_f_i_d_input_dialog.html#5318d27b73bdd6b480d2bd7e4393d9b3" title="Slot für Textänderungen.">RFIDInputDialog::on_nameLineEdit_textEdited</a>(){
<a name="l00526"></a>00526         qDebug() &lt;&lt; <span class="stringliteral">"Name Edited"</span>;
<a name="l00527"></a>00527         <a class="code" href="class_r_f_i_d_input_dialog.html#02ecbebd64e8e4d176f9da497366dede" title="überprüfen, ob der bisherige Eintrag einzigartig ist.">checkSingularity</a>();
<a name="l00528"></a>00528 }
<a name="l00532"></a><a class="code" href="class_r_f_i_d_input_dialog.html#dbd5b406b288c271329508dff10de89e">00532</a> <span class="keywordtype">void</span> <a class="code" href="class_r_f_i_d_input_dialog.html#dbd5b406b288c271329508dff10de89e" title="Slot für Textänderungen.">RFIDInputDialog::on_vornameLineEdit_textEdited</a>(){
<a name="l00533"></a>00533         qDebug() &lt;&lt; <span class="stringliteral">"Vorname Edited"</span>;
<a name="l00534"></a>00534         <a class="code" href="class_r_f_i_d_input_dialog.html#02ecbebd64e8e4d176f9da497366dede" title="überprüfen, ob der bisherige Eintrag einzigartig ist.">checkSingularity</a>();
<a name="l00535"></a>00535 }
<a name="l00539"></a><a class="code" href="class_r_f_i_d_input_dialog.html#088462e0b153f91f99f4cd076cdb014d">00539</a> <span class="keywordtype">void</span> <a class="code" href="class_r_f_i_d_input_dialog.html#088462e0b153f91f99f4cd076cdb014d" title="Slot für Textänderungen.">RFIDInputDialog::on_adresseLineEdit_textEdited</a>(){
<a name="l00540"></a>00540         qDebug() &lt;&lt; <span class="stringliteral">"adresse Edited"</span>;
<a name="l00541"></a>00541         <a class="code" href="class_r_f_i_d_input_dialog.html#02ecbebd64e8e4d176f9da497366dede" title="überprüfen, ob der bisherige Eintrag einzigartig ist.">checkSingularity</a>();
<a name="l00542"></a>00542 }
<a name="l00546"></a><a class="code" href="class_r_f_i_d_input_dialog.html#6136d9ac2c0400239d01f06269fb1865">00546</a> <span class="keywordtype">void</span> <a class="code" href="class_r_f_i_d_input_dialog.html#6136d9ac2c0400239d01f06269fb1865" title="Slot für Textänderungen.">RFIDInputDialog::on_plzLineEdit_textEdited</a>(){
<a name="l00547"></a>00547         qDebug() &lt;&lt; <span class="stringliteral">"PLZ Edited"</span>;
<a name="l00548"></a>00548         <a class="code" href="class_r_f_i_d_input_dialog.html#02ecbebd64e8e4d176f9da497366dede" title="überprüfen, ob der bisherige Eintrag einzigartig ist.">checkSingularity</a>();
<a name="l00549"></a>00549 }
<a name="l00553"></a><a class="code" href="class_r_f_i_d_input_dialog.html#159c213b7684ba916d9c047c76fab2e5">00553</a> <span class="keywordtype">void</span> <a class="code" href="class_r_f_i_d_input_dialog.html#159c213b7684ba916d9c047c76fab2e5" title="Slot für Textänderungen.">RFIDInputDialog::on_ortLineEdit_textEdited</a>(){
<a name="l00554"></a>00554         qDebug() &lt;&lt; <span class="stringliteral">"Ort Edited"</span>;
<a name="l00555"></a>00555         <a class="code" href="class_r_f_i_d_input_dialog.html#02ecbebd64e8e4d176f9da497366dede" title="überprüfen, ob der bisherige Eintrag einzigartig ist.">checkSingularity</a>();
<a name="l00556"></a>00556 }
<a name="l00560"></a><a class="code" href="class_r_f_i_d_input_dialog.html#ca45d88bae73e41a219177aeb471b789">00560</a> <span class="keywordtype">void</span> <a class="code" href="class_r_f_i_d_input_dialog.html#ca45d88bae73e41a219177aeb471b789" title="Slot für Textänderungen.">RFIDInputDialog::on_telephonLineEdit_textEdited</a>(){
<a name="l00561"></a>00561         qDebug() &lt;&lt; <span class="stringliteral">"telefon Edited"</span>;
<a name="l00562"></a>00562         <a class="code" href="class_r_f_i_d_input_dialog.html#02ecbebd64e8e4d176f9da497366dede" title="überprüfen, ob der bisherige Eintrag einzigartig ist.">checkSingularity</a>();
<a name="l00563"></a>00563 }
<a name="l00567"></a><a class="code" href="class_r_f_i_d_input_dialog.html#0d12ce25f1a516e1c219400e176c3955">00567</a> <span class="keywordtype">void</span> <a class="code" href="class_r_f_i_d_input_dialog.html#0d12ce25f1a516e1c219400e176c3955" title="Slot für Textänderungen.">RFIDInputDialog::on_mobileLineEdit_textEdited</a>(){
<a name="l00568"></a>00568         qDebug() &lt;&lt; <span class="stringliteral">"mobile Edited"</span>;
<a name="l00569"></a>00569         <a class="code" href="class_r_f_i_d_input_dialog.html#02ecbebd64e8e4d176f9da497366dede" title="überprüfen, ob der bisherige Eintrag einzigartig ist.">checkSingularity</a>();
<a name="l00570"></a>00570 }
<a name="l00574"></a><a class="code" href="class_r_f_i_d_input_dialog.html#e5e5058e55f652dab0d33f9e7ea563ae">00574</a> <span class="keywordtype">void</span> <a class="code" href="class_r_f_i_d_input_dialog.html#e5e5058e55f652dab0d33f9e7ea563ae" title="Slot für Textänderungen.">RFIDInputDialog::on_emailLineEdit_textEdited</a>(){
<a name="l00575"></a>00575         qDebug() &lt;&lt; <span class="stringliteral">"email Edited"</span>;
<a name="l00576"></a>00576         <a class="code" href="class_r_f_i_d_input_dialog.html#02ecbebd64e8e4d176f9da497366dede" title="überprüfen, ob der bisherige Eintrag einzigartig ist.">checkSingularity</a>();
<a name="l00577"></a>00577 }
<a name="l00581"></a><a class="code" href="class_r_f_i_d_input_dialog.html#833c3a68aeee5cfc0ecdd420e2a13a89">00581</a> <span class="keywordtype">void</span> <a class="code" href="class_r_f_i_d_input_dialog.html#833c3a68aeee5cfc0ecdd420e2a13a89" title="Slot für Textänderungen.">RFIDInputDialog::on_clubLineEdit_textEdited</a>(){
<a name="l00582"></a>00582         qDebug() &lt;&lt; <span class="stringliteral">"club Edited"</span>;
<a name="l00583"></a>00583         <a class="code" href="class_r_f_i_d_input_dialog.html#02ecbebd64e8e4d176f9da497366dede" title="überprüfen, ob der bisherige Eintrag einzigartig ist.">checkSingularity</a>();
<a name="l00584"></a>00584 }
<a name="l00588"></a><a class="code" href="class_r_f_i_d_input_dialog.html#34a7d69970ebded23245a780906fd893">00588</a> <span class="keywordtype">void</span> <a class="code" href="class_r_f_i_d_input_dialog.html#34a7d69970ebded23245a780906fd893" title="Slot für Textänderungen.">RFIDInputDialog::on_nationalitaetComboBox_currentIndexChanged</a>(){
<a name="l00589"></a>00589         qDebug() &lt;&lt; <span class="stringliteral">"Nationalität Edit"</span>;
<a name="l00590"></a>00590         
<a name="l00591"></a>00591 }
<a name="l00595"></a><a class="code" href="class_r_f_i_d_input_dialog.html#814026b0c5b8a24cb6a97e1eefd0284a">00595</a> <span class="keywordtype">void</span> <a class="code" href="class_r_f_i_d_input_dialog.html#814026b0c5b8a24cb6a97e1eefd0284a" title="Slot für Jahrgangsänderungen (aktualisieren der Kategorie).">RFIDInputDialog::on_jahrgangSpinBox_valueChanged</a>() {
<a name="l00596"></a>00596         qDebug() &lt;&lt; <span class="stringliteral">"Jahrgang Spin"</span>;
<a name="l00597"></a>00597         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#5e8b3cf5f29c85c7592ca34fd56ec686">KategoriecomboBox</a>-&gt;setCurrentIndex(
<a name="l00598"></a>00598                         <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#5e8b3cf5f29c85c7592ca34fd56ec686">KategoriecomboBox</a>-&gt;findText(
<a name="l00599"></a>00599                                         <a class="code" href="class_r_f_i_d_input_dialog.html#d034adfda34da3b178582a7aa17ae059" title="Berechne die Kategorie aufgrund der Altersbereiche in der Datenbank.">calculateKategorie</a>(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#049ac450ed517de9f065df16c1ab6dd6">jahrgangSpinBox</a>-&gt;value())
<a name="l00600"></a>00600                         )
<a name="l00601"></a>00601         );
<a name="l00602"></a>00602 }
<a name="l00606"></a><a class="code" href="class_r_f_i_d_input_dialog.html#d034adfda34da3b178582a7aa17ae059">00606</a> QString <a class="code" href="class_r_f_i_d_input_dialog.html#d034adfda34da3b178582a7aa17ae059" title="Berechne die Kategorie aufgrund der Altersbereiche in der Datenbank.">RFIDInputDialog::calculateKategorie</a>(<span class="keywordtype">int</span> jahrgang){
<a name="l00607"></a>00607         QDate current(QDate::currentDate());
<a name="l00608"></a>00608         qDebug() &lt;&lt; current.toString(<span class="stringliteral">"dd.MM.yyyy"</span>);
<a name="l00609"></a>00609         qDebug() &lt;&lt; current.year();
<a name="l00610"></a>00610         <span class="keywordtype">int</span> alter = current.year()-jahrgang;
<a name="l00611"></a>00611         
<a name="l00612"></a>00612         QString sql = <span class="stringliteral">"SELECT name FROM kategorien WHERE von&lt;='"</span> + QString::number(alter) + <span class="stringliteral">"' AND bis&gt;='"</span> + QString::number(alter) + <span class="stringliteral">"'"</span>;
<a name="l00613"></a>00613         QSqlQuery query(sql);
<a name="l00614"></a>00614         query.exec(); 
<a name="l00615"></a>00615         qDebug() &lt;&lt; query.lastError();
<a name="l00616"></a>00616         query.next();
<a name="l00617"></a>00617         <span class="keywordflow">return</span> query.value(0).toString();
<a name="l00618"></a>00618 }
<a name="l00622"></a><a class="code" href="class_r_f_i_d_input_dialog.html#46a201754a6bffc77cb0bdcd3f696a48">00622</a> <span class="keywordtype">void</span> <a class="code" href="class_r_f_i_d_input_dialog.html#46a201754a6bffc77cb0bdcd3f696a48" title="Slot für CheckBox &amp;quot;automatisches Vervollständigen&amp;quot;.">RFIDInputDialog::on_autoCheckBox_stateChanged</a>(){
<a name="l00623"></a>00623         <a class="code" href="class_r_f_i_d_input_dialog.html#2c4dff3a7602a6bca4d967b5a561942d">autoInsert</a> = <a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#454ba717043816e016529def2fb17ec2">autoCheckBox</a>-&gt;isChecked();
<a name="l00624"></a>00624         qDebug() &lt;&lt; <a class="code" href="class_r_f_i_d_input_dialog.html#2c4dff3a7602a6bca4d967b5a561942d">autoInsert</a>;
<a name="l00625"></a>00625         <span class="keywordflow">if</span>(<a class="code" href="class_r_f_i_d_input_dialog.html#2c4dff3a7602a6bca4d967b5a561942d">autoInsert</a>)
<a name="l00626"></a>00626                 <a class="code" href="class_r_f_i_d_input_dialog.html#02ecbebd64e8e4d176f9da497366dede" title="überprüfen, ob der bisherige Eintrag einzigartig ist.">checkSingularity</a>();
<a name="l00627"></a>00627 }
<a name="l00631"></a><a class="code" href="class_r_f_i_d_input_dialog.html#bfc414e920d8c099a56c253ec07a6fa7">00631</a> <span class="keywordtype">void</span> <a class="code" href="class_r_f_i_d_input_dialog.html#bfc414e920d8c099a56c253ec07a6fa7" title="Slot für Ok-Button.">RFIDInputDialog::on_okButton_released</a>(){
<a name="l00632"></a>00632         qDebug() &lt;&lt; <span class="stringliteral">"Ok Clicked"</span>;
<a name="l00633"></a>00633         <span class="keywordflow">if</span>(!<a class="code" href="class_r_f_i_d_input_dialog.html#ebed3331b476fb984343d6b3cef19a5a" title="Validierung der Einträge.">validation</a>()) <span class="comment">// Funktion beenden, falls nicht gültig (Dialog bleibt)</span>
<a name="l00634"></a>00634                 <span class="keywordflow">return</span>;
<a name="l00635"></a>00635         <span class="keywordflow">if</span>(<a class="code" href="class_r_f_i_d_input_dialog.html#557be7292bf8509e793dc17e79d18e75">TeilnehmerKeyInt</a>==0){
<a name="l00636"></a>00636                 <span class="keywordflow">if</span>(!<a class="code" href="class_r_f_i_d_input_dialog.html#a466a7c7bb57d2c3163ce2d400b9f6af" title="Löschen der Statusbits der Karte nach dem Auswerten.">clearValidFlag</a>()) <span class="comment">// Funktion beenden, falls nicht erfolgreich (Dialog bleibt)</span>
<a name="l00637"></a>00637                         <span class="keywordflow">return</span>; 
<a name="l00638"></a>00638                 qDebug() &lt;&lt; <span class="stringliteral">"neuer Teilnehmer erstellt"</span>;
<a name="l00639"></a>00639                 <span class="comment">// Neuer Teilnehmer und dessen Zeit hinzufügen</span>
<a name="l00640"></a>00640                 <a class="code" href="class_r_f_i_d_input_dialog.html#5213121582a03ad6c9e78d1915729937" title="Eintragen des neuen Teilnehmers und der Zeit.">insertPersonAndTime</a>();
<a name="l00641"></a>00641                 this-&gt;close();
<a name="l00642"></a>00642         }<span class="keywordflow">else</span>{
<a name="l00643"></a>00643                 <span class="keywordflow">if</span>(!<a class="code" href="class_r_f_i_d_input_dialog.html#a466a7c7bb57d2c3163ce2d400b9f6af" title="Löschen der Statusbits der Karte nach dem Auswerten.">clearValidFlag</a>()) <span class="comment">// Funktion beenden, falls nicht erfolgreich (Dialog bleibt)</span>
<a name="l00644"></a>00644                         <span class="keywordflow">return</span>; 
<a name="l00645"></a>00645                 qDebug() &lt;&lt; <span class="stringliteral">"Teilnehmer "</span> &lt;&lt; <a class="code" href="class_r_f_i_d_input_dialog.html#557be7292bf8509e793dc17e79d18e75">TeilnehmerKeyInt</a> &lt;&lt; <span class="stringliteral">"updated"</span>;
<a name="l00646"></a>00646                 <span class="comment">// Teilnehmer Daten aktualisieren</span>
<a name="l00647"></a>00647                 <a class="code" href="class_r_f_i_d_input_dialog.html#cfbdcec5da0cd09b10edbb23bfd9a185" title="Änderungen der Benutzerdaten in die Datenbank übertragen.">updatePerson</a>(<a class="code" href="class_r_f_i_d_input_dialog.html#557be7292bf8509e793dc17e79d18e75">TeilnehmerKeyInt</a>);
<a name="l00648"></a>00648                 <span class="comment">// Zeit hinzufügen</span>
<a name="l00649"></a>00649                 <a class="code" href="class_r_f_i_d_input_dialog.html#3f2a6693dd90d3a2308decf4dcd122dd" title="Einfügen der Fahrzeit in die Datenbank.">insertRacetime</a>(<a class="code" href="class_r_f_i_d_input_dialog.html#557be7292bf8509e793dc17e79d18e75">TeilnehmerKeyInt</a>);
<a name="l00650"></a>00650                 this-&gt;close();
<a name="l00651"></a>00651         }
<a name="l00652"></a>00652 }
<a name="l00656"></a><a class="code" href="class_r_f_i_d_input_dialog.html#ebed3331b476fb984343d6b3cef19a5a">00656</a> <span class="keywordtype">bool</span> <a class="code" href="class_r_f_i_d_input_dialog.html#ebed3331b476fb984343d6b3cef19a5a" title="Validierung der Einträge.">RFIDInputDialog::validation</a>(){
<a name="l00657"></a>00657         <span class="keywordtype">bool</span> valid = <span class="keyword">true</span>;
<a name="l00658"></a>00658         QString error = <span class="stringliteral">"Die folgenden Felder benötigen noch einen Inhalt:\n"</span>;
<a name="l00659"></a>00659         <span class="keywordflow">if</span>(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#168853345738013708c4d46f3f3f84c0">nameLineEdit</a>-&gt;text()==<span class="stringliteral">""</span>){
<a name="l00660"></a>00660                 error += <span class="stringliteral">"Name, "</span>;
<a name="l00661"></a>00661                 valid = <span class="keyword">false</span>;
<a name="l00662"></a>00662         }
<a name="l00663"></a>00663         <span class="keywordflow">if</span>(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#ff3670254a5ae940c6045463bae158ab">vornameLineEdit</a>-&gt;text()==<span class="stringliteral">""</span>){
<a name="l00664"></a>00664                 error += <span class="stringliteral">"Vorname, "</span>;
<a name="l00665"></a>00665                 valid = <span class="keyword">false</span>;
<a name="l00666"></a>00666         }
<a name="l00667"></a>00667         <span class="keywordflow">if</span>(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#fcbdd99c7ed313b95eb96f49256ae8fd">adresseLineEdit</a>-&gt;text()==<span class="stringliteral">""</span>){
<a name="l00668"></a>00668                 error += <span class="stringliteral">"Adresse, "</span>;
<a name="l00669"></a>00669                 valid = <span class="keyword">false</span>;
<a name="l00670"></a>00670         }
<a name="l00671"></a>00671         <span class="keywordflow">if</span>(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#20e8b6974519d4510cf733992d8c2027">plzLineEdit</a>-&gt;text()==<span class="stringliteral">""</span>){
<a name="l00672"></a>00672                 error += <span class="stringliteral">"PLZ, "</span>;
<a name="l00673"></a>00673                 valid = <span class="keyword">false</span>;
<a name="l00674"></a>00674         }
<a name="l00675"></a>00675         <span class="keywordflow">if</span>(<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#8524d17700c18aadaf06c968611bb835">ortLineEdit</a>-&gt;text()==<span class="stringliteral">""</span>){
<a name="l00676"></a>00676                 error += <span class="stringliteral">"Wohnort, "</span>;
<a name="l00677"></a>00677                 valid = <span class="keyword">false</span>;
<a name="l00678"></a>00678         }
<a name="l00679"></a>00679         
<a name="l00680"></a>00680         <span class="keywordflow">if</span>(!<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#522ea6b44f4494a26cfd4920252ff99f">maenlichRadioButton</a>-&gt;isChecked() &amp;&amp; !<a class="code" href="class_r_f_i_d_input_dialog.html#e717744327dda404390c6be01b77180a">ui</a>.<a class="code" href="class_ui___r_f_i_d_input_dialog_class.html#5e6931622decd2011e21bb494a941dba">weiblichRadioButton</a>-&gt;isChecked()){
<a name="l00681"></a>00681                 error += <span class="stringliteral">"Geschlecht, "</span>;
<a name="l00682"></a>00682                 valid = <span class="keyword">false</span>;
<a name="l00683"></a>00683         }
<a name="l00684"></a>00684         <span class="comment">// entfernt 2 Zeichen am Ende des Strings</span>
<a name="l00685"></a>00685         error.chop(2);
<a name="l00686"></a>00686         <span class="keywordflow">if</span>(!valid)
<a name="l00687"></a>00687                 QMessageBox::critical(0,QObject::tr(<span class="stringliteral">"Fehlende Einträge"</span>),error);
<a name="l00688"></a>00688         <span class="keywordflow">return</span> valid;
<a name="l00689"></a>00689 }
<a name="l00693"></a><a class="code" href="class_r_f_i_d_input_dialog.html#a466a7c7bb57d2c3163ce2d400b9f6af">00693</a> <span class="keywordtype">bool</span> <a class="code" href="class_r_f_i_d_input_dialog.html#a466a7c7bb57d2c3163ce2d400b9f6af" title="Löschen der Statusbits der Karte nach dem Auswerten.">RFIDInputDialog::clearValidFlag</a>(){
<a name="l00694"></a>00694         <span class="keywordflow">if</span>(!<a class="code" href="class_r_f_i_d_input_dialog.html#2fffb8807b878f9debba8d9b13046854">pRfid</a>-&gt;<a class="code" href="class_r_f_i_d___c_r500.html#2062849e5d875fb74e71c631468e40c1" title="Löschen der Flags, um die Karte als ausgewertet kennzuzeichnen.">clearValidFlag</a>()){
<a name="l00695"></a>00695                 qDebug() &lt;&lt; <span class="stringliteral">"Valid Flag nicht gelöscht"</span>;
<a name="l00696"></a>00696                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00697"></a>00697         }<span class="keywordflow">else</span>{
<a name="l00698"></a>00698                 qDebug() &lt;&lt; <span class="stringliteral">"Valid Flag gelöscht"</span>;
<a name="l00699"></a>00699                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00700"></a>00700         }
<a name="l00701"></a>00701 }
<a name="l00705"></a><a class="code" href="class_r_f_i_d_input_dialog.html#8f58e254774a1995a54ed0be10183ad9">00705</a> <span class="keywordtype">void</span> <a class="code" href="class_r_f_i_d_input_dialog.html#8f58e254774a1995a54ed0be10183ad9" title="Slot für Abbrechen-Button.">RFIDInputDialog::on_canButton_released</a>(){
<a name="l00706"></a>00706         qDebug() &lt;&lt; <span class="stringliteral">"Abbrechen Clicked"</span>;
<a name="l00707"></a>00707         <a class="code" href="class_r_f_i_d_input_dialog.html#2fffb8807b878f9debba8d9b13046854">pRfid</a>-&gt;<a class="code" href="class_r_f_i_d___c_r500.html#c72b02ffc4c4b42cfdb97fbed3a2eb97" title="Stellt die LED des Lesers auf Grün.">greenLED</a>();
<a name="l00708"></a>00708         this-&gt;close(); 
<a name="l00709"></a>00709 }
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Jun 30 09:36:03 2008 for BEO-Timing by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
