<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>BEO-Timing: beo_timing.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<h1>beo_timing.cpp</h1><a href="beo__timing_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00032"></a>00032 <span class="preprocessor">#include "<a class="code" href="beo__timing_8h.html" title="Hauptklasse der Applikation.">beo_timing.h</a>"</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include "<a class="code" href="tableeditdialog_8h.html" title="Dieser Dialog dient dem Editieren der Eintraege.">tableeditdialog.h</a>"</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include "<a class="code" href="rfidinputdialog_8h.html" title="Stellt die Eingabemaske, sowie die benötigten Funktionen zum auswerten von RFID-Tags...">RFID_Reader/rfidinputdialog.h</a>"</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include "<a class="code" href="_r_f_i_d___c_r500_8h.html" title="Enthält alle Eigenschaften des RFID-Lesers CR500-USB.">RFID_Reader/RFID_CR500.h</a>"</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include "<a class="code" href="logondialog_8h.html" title="Dieser Dialog ist das Login des Programms. Es dient zur Authentifizierung des Benutzers...">logondialog.h</a>"</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include "<a class="code" href="_database_8h.html" title="Diese Klasse symbolisiert die Datenbank. Sie erstellt die Verbindung und stellt verschiedene...">Database.h</a>"</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include "<a class="code" href="db_thread_8h.html" title="Dieser Thread ueberprueft alle 5 Sekunden die Verbindung zur Datenbank.">dbThread.h</a>"</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include "<a class="code" href="_user_8h.html" title="Diese Klasse symbolisiert einen Benutzer und stellt Funktionen bereit.">User.h</a>"</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include "<a class="code" href="neuesrennendialog_8h.html" title="Dieser Dialog dient zum erstellen eines neunen Rennens.">neuesrennendialog.h</a>"</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include "<a class="code" href="passwordchangedialog_8h.html" title="Dieser Dialog dient zum aendern des Passworts des angemeldeten Benutzers.">passwordchangedialog.h</a>"</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include "<a class="code" href="neueruserdialog_8h.html" title="Dieser Dialog dient zum erstellen eines neuen Benutzers.">neueruserdialog.h</a>"</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include "<a class="code" href="hardwarekonfiguration_8h.html" title="Dieser Dialog erstellt eine Konfiguration fuer eine Anlage.">hardwarekonfiguration.h</a>"</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include "<a class="code" href="logfilelesendialog_8h.html" title="Dieser Dialog sucht eine Log-Datei einer Zielstation nach nicht uebermittelten Eintraegen...">logfilelesendialog.h</a>"</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include "<a class="code" href="rechteanpassen_8h.html" title="Dieser Dialog dient zum anpassen der Rechte eines beliebigen Benutzers.">rechteanpassen.h</a>"</span>
<a name="l00046"></a>00046 <span class="preprocessor">#include "<a class="code" href="rfid_thread_8h.html" title="Erstellt einen Thread, welcher alle 0.5 Sekunden prüft ob eine Karte im Feld des...">RFID_Reader/rfidThread.h</a>"</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &lt;QtSql&gt;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &lt;QtGui&gt;</span>
<a name="l00049"></a>00049 
<a name="l00056"></a><a class="code" href="class_b_e_o___timing.html#1adf7a002a9712fefe2f68007d2112e9">00056</a> <a class="code" href="class_b_e_o___timing.html#1adf7a002a9712fefe2f68007d2112e9" title="Konstruktor.">BEO_Timing::BEO_Timing</a>(QSplashScreen *splash, QApplication *a, QWidget *parent)
<a name="l00057"></a>00057     : QMainWindow(parent)
<a name="l00058"></a>00058 {
<a name="l00059"></a>00059         <a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#1c3e4c81dd35c43209c07487ed5a841c">setupUi</a>(<span class="keyword">this</span>);
<a name="l00060"></a>00060         this-&gt;a=a;
<a name="l00061"></a>00061         <span class="comment">// Statusleiste erstellen</span>
<a name="l00062"></a>00062         <a class="code" href="class_b_e_o___timing.html#8f8ee452bed83bd1eb01ba25f3074232" title="Erstellt die Statusbar mit den drei Labeln.">createStatusBar</a>();
<a name="l00063"></a>00063         <span class="comment">// Menue und Toolbar erstellen</span>
<a name="l00064"></a>00064         <a class="code" href="class_b_e_o___timing.html#63c37dc34b4caddfea648850ce260c28" title="Verbindet die Aktionen mit dem Slots (Benutzermenue).">createMenu</a>();
<a name="l00065"></a>00065         <a class="code" href="class_b_e_o___timing.html#7f935167b5af6676da6cf85084118575" title="Erstellt die Symbolliste mit den ausgewählten Aktionen.">createToolbar</a>();
<a name="l00066"></a>00066         <span class="comment">// Diese Initialisierungen müssen so früh stattfinden, damit die Aktionen </span>
<a name="l00067"></a>00067         <span class="comment">// mit den jeweiligen Funktionen verbunden sind</span>
<a name="l00068"></a>00068         
<a name="l00069"></a>00069         <span class="comment">// Datenbank Thread erstellen</span>
<a name="l00070"></a>00070         <a class="code" href="class_b_e_o___timing.html#59ff5cd2ab570b6aaec5e4d6367e107b">pMySQL</a> = <span class="keyword">new</span> <a class="code" href="class_database.html" title="Diese Klasse symbolisiert die Datenbank. Sie erstellt die Verbindung und stellt verschiedene...">Database</a>();
<a name="l00071"></a>00071         <span class="comment">// Datenbankverbindung prüfen und Programmstart abbrechen, falls nicht verbunden.</span>
<a name="l00072"></a>00072         <span class="keywordflow">if</span>(!<a class="code" href="class_b_e_o___timing.html#59ff5cd2ab570b6aaec5e4d6367e107b">pMySQL</a>-&gt;<a class="code" href="class_database.html#b480eca23d1bf71206cab822da9b0246">getDb</a>()-&gt;isOpen()){
<a name="l00073"></a>00073                 <span class="comment">// Popup-Meldung ausgeben und Programm schliessen</span>
<a name="l00074"></a>00074                 QMessageBox::critical(0,<span class="stringliteral">"Keine Verbindung zur Datenbank"</span>,<span class="stringliteral">"Es besteht keine Verbindung zur Datenbank"</span>
<a name="l00075"></a>00075                                 <span class="stringliteral">"Dies kann die folgenden Ursachen haben: &lt;br&gt;&lt;ol&gt;"</span>
<a name="l00076"></a>00076                                 <span class="stringliteral">"&lt;li&gt;Es kann keine Verbindung zum Webserver hergestellt werden. --&gt; überprüfen der "</span>
<a name="l00077"></a>00077                                 <span class="stringliteral">"Internetverbindung.&lt;/li&gt;"</span>
<a name="l00078"></a>00078                                 <span class="stringliteral">"&lt;li&gt;Die Anwendung wird von einer Firewall blockiert. --&gt; Firewalleinstellungen "</span>
<a name="l00079"></a>00079                                 <span class="stringliteral">"überprüfen und sicherstellen, dass der Port 3306 für die BEO-Timing Managementsoftware "</span>
<a name="l00080"></a>00080                                 <span class="stringliteral">"offen ist.&lt;/li&gt;"</span>
<a name="l00081"></a>00081                                 <span class="stringliteral">"&lt;li&gt;Möglicherweise besteht ein Problem mit der Datenbank, was aber eher unwahrscheinlich ist. --&gt; "</span>
<a name="l00082"></a>00082                                 <span class="stringliteral">"Kontaktaufnahme mit dem \"&lt;a href=\"mailto:admin@beo-timing.ch\"&gt;Admin&lt;/a&gt;\".&lt;/li&gt;"</span>
<a name="l00083"></a>00083                                 <span class="stringliteral">"&lt;/ol&gt;Ohne die Verbindung zur Datenbank ist das Programm nicht lauffähig und wird deshalb mit"</span>
<a name="l00084"></a>00084                                 <span class="stringliteral">"\"OK\" beendet."</span>);
<a name="l00085"></a>00085                 <span class="comment">// Applikation beenden</span>
<a name="l00086"></a>00086                 QTimer::singleShot(500, <span class="keyword">this</span>, SLOT(close()));
<a name="l00087"></a>00087                 QTimer::singleShot(1000, a, SLOT(quit()));
<a name="l00088"></a>00088                 <span class="keywordflow">return</span>;
<a name="l00089"></a>00089         }
<a name="l00090"></a>00090         
<a name="l00091"></a>00091         <span class="comment">// Datenbank Thread erstellen</span>
<a name="l00092"></a>00092         <a class="code" href="class_b_e_o___timing.html#2690847a55f7a275ba0df12f8a5e5827">pMySQL_thread</a> = <span class="keyword">new</span> <a class="code" href="class_d_b___thread.html" title="Dieser Thread ueberprueft alle 5 Sekunden die Verbindung zur Datenbank.">DB_Thread</a>();
<a name="l00093"></a>00093         <a class="code" href="class_b_e_o___timing.html#2690847a55f7a275ba0df12f8a5e5827">pMySQL_thread</a>-&gt;start();
<a name="l00094"></a>00094 
<a name="l00095"></a>00095         <span class="comment">// Versionscheck durchführen</span>
<a name="l00096"></a>00096         <a class="code" href="class_b_e_o___timing.html#fa8e65c455ffd3b02112fdd4e6e76878" title="Versionscheck.">newVersion</a>();
<a name="l00097"></a>00097         <span class="keywordflow">if</span>(<a class="code" href="class_b_e_o___timing.html#670385786b671be23b3b3b10dd3e7b91">version</a>){
<a name="l00098"></a>00098                 QMessageBox::critical(0,<span class="stringliteral">"Neue Softwareversion"</span>,<span class="stringliteral">"Auf dem Server ist eine neue "</span>
<a name="l00099"></a>00099                                 <span class="stringliteral">"Softwareversion verfügbar. Die vorliegende Software kann aus Sicherheitsgründen nicht "</span>
<a name="l00100"></a>00100                                 <span class="stringliteral">"mehr verwendet werden. Klicken Sie auf \"&lt;a href=\"http://www.rrc-thun.ch/time/beo-timing.msi\"&gt;download&lt;/a&gt;\" "</span>
<a name="l00101"></a>00101                                 <span class="stringliteral">"um die neue Version herunterzuladen. Mit \"OK\" wird das Programm beendet."</span>);
<a name="l00102"></a>00102                 <span class="comment">// Applikation beenden</span>
<a name="l00103"></a>00103                 QTimer::singleShot(500, <span class="keyword">this</span>, SLOT(close()));
<a name="l00104"></a>00104                 QTimer::singleShot(1000, a, SLOT(quit()));
<a name="l00105"></a>00105                 <span class="keywordflow">return</span>;
<a name="l00106"></a>00106         }
<a name="l00107"></a>00107         
<a name="l00108"></a>00108         
<a name="l00109"></a>00109         <span class="comment">// Titel des Fensters setzen</span>
<a name="l00110"></a>00110         setWindowTitle(<span class="stringliteral">"BEO-Timing - Managementsoftware"</span>);
<a name="l00111"></a>00111         Qt::Alignment topRight = Qt::AlignRight | Qt:: AlignTop;
<a name="l00112"></a>00112         splash-&gt;showMessage(QObject::tr(<span class="stringliteral">"Login eines Benutzers..."</span>),topRight, Qt::white);
<a name="l00113"></a>00113         <span class="comment">//Neuer User-Objekt erstellen und Einloggen</span>
<a name="l00114"></a>00114         <a class="code" href="class_b_e_o___timing.html#36f4e79080543317d02636f93b667c27">user</a> = <span class="keyword">new</span> <a class="code" href="class_user.html" title="Diese Klasse symbolisiert einen Benutzer und stellt Funktionen bereit.">User</a>();
<a name="l00115"></a>00115         <a class="code" href="class_logon_dialog.html" title="Dieser Dialog ist das Login des Programms. Es dient zur Authentifizierung des Benutzers...">LogonDialog</a>* logon = <span class="keyword">new</span> <a class="code" href="class_logon_dialog.html" title="Dieser Dialog ist das Login des Programms. Es dient zur Authentifizierung des Benutzers...">LogonDialog</a>(<a class="code" href="class_b_e_o___timing.html#36f4e79080543317d02636f93b667c27">user</a>,a,<span class="keyword">this</span>);
<a name="l00116"></a>00116         <span class="comment">//logon-&gt;setWindowIcon(QPixmap(":/images/icon32_t.bmp"));</span>
<a name="l00117"></a>00117         logon-&gt;setWindowTitle(tr(<span class="stringliteral">"Login ..."</span>));
<a name="l00118"></a>00118         logon-&gt;exec();
<a name="l00119"></a>00119         <span class="comment">// Applikation beenden, falls nicht eingeloggt wurde</span>
<a name="l00120"></a>00120         <span class="keywordflow">if</span>(<a class="code" href="class_b_e_o___timing.html#36f4e79080543317d02636f93b667c27">user</a>-&gt;<a class="code" href="class_user.html#58c0c89c438e6091bb8e056b421efed6" title="LogonSuccess überprüfen.">getLogonSuccess</a>())
<a name="l00121"></a>00121                 this-&gt;show();
<a name="l00122"></a>00122         <span class="keywordflow">else</span>{
<a name="l00123"></a>00123                 QTimer::singleShot(500, <span class="keyword">this</span>, SLOT(close()));
<a name="l00124"></a>00124                 QTimer::singleShot(1000, a, SLOT(quit()));
<a name="l00125"></a>00125                 <span class="keywordflow">return</span>;
<a name="l00126"></a>00126         }
<a name="l00127"></a>00127         splash-&gt;showMessage(QObject::tr(<span class="stringliteral">"Laden der Daten aus der Datenbank..."</span>),topRight, Qt::white);
<a name="l00128"></a>00128         <span class="comment">// Benutzerrechte im Menu umsetzen </span>
<a name="l00129"></a>00129         <a class="code" href="class_b_e_o___timing.html#cd12cfc862cb158f92a7500f836783c7" title="Setzt die Benutzerrechte für die verschiedenen Aktionen.">setUserRights</a>();
<a name="l00130"></a>00130         <span class="comment">// Tree initialisieren</span>
<a name="l00131"></a>00131         <a class="code" href="class_b_e_o___timing.html#cd19a9b93fb9492e5ed537a8bc15af45" title="Bereitet die Baumansicht zur Darstellung vor.">Tree_Settings</a>();
<a name="l00132"></a>00132         <a class="code" href="class_b_e_o___timing.html#454b16d1cfe5763b0812114e82108e55" title="Füllt die Baumansicht mit Ihalt, entsprechend der Benutzerrechte.">Tree_Build</a>();
<a name="l00133"></a>00133         <span class="comment">// Aktiviert den RFID-Leser (Action löst ein Signal aus, welches mit der Funtkion </span>
<a name="l00134"></a>00134         <span class="comment">// rfidConnection(...) verbunden ist aufruft</span>
<a name="l00135"></a>00135         <span class="comment">// Thread zum Pollen des RFID-Lesers starten (Löst ein Signal aus)</span>
<a name="l00136"></a>00136         <a class="code" href="class_b_e_o___timing.html#3f78ca1ff8e8b783d594c615e1204690">thread</a> = <span class="keyword">new</span> <a class="code" href="class_r_f_i_d___thread.html" title="Erstellt einen Thread, welcher alle 0.5 Sekunden prüft ob eine Karte im Feld des...">RFID_Thread</a>(NULL);
<a name="l00137"></a>00137         <a class="code" href="class_b_e_o___timing.html#6d5901b04efdce11f441205714385160" title="Verbinden des RFID-Lesers.">CR500_verbinden</a>();
<a name="l00138"></a>00138         <a class="code" href="class_b_e_o___timing.html#3f78ca1ff8e8b783d594c615e1204690">thread</a>-&gt;start();
<a name="l00139"></a>00139         <span class="comment">// Verbinden des Signals mit dem Slot in dieser Klasse</span>
<a name="l00140"></a>00140         <span class="comment">// (GUI muss im Hauptthread erstellt werden!!)</span>
<a name="l00141"></a>00141         connect(<a class="code" href="class_b_e_o___timing.html#3f78ca1ff8e8b783d594c615e1204690">thread</a>,SIGNAL(<a class="code" href="class_b_e_o___timing.html#b3d37415fce4b586bca4397bd790105c" title="Prüfen ob eine RFID-Karte im Feld ist.">checkRFID</a>()),<span class="keyword">this</span>,SLOT(<a class="code" href="class_b_e_o___timing.html#b3d37415fce4b586bca4397bd790105c" title="Prüfen ob eine RFID-Karte im Feld ist.">checkRFID</a>()));
<a name="l00142"></a>00142         connect(<a class="code" href="class_b_e_o___timing.html#2690847a55f7a275ba0df12f8a5e5827">pMySQL_thread</a>,SIGNAL(<a class="code" href="class_b_e_o___timing.html#6695ca0572c0a4484d2926c16a3f477b" title="Datenbankverbindung ueberpruefen.">checkDB</a>()),<span class="keyword">this</span>,SLOT(<a class="code" href="class_b_e_o___timing.html#6695ca0572c0a4484d2926c16a3f477b" title="Datenbankverbindung ueberpruefen.">checkDB</a>()));
<a name="l00143"></a>00143 }
<a name="l00144"></a>00144 
<a name="l00148"></a><a class="code" href="class_b_e_o___timing.html#1a251548e7f861c3a74fe34941586519">00148</a> <a class="code" href="class_b_e_o___timing.html#1a251548e7f861c3a74fe34941586519" title="Destruktor.">BEO_Timing::~BEO_Timing</a>()
<a name="l00149"></a>00149 {
<a name="l00150"></a>00150         <a class="code" href="class_b_e_o___timing.html#2690847a55f7a275ba0df12f8a5e5827">pMySQL_thread</a>-&gt;<a class="code" href="class_d_b___thread.html#e468157edacaa0760e833bf643371e62" title="Stoppen des Threads.">stop</a>();
<a name="l00151"></a>00151         <a class="code" href="class_b_e_o___timing.html#2690847a55f7a275ba0df12f8a5e5827">pMySQL_thread</a>-&gt;terminate();
<a name="l00152"></a>00152         <a class="code" href="class_b_e_o___timing.html#2690847a55f7a275ba0df12f8a5e5827">pMySQL_thread</a>-&gt;wait();
<a name="l00153"></a>00153         <span class="keyword">delete</span> <a class="code" href="class_b_e_o___timing.html#2690847a55f7a275ba0df12f8a5e5827">pMySQL_thread</a>;
<a name="l00154"></a>00154         <a class="code" href="class_b_e_o___timing.html#3f78ca1ff8e8b783d594c615e1204690">thread</a>-&gt;<a class="code" href="class_r_f_i_d___thread.html#d6fe5c34ad7534b547970cbb1e3cdc78" title="Stoppen des Threads.">stop</a>();
<a name="l00155"></a>00155         <a class="code" href="class_b_e_o___timing.html#3f78ca1ff8e8b783d594c615e1204690">thread</a>-&gt;terminate();
<a name="l00156"></a>00156         <a class="code" href="class_b_e_o___timing.html#3f78ca1ff8e8b783d594c615e1204690">thread</a>-&gt;wait();
<a name="l00157"></a>00157         <span class="keyword">delete</span> <a class="code" href="class_b_e_o___timing.html#3f78ca1ff8e8b783d594c615e1204690">thread</a>;
<a name="l00158"></a>00158         <span class="keyword">delete</span> <a class="code" href="class_b_e_o___timing.html#a68330ea7c66ad7f7cf913e31d6facf2">pRfid</a>;
<a name="l00159"></a>00159 }
<a name="l00160"></a>00160 
<a name="l00164"></a><a class="code" href="class_b_e_o___timing.html#63c37dc34b4caddfea648850ce260c28">00164</a> <span class="keywordtype">void</span> <a class="code" href="class_b_e_o___timing.html#63c37dc34b4caddfea648850ce260c28" title="Verbindet die Aktionen mit dem Slots (Benutzermenue).">BEO_Timing::createMenu</a>(){
<a name="l00165"></a>00165         connect(<a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#02af051353694da32aca2f3c4784b4f5">actionBeenden</a>,SIGNAL(activated()),<a class="code" href="class_b_e_o___timing.html#8d2d841d6eb959c49a406ecebeb3374d">a</a>, SLOT(quit()));
<a name="l00166"></a>00166         connect(<a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#03f22fbfb4e131463c67bcd71bf6c8ab">actionEintrag_Editieren</a>,SIGNAL(activated()),<span class="keyword">this</span>, SLOT(<a class="code" href="class_b_e_o___timing.html#c854db88175caa8572dd15831b4bfb18" title="Aufrufen des TableEdit-Dialogs mit den richtigen Parametern.">Table_Edit</a>()));
<a name="l00167"></a>00167         connect(<a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#9b18475876f8bdefc32029c20f03d2dc">actionNeues_Rennen_erfassen</a>,SIGNAL(activated()),<span class="keyword">this</span>,SLOT(<a class="code" href="class_b_e_o___timing.html#6836bffd46ffdbf81149f4e245435731" title="Aufrufen des NeuesRennen-Dialogs.">NeuesRennen</a>()));
<a name="l00168"></a>00168         connect(<a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#d8c3dfc7a32aaca85ec882f6095e769a">actionExportieren_als_CSV</a>,SIGNAL(activated()),<span class="keyword">this</span>,SLOT(<a class="code" href="class_b_e_o___timing.html#c04ab99954514a018e78de4b0224cdb5" title="Exportieren der Rangliste im CSV-Format.">exportToCsv</a>()));
<a name="l00169"></a>00169         connect(<a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#a1d2e32aefdb7aa24d0403f01d58a715">actionPasswort_ndern</a>,SIGNAL(activated()),<span class="keyword">this</span>,SLOT(<a class="code" href="class_b_e_o___timing.html#b705f7916ae9647060ea70c1e8fb60d8" title="Passwort ändern Dialog öffnen.">changePwd</a>()));
<a name="l00170"></a>00170         connect(<a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#687853281c5ba234eab8737392a620a0">actionNeuer_Benutzer_erstellen_3</a>,SIGNAL(activated()),<span class="keyword">this</span>,SLOT(<a class="code" href="class_b_e_o___timing.html#1ae33dd83b22ab12aed7c68028ad363a" title="Neuer Benutzer - Dialog öffnen.">neuerUser</a>()));
<a name="l00171"></a>00171         connect(<a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#39d8c06d28695c5372839d9b8017f153">actionKonfiguration_erstellen</a>,SIGNAL(activated()),<span class="keyword">this</span>,SLOT(<a class="code" href="class_b_e_o___timing.html#c8299f8565050c6390965b2a1df80ab0" title="Konfiguration erstellen - Dialog öffnen.">buildConfiguration</a>()));
<a name="l00172"></a>00172         connect(<a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#19d90e63709c1a938c5fef1a889775ac">actionLog_Datei_auslesen</a>,SIGNAL(activated()),<span class="keyword">this</span>,SLOT(<a class="code" href="class_b_e_o___timing.html#0e2af5a5752098ca296327f4f41bf2c6" title="Log-Datei Lesen - Dialog öffnen.">readLogFile</a>()));
<a name="l00173"></a>00173         connect(<a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#94c7159e426b9ebbafe93728014bd305">actionBenutzerrechte_ndern</a>,SIGNAL(activated()),<span class="keyword">this</span>,SLOT(<a class="code" href="class_b_e_o___timing.html#92ea80de324e788dbc928e655b70e631" title="Benutzerreche anpassen - Dialog öffnen.">rechteAnpassen</a>()));
<a name="l00174"></a>00174         connect(<a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#d8ad45cd3a3828ddcec7600e63e8d845">actionAbout_Qt</a>,SIGNAL(triggered()),qApp, SLOT(aboutQt()));
<a name="l00175"></a>00175         connect(<a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#6729c44a373294e3a925a7e2410db678">actionAbout</a>,SIGNAL(triggered()),<span class="keyword">this</span>, SLOT(<a class="code" href="class_b_e_o___timing.html#2f021b28df0eb948aa69146ab5631c02" title="About - Dialog der Managementsoftware anzeigen.">about</a>()));
<a name="l00176"></a>00176         connect(<a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#d5ff0108e29b7b18abdcd64e61b6828a">actionRFID_Leser</a>,SIGNAL(toggled(<span class="keywordtype">bool</span>)),<span class="keyword">this</span>, SLOT(<a class="code" href="class_b_e_o___timing.html#d303ff34c6d33593cb57e1fc1881d991" title="Verbindung zum RFID-Leser herstellen bzw. trennen.">rfidConnection</a>(<span class="keywordtype">bool</span>)));
<a name="l00177"></a>00177         connect(<a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#f79465573d96a63961f3c088b29b3084">actionRFID_Leser_verbinden</a>,SIGNAL(activated()),<span class="keyword">this</span>, SLOT(<a class="code" href="class_b_e_o___timing.html#6d5901b04efdce11f441205714385160" title="Verbinden des RFID-Lesers.">CR500_verbinden</a>()));
<a name="l00178"></a>00178         connect(<a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#d4f5ee280c8e806064dc61da9aeb8a07">actionDatenbank</a>,SIGNAL(toggled(<span class="keywordtype">bool</span>)),<span class="keyword">this</span>, SLOT(<a class="code" href="class_b_e_o___timing.html#42c6266466562efb8e012cc0389767b7" title="Verbindung zur Datenbank herstellen bzw. trennen (experimentell, nur Superadmin)...">mysqlConnection</a>(<span class="keywordtype">bool</span>)));
<a name="l00179"></a>00179         connect(<a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#6eea06afd3edb89e9f795eeb0200179a">actionAktualisieren</a>,SIGNAL(activated()),<span class="keyword">this</span>,SLOT(<a class="code" href="class_b_e_o___timing.html#454b16d1cfe5763b0812114e82108e55" title="Füllt die Baumansicht mit Ihalt, entsprechend der Benutzerrechte.">Tree_Build</a>()));
<a name="l00180"></a>00180         connect(<a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#9dfca8038e5806d6a7bb1f004fe3c96f">actionVerwaiste_Eintr_ge_entfernen</a>,SIGNAL(activated()),<span class="keyword">this</span>,SLOT(<a class="code" href="class_b_e_o___timing.html#0736e099c5aa29e7169d74b5cd7da2d7" title="Datenbank bereinigen. Alle &amp;quot;(Noch nicht ausgewertet)&amp;quot;-Einträge entfernen...">purge</a>()));
<a name="l00181"></a>00181         connect(<a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#50b0c772b8508d73aa04cc938b6dd80e">actionDatenbank_optimieren</a>,SIGNAL(activated()),<span class="keyword">this</span>,SLOT(<a class="code" href="class_b_e_o___timing.html#85d0de732b79a53566feb1eb636c2886" title="Optimieren der Tabellen in der Datenbank.">optimieren</a>()));
<a name="l00182"></a>00182 }
<a name="l00183"></a>00183 
<a name="l00187"></a><a class="code" href="class_b_e_o___timing.html#cd12cfc862cb158f92a7500f836783c7">00187</a> <span class="keywordtype">void</span> <a class="code" href="class_b_e_o___timing.html#cd12cfc862cb158f92a7500f836783c7" title="Setzt die Benutzerrechte für die verschiedenen Aktionen.">BEO_Timing::setUserRights</a>(){
<a name="l00188"></a>00188         <span class="comment">// Benutzerrechte für Actions einstellen</span>
<a name="l00189"></a>00189         
<a name="l00190"></a>00190         <span class="keywordflow">if</span>(<a class="code" href="class_b_e_o___timing.html#36f4e79080543317d02636f93b667c27">user</a>-&gt;<a class="code" href="class_user.html#f6482cc57caa04a2c718fb059b2c1336" title="Gibt den Usertype zurück.">getUsertype</a>()==<a class="code" href="class_b_e_o___timing.html#36f4e79080543317d02636f93b667c27">user</a>-&gt;<a class="code" href="class_user.html#6f9db9ebdd86f9c93deff41f7b9193f11bc1a99427bacb8101d7b99796ce2148">superadministrator</a>){
<a name="l00191"></a>00191                 <span class="comment">// keine Einschränkungen</span>
<a name="l00192"></a>00192                 
<a name="l00193"></a>00193                 <span class="comment">// Zusätzliche Rechte</span>
<a name="l00194"></a>00194                 <a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#d4f5ee280c8e806064dc61da9aeb8a07">actionDatenbank</a>-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00195"></a>00195         }
<a name="l00196"></a>00196         <span class="keywordflow">if</span>(<a class="code" href="class_b_e_o___timing.html#36f4e79080543317d02636f93b667c27">user</a>-&gt;<a class="code" href="class_user.html#f6482cc57caa04a2c718fb059b2c1336" title="Gibt den Usertype zurück.">getUsertype</a>()==<a class="code" href="class_b_e_o___timing.html#36f4e79080543317d02636f93b667c27">user</a>-&gt;<a class="code" href="class_user.html#6f9db9ebdd86f9c93deff41f7b9193f155b52804af3433a9d28257d0a0a54eb3">administrator</a>){
<a name="l00197"></a>00197                 <span class="comment">// keine Einschränkungen</span>
<a name="l00198"></a>00198         }
<a name="l00199"></a>00199         <span class="keywordflow">if</span>(<a class="code" href="class_b_e_o___timing.html#36f4e79080543317d02636f93b667c27">user</a>-&gt;<a class="code" href="class_user.html#f6482cc57caa04a2c718fb059b2c1336" title="Gibt den Usertype zurück.">getUsertype</a>()==<a class="code" href="class_b_e_o___timing.html#36f4e79080543317d02636f93b667c27">user</a>-&gt;<a class="code" href="class_user.html#6f9db9ebdd86f9c93deff41f7b9193f11813ae9ec397f1858dda882399516656">manager</a> || <a class="code" href="class_b_e_o___timing.html#36f4e79080543317d02636f93b667c27">user</a>-&gt;<a class="code" href="class_user.html#f6482cc57caa04a2c718fb059b2c1336" title="Gibt den Usertype zurück.">getUsertype</a>()==<a class="code" href="class_b_e_o___timing.html#36f4e79080543317d02636f93b667c27">user</a>-&gt;<a class="code" href="class_user.html#6f9db9ebdd86f9c93deff41f7b9193f1d7f13ff6c9b4738cc12563330ef164e9">user</a>){
<a name="l00200"></a>00200                 <a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#39d8c06d28695c5372839d9b8017f153">actionKonfiguration_erstellen</a>-&gt;setDisabled(<span class="keyword">true</span>);
<a name="l00201"></a>00201                 <a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#9b18475876f8bdefc32029c20f03d2dc">actionNeues_Rennen_erfassen</a>-&gt;setDisabled(<span class="keyword">true</span>);
<a name="l00202"></a>00202                 <a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#94c7159e426b9ebbafe93728014bd305">actionBenutzerrechte_ndern</a>-&gt;setDisabled(<span class="keyword">true</span>);
<a name="l00203"></a>00203         }
<a name="l00204"></a>00204         <span class="keywordflow">if</span>(<a class="code" href="class_b_e_o___timing.html#36f4e79080543317d02636f93b667c27">user</a>-&gt;<a class="code" href="class_user.html#f6482cc57caa04a2c718fb059b2c1336" title="Gibt den Usertype zurück.">getUsertype</a>()==<a class="code" href="class_b_e_o___timing.html#36f4e79080543317d02636f93b667c27">user</a>-&gt;<a class="code" href="class_user.html#6f9db9ebdd86f9c93deff41f7b9193f1d7f13ff6c9b4738cc12563330ef164e9">user</a>){
<a name="l00205"></a>00205                 <span class="comment">// User --&gt; keine Möglichkeiten zur Veränderung der Datenbank nur schauen!</span>
<a name="l00206"></a>00206                 <a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#687853281c5ba234eab8737392a620a0">actionNeuer_Benutzer_erstellen_3</a>-&gt;setDisabled(<span class="keyword">true</span>);
<a name="l00207"></a>00207                 <a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#50b0c772b8508d73aa04cc938b6dd80e">actionDatenbank_optimieren</a>-&gt;setDisabled(<span class="keyword">true</span>);
<a name="l00208"></a>00208                 <a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#03f22fbfb4e131463c67bcd71bf6c8ab">actionEintrag_Editieren</a>-&gt;setDisabled(<span class="keyword">true</span>);
<a name="l00209"></a>00209                 <a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#19d90e63709c1a938c5fef1a889775ac">actionLog_Datei_auslesen</a>-&gt;setDisabled(<span class="keyword">true</span>);
<a name="l00210"></a>00210                 <a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#9dfca8038e5806d6a7bb1f004fe3c96f">actionVerwaiste_Eintr_ge_entfernen</a>-&gt;setDisabled(<span class="keyword">true</span>);
<a name="l00211"></a>00211                 <a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#d5ff0108e29b7b18abdcd64e61b6828a">actionRFID_Leser</a>-&gt;setDisabled(<span class="keyword">true</span>);
<a name="l00212"></a>00212                 <a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#f79465573d96a63961f3c088b29b3084">actionRFID_Leser_verbinden</a>-&gt;setDisabled(<span class="keyword">true</span>);
<a name="l00213"></a>00213         }
<a name="l00214"></a>00214 }
<a name="l00215"></a>00215 
<a name="l00219"></a><a class="code" href="class_b_e_o___timing.html#7f935167b5af6676da6cf85084118575">00219</a> <span class="keywordtype">void</span> <a class="code" href="class_b_e_o___timing.html#7f935167b5af6676da6cf85084118575" title="Erstellt die Symbolliste mit den ausgewählten Aktionen.">BEO_Timing::createToolbar</a>(){
<a name="l00220"></a>00220         <a class="code" href="class_b_e_o___timing.html#a12a334dd438e255a500dc7591e1f588">toolbar</a> = addToolBar(tr(<span class="stringliteral">"&amp;Symbolliste"</span>));
<a name="l00221"></a>00221         <a class="code" href="class_b_e_o___timing.html#a12a334dd438e255a500dc7591e1f588">toolbar</a>-&gt;addAction(<a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#9b18475876f8bdefc32029c20f03d2dc">actionNeues_Rennen_erfassen</a>);
<a name="l00222"></a>00222         <a class="code" href="class_b_e_o___timing.html#a12a334dd438e255a500dc7591e1f588">toolbar</a>-&gt;addAction(<a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#6eea06afd3edb89e9f795eeb0200179a">actionAktualisieren</a>);
<a name="l00223"></a>00223         <a class="code" href="class_b_e_o___timing.html#a12a334dd438e255a500dc7591e1f588">toolbar</a>-&gt;addAction(<a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#d8c3dfc7a32aaca85ec882f6095e769a">actionExportieren_als_CSV</a>);
<a name="l00224"></a>00224         <a class="code" href="class_b_e_o___timing.html#a12a334dd438e255a500dc7591e1f588">toolbar</a>-&gt;addAction(<a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#03f22fbfb4e131463c67bcd71bf6c8ab">actionEintrag_Editieren</a>);
<a name="l00225"></a>00225         <a class="code" href="class_b_e_o___timing.html#a12a334dd438e255a500dc7591e1f588">toolbar</a>-&gt;addAction(<a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#687853281c5ba234eab8737392a620a0">actionNeuer_Benutzer_erstellen_3</a>);
<a name="l00226"></a>00226         <a class="code" href="class_b_e_o___timing.html#a12a334dd438e255a500dc7591e1f588">toolbar</a>-&gt;addAction(<a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#d5ff0108e29b7b18abdcd64e61b6828a">actionRFID_Leser</a>);
<a name="l00227"></a>00227         <a class="code" href="class_b_e_o___timing.html#a12a334dd438e255a500dc7591e1f588">toolbar</a>-&gt;addAction(<a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#02af051353694da32aca2f3c4784b4f5">actionBeenden</a>);   
<a name="l00228"></a>00228 }
<a name="l00229"></a>00229 
<a name="l00233"></a><a class="code" href="class_b_e_o___timing.html#cd19a9b93fb9492e5ed537a8bc15af45">00233</a> <span class="keywordtype">void</span> <a class="code" href="class_b_e_o___timing.html#cd19a9b93fb9492e5ed537a8bc15af45" title="Bereitet die Baumansicht zur Darstellung vor.">BEO_Timing::Tree_Settings</a>(){
<a name="l00234"></a>00234         <a class="code" href="class_b_e_o___timing.html#2ec471682ac3f39eedd965fa2e94f3d7">raceTree</a> = <a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#ec5ef60597da04626e900f8ee0482d3b">RennenTreeWidget</a>;
<a name="l00235"></a>00235         <span class="comment">// 4 Spalten</span>
<a name="l00236"></a>00236         <a class="code" href="class_b_e_o___timing.html#2ec471682ac3f39eedd965fa2e94f3d7">raceTree</a>-&gt;setColumnCount(4);
<a name="l00237"></a>00237         <span class="comment">// Namen der Spalten definieren</span>
<a name="l00238"></a>00238         <a class="code" href="class_b_e_o___timing.html#2ec471682ac3f39eedd965fa2e94f3d7">raceTree</a>-&gt;setHeaderLabels(QStringList() &lt;&lt; tr(<span class="stringliteral">"Rennen"</span>) &lt;&lt; tr(<span class="stringliteral">"Startdatum"</span>)
<a name="l00239"></a>00239                         &lt;&lt; tr(<span class="stringliteral">"Enddatum"</span>) &lt;&lt; tr(<span class="stringliteral">"Streckennummer"</span>));
<a name="l00240"></a>00240         <span class="comment">// Spaltenbreite auf automatisch stellen</span>
<a name="l00241"></a>00241         <a class="code" href="class_b_e_o___timing.html#2ec471682ac3f39eedd965fa2e94f3d7">raceTree</a>-&gt;header()-&gt;setResizeMode(0, QHeaderView::ResizeToContents);
<a name="l00242"></a>00242         <a class="code" href="class_b_e_o___timing.html#2ec471682ac3f39eedd965fa2e94f3d7">raceTree</a>-&gt;header()-&gt;setResizeMode(1, QHeaderView::ResizeToContents);
<a name="l00243"></a>00243         <a class="code" href="class_b_e_o___timing.html#2ec471682ac3f39eedd965fa2e94f3d7">raceTree</a>-&gt;header()-&gt;setResizeMode(2, QHeaderView::ResizeToContents);
<a name="l00244"></a>00244         <a class="code" href="class_b_e_o___timing.html#2ec471682ac3f39eedd965fa2e94f3d7">raceTree</a>-&gt;header()-&gt;setResizeMode(3, QHeaderView::ResizeToContents);
<a name="l00245"></a>00245         <span class="comment">// Signal "Auswahländerung" mit Slot "Baum geändedert" verbinden</span>
<a name="l00246"></a>00246         connect(<a class="code" href="class_b_e_o___timing.html#2ec471682ac3f39eedd965fa2e94f3d7">raceTree</a>,SIGNAL(itemSelectionChanged()),<span class="keyword">this</span>,SLOT(<a class="code" href="class_b_e_o___timing.html#e6ea4891e62ef27156bba2ddec60683a" title="Reagiert auf eine Änderung der Auswahl im Baum.">Tree_Changed</a>()));
<a name="l00247"></a>00247 }
<a name="l00248"></a>00248 
<a name="l00252"></a><a class="code" href="class_b_e_o___timing.html#454b16d1cfe5763b0812114e82108e55">00252</a> <span class="keywordtype">void</span> <a class="code" href="class_b_e_o___timing.html#454b16d1cfe5763b0812114e82108e55" title="Füllt die Baumansicht mit Ihalt, entsprechend der Benutzerrechte.">BEO_Timing::Tree_Build</a>(){
<a name="l00253"></a>00253         <a class="code" href="class_b_e_o___timing.html#2ec471682ac3f39eedd965fa2e94f3d7">raceTree</a> = <a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#ec5ef60597da04626e900f8ee0482d3b">RennenTreeWidget</a>;
<a name="l00254"></a>00254         <span class="comment">// Baum leeren</span>
<a name="l00255"></a>00255         <a class="code" href="class_b_e_o___timing.html#2ec471682ac3f39eedd965fa2e94f3d7">raceTree</a>-&gt;clear();
<a name="l00256"></a>00256         <span class="comment">// Erstes Jahr mit einem Rennen finden.</span>
<a name="l00257"></a>00257         QString sql = <span class="stringliteral">"SELECT min(Jahr) FROM strecken"</span>;
<a name="l00258"></a>00258         QSqlQuery query(sql);
<a name="l00259"></a>00259         query.exec();
<a name="l00260"></a>00260         query.next();
<a name="l00261"></a>00261         <span class="keywordtype">int</span> min_jahr = query.value(0).toInt();
<a name="l00262"></a>00262         <span class="comment">// Letztes Jahr mit einem Rennen finden</span>
<a name="l00263"></a>00263         sql = <span class="stringliteral">"SELECT max(Jahr) FROM strecken"</span>;
<a name="l00264"></a>00264         query.prepare(sql);
<a name="l00265"></a>00265         query.exec();
<a name="l00266"></a>00266         query.next();
<a name="l00267"></a>00267         <span class="keywordtype">int</span> max_jahr = query.value(0).toInt();
<a name="l00268"></a>00268         <span class="comment">// Informationen aus dem gewählten Bereich abfragen und eintragen</span>
<a name="l00269"></a>00269         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> jahr=min_jahr; jahr&lt;=max_jahr; ++jahr){
<a name="l00270"></a>00270                 <span class="comment">// Daten für 1 Jahr lesen (anzahl)</span>
<a name="l00271"></a>00271                 query.exec(<span class="stringliteral">"SELECT count(StreckenKey) FROM strecken WHERE Jahr='"</span> + QString::number(jahr) + <span class="stringliteral">"'"</span>);
<a name="l00272"></a>00272                 query.next();
<a name="l00273"></a>00273                 <span class="comment">// nächtes Jahr, falls keine Einträge</span>
<a name="l00274"></a>00274                 <span class="keywordflow">if</span>(query.value(0).toBool()){
<a name="l00275"></a>00275                         QTreeWidgetItem *root;
<a name="l00276"></a>00276                         root= <span class="keyword">new</span> QTreeWidgetItem(<a class="code" href="class_b_e_o___timing.html#2ec471682ac3f39eedd965fa2e94f3d7">raceTree</a>-&gt;invisibleRootItem());
<a name="l00277"></a>00277                         root-&gt;setText(0, QString::number(jahr));
<a name="l00278"></a>00278                         QTreeWidgetItem *item;
<a name="l00279"></a>00279                         <span class="comment">// Informationen für ein ganzes Jahr abrufen</span>
<a name="l00280"></a>00280                         sql = <span class="stringliteral">"SELECT StreckenKey, Streckenname, Startdatum, Enddatum, Jahr, StreckentypKey "</span>
<a name="l00281"></a>00281                                         <span class="stringliteral">"FROM strecken "</span>
<a name="l00282"></a>00282                                         <span class="stringliteral">"WHERE Jahr='"</span> + QString::number(jahr) + <span class="stringliteral">"'"</span>;
<a name="l00283"></a>00283                         qDebug() &lt;&lt; sql;
<a name="l00284"></a>00284                         query.prepare(sql);
<a name="l00285"></a>00285                         query.exec();
<a name="l00286"></a>00286                         <span class="keywordflow">if</span>(query.isActive()){
<a name="l00287"></a>00287                                 <span class="keywordtype">int</span> count = 0;
<a name="l00288"></a>00288                                 <span class="keywordflow">while</span>(query.next() &amp;&amp; <a class="code" href="class_b_e_o___timing.html#36f4e79080543317d02636f93b667c27">user</a>-&gt;<a class="code" href="class_user.html#1aa3e9682d94bd9c6c8d6c1e2d90d02a" title="Prüfen, ob der Benutzer die Berechtigung für ein Rennen hat.">getRaceAuthority</a>(query.value(0).toInt())){
<a name="l00289"></a>00289                                         item = <span class="keyword">new</span> QTreeWidgetItem(root);
<a name="l00290"></a>00290                                         item-&gt;setText(0,query.value(1).toString() + <span class="stringliteral">" ("</span> + <a class="code" href="class_b_e_o___timing.html#4ca53b436da6fdf16737147cfaf69f87" title="Bestimmt die Anzahl Fahrzeiten für eine Strecke.">getTimeCount</a>(query.value(0).toInt()) + <span class="stringliteral">")"</span>);
<a name="l00291"></a>00291                                         item-&gt;setText(1,query.value(2).toDate().toString(<span class="stringliteral">"dd.MM.yyyy"</span>));
<a name="l00292"></a>00292                                         item-&gt;setText(2,query.value(3).toDate().toString(<span class="stringliteral">"dd.MM.yyyy"</span>));
<a name="l00293"></a>00293                                         item-&gt;setText(3,QString::number(query.value(0).toInt()));
<a name="l00294"></a>00294                                         <span class="comment">// Richtiges Symbol wählen</span>
<a name="l00295"></a>00295                                         QIcon icon;
<a name="l00296"></a>00296                                         <span class="keywordflow">switch</span>(query.value(5).toInt()){
<a name="l00297"></a>00297                                                 <span class="keywordflow">case</span> <a class="code" href="class_b_e_o___timing.html#83717794a488147bbcea59aceb9bd0c6612dddb59489702baa260ec5a8d465d0">Rennvelo</a>: icon.addFile(<span class="stringliteral">":/images/rennrad.png"</span>); <span class="keywordflow">break</span>;
<a name="l00298"></a>00298                                                 <span class="keywordflow">case</span> <a class="code" href="class_b_e_o___timing.html#83717794a488147bbcea59aceb9bd0c6013652036599c88cc6d898b0b747a489">Mountainbike</a>: icon.addFile(<span class="stringliteral">":/images/bike.png"</span>); <span class="keywordflow">break</span>;
<a name="l00299"></a>00299                                                 <span class="keywordflow">case</span> <a class="code" href="class_b_e_o___timing.html#83717794a488147bbcea59aceb9bd0c62594018512b9d035dea2d72721d50744">Laufen</a>: icon.addFile(<span class="stringliteral">":/images/plauf.png"</span>); <span class="keywordflow">break</span>;
<a name="l00300"></a>00300                                                 <span class="keywordflow">case</span> <a class="code" href="class_b_e_o___timing.html#83717794a488147bbcea59aceb9bd0c6b7cfbcb7a8fa64617133990c5c482f3a">Walking</a>: icon.addFile(<span class="stringliteral">":/images/walking.png"</span>); <span class="keywordflow">break</span>;
<a name="l00301"></a>00301                                                 <span class="keywordflow">case</span> <a class="code" href="class_b_e_o___timing.html#83717794a488147bbcea59aceb9bd0c64da7c10b2bbac1b2b31d96560b844e7b">Langlauf</a>: icon.addFile(<span class="stringliteral">":/images/langlauf.png"</span>); <span class="keywordflow">break</span>;
<a name="l00302"></a>00302                                                 <span class="keywordflow">case</span> <a class="code" href="class_b_e_o___timing.html#83717794a488147bbcea59aceb9bd0c6db090685ad135c3b151134f9db436620">Inline</a>: icon.addFile(<span class="stringliteral">":/images/inline.png"</span>); <span class="keywordflow">break</span>;
<a name="l00303"></a>00303                                                 <span class="keywordflow">default</span>: icon.addFile(<span class="stringliteral">":/images/unbekannt.png"</span>); <span class="keywordflow">break</span>;
<a name="l00304"></a>00304                                         }
<a name="l00305"></a>00305                                         item-&gt;setIcon(0,icon);
<a name="l00306"></a>00306                                         <a class="code" href="class_b_e_o___timing.html#2ec471682ac3f39eedd965fa2e94f3d7">raceTree</a>-&gt;setCurrentItem(item);
<a name="l00307"></a>00307                                         count ++;
<a name="l00308"></a>00308                                 }
<a name="l00309"></a>00309                                 <span class="keywordflow">if</span>(count == 0)
<a name="l00310"></a>00310                                         root-&gt;setHidden(<span class="keyword">true</span>);
<a name="l00311"></a>00311                         }
<a name="l00312"></a>00312                 }
<a name="l00313"></a>00313         }
<a name="l00314"></a>00314         <span class="comment">// Alles Expandieren</span>
<a name="l00315"></a>00315         <a class="code" href="class_b_e_o___timing.html#2ec471682ac3f39eedd965fa2e94f3d7">raceTree</a>-&gt;expandAll();
<a name="l00316"></a>00316 }
<a name="l00317"></a>00317 
<a name="l00321"></a><a class="code" href="class_b_e_o___timing.html#e6ea4891e62ef27156bba2ddec60683a">00321</a> <span class="keywordtype">void</span> <a class="code" href="class_b_e_o___timing.html#e6ea4891e62ef27156bba2ddec60683a" title="Reagiert auf eine Änderung der Auswahl im Baum.">BEO_Timing::Tree_Changed</a>(){
<a name="l00322"></a>00322         <span class="comment">// Bestimmt die neue Position im Baum und ruft die Funktion Read_Race,</span>
<a name="l00323"></a>00323         <span class="comment">// um die Rangliste zu erstellen.</span>
<a name="l00324"></a>00324         <a class="code" href="class_b_e_o___timing.html#b54fe6db69d9304c6c27bf3b4c253196" title="Stellt die Rangliste dar.">Read_Race</a>(<a class="code" href="class_b_e_o___timing.html#2ec471682ac3f39eedd965fa2e94f3d7">raceTree</a>-&gt;currentItem()-&gt;text(3).toInt());
<a name="l00325"></a>00325         qDebug() &lt;&lt; <a class="code" href="class_b_e_o___timing.html#2ec471682ac3f39eedd965fa2e94f3d7">raceTree</a>-&gt;currentItem()-&gt;text(3);
<a name="l00326"></a>00326 }
<a name="l00327"></a>00327 
<a name="l00332"></a><a class="code" href="class_b_e_o___timing.html#4ca53b436da6fdf16737147cfaf69f87">00332</a> QString <a class="code" href="class_b_e_o___timing.html#4ca53b436da6fdf16737147cfaf69f87" title="Bestimmt die Anzahl Fahrzeiten für eine Strecke.">BEO_Timing::getTimeCount</a>(<span class="keywordtype">int</span> <a class="code" href="class_b_e_o___timing.html#d9ee9a58f0522671aebfe86b4987c738461715c513041d4a79d9ecf6fea24c66">StreckenKey</a>){
<a name="l00333"></a>00333         QSqlQuery query(<span class="stringliteral">"SELECT count(TimeKey) FROM zeiten WHERE StreckenKey='"</span>
<a name="l00334"></a>00334                         + QString::number(StreckenKey) + <span class="stringliteral">"'"</span>);
<a name="l00335"></a>00335         query.exec();
<a name="l00336"></a>00336         query.next();
<a name="l00337"></a>00337         <span class="keywordflow">return</span> (query.value(0).toString());
<a name="l00338"></a>00338 }
<a name="l00339"></a>00339 
<a name="l00344"></a><a class="code" href="class_b_e_o___timing.html#b54fe6db69d9304c6c27bf3b4c253196">00344</a> <span class="keywordtype">void</span> <a class="code" href="class_b_e_o___timing.html#b54fe6db69d9304c6c27bf3b4c253196" title="Stellt die Rangliste dar.">BEO_Timing::Read_Race</a>(<span class="keywordtype">int</span> StreckenNummer){
<a name="l00345"></a>00345         <a class="code" href="class_b_e_o___timing.html#48b9d6ca16febbddf487260d130925b1">view</a> = <a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#276d00234a42b378490de034b6b49279">RanglistenTableView</a>;
<a name="l00346"></a>00346         <span class="comment">// Falls keine StreckenNummer definiert wurde, wird die aktuell gewählte dargestellt</span>
<a name="l00347"></a>00347         <span class="keywordflow">if</span>(StreckenNummer == 0){
<a name="l00348"></a>00348                 StreckenNummer=<a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#ec5ef60597da04626e900f8ee0482d3b">RennenTreeWidget</a>-&gt;currentItem()-&gt;data(3,Qt::DisplayRole).toInt();
<a name="l00349"></a>00349         }
<a name="l00350"></a>00350         <span class="comment">// Modell für die Daten bezogen auf die Tabelle</span>
<a name="l00351"></a>00351         QStandardItemModel* <a class="code" href="_master_r_d_8h.html#234be45c406c2d8d2489673913eecfd4">model</a> = <span class="keyword">new</span> QStandardItemModel(<a class="code" href="class_b_e_o___timing.html#48b9d6ca16febbddf487260d130925b1">view</a>);
<a name="l00352"></a>00352         <span class="comment">// 20 Spalten mit Namen versehen</span>
<a name="l00353"></a>00353         model-&gt;insertColumns(0,20);
<a name="l00354"></a>00354         model-&gt;setHeaderData(<a class="code" href="class_b_e_o___timing.html#d9ee9a58f0522671aebfe86b4987c738808daf1f793b19f21881f2378c17188e">Name</a>, Qt::Horizontal, tr(<span class="stringliteral">"Name"</span>));
<a name="l00355"></a>00355         model-&gt;setHeaderData(<a class="code" href="class_b_e_o___timing.html#d9ee9a58f0522671aebfe86b4987c7388ae8e43cc5ad0b6ad4fcfc160e78209e">Vorname</a>, Qt::Horizontal, tr(<span class="stringliteral">"Vorname"</span>));
<a name="l00356"></a>00356         model-&gt;setHeaderData(<a class="code" href="class_b_e_o___timing.html#d9ee9a58f0522671aebfe86b4987c738ba90e2c7f4fe3eb4c15d4e9a4d5dcdfa">Adresse</a>, Qt::Horizontal, tr(<span class="stringliteral">"Adresse"</span>));
<a name="l00357"></a>00357         model-&gt;setHeaderData(<a class="code" href="class_b_e_o___timing.html#d9ee9a58f0522671aebfe86b4987c7383519de2261dc99147e20f93cbed77333">PLZ</a>, Qt::Horizontal, tr(<span class="stringliteral">"PLZ"</span>));
<a name="l00358"></a>00358         model-&gt;setHeaderData(<a class="code" href="class_b_e_o___timing.html#d9ee9a58f0522671aebfe86b4987c738af409b3aec51720698d932d7ff0e5056">Ort</a>, Qt::Horizontal, tr(<span class="stringliteral">"Ort"</span>));
<a name="l00359"></a>00359         model-&gt;setHeaderData(<a class="code" href="class_b_e_o___timing.html#d9ee9a58f0522671aebfe86b4987c7380d2bf52d229a3ca79e7d2564487b1dcd">Nationalitaet</a>, Qt::Horizontal, tr(<span class="stringliteral">"Nationalität"</span>));
<a name="l00360"></a>00360         model-&gt;setHeaderData(<a class="code" href="class_b_e_o___timing.html#d9ee9a58f0522671aebfe86b4987c73874acee0490dd3156d8da39a5bb7c80f5">Jahrgang</a>, Qt::Horizontal, tr(<span class="stringliteral">"Jahrgang"</span>));
<a name="l00361"></a>00361         model-&gt;setHeaderData(<a class="code" href="class_b_e_o___timing.html#d9ee9a58f0522671aebfe86b4987c73877e33a9512a1e78621d2cb6e97b93a1f">Geschlecht</a>, Qt::Horizontal, tr(<span class="stringliteral">"Geschlecht"</span>));
<a name="l00362"></a>00362         model-&gt;setHeaderData(<a class="code" href="class_b_e_o___timing.html#d9ee9a58f0522671aebfe86b4987c738496b99d0f720dfcd278723b4515d1d31">Email</a>, Qt::Horizontal, tr(<span class="stringliteral">"Email"</span>));
<a name="l00363"></a>00363         model-&gt;setHeaderData(<a class="code" href="class_b_e_o___timing.html#d9ee9a58f0522671aebfe86b4987c738743223bd27bbd8bbc3edf0744b79c195">Telefon</a>, Qt::Horizontal, tr(<span class="stringliteral">"Telefon"</span>));
<a name="l00364"></a>00364         model-&gt;setHeaderData(<a class="code" href="class_b_e_o___timing.html#d9ee9a58f0522671aebfe86b4987c738d327629bc2f966890b341590f242a38c">Mobile</a>, Qt::Horizontal, tr(<span class="stringliteral">"Mobile"</span>));
<a name="l00365"></a>00365         model-&gt;setHeaderData(<a class="code" href="class_b_e_o___timing.html#d9ee9a58f0522671aebfe86b4987c738fc827ac2c81d4ecacf7c548aeb04862d">Team_Club</a>, Qt::Horizontal, tr(<span class="stringliteral">"Team / Club"</span>));
<a name="l00366"></a>00366         model-&gt;setHeaderData(<a class="code" href="class_b_e_o___timing.html#d9ee9a58f0522671aebfe86b4987c7384c3237e0985523dc550990299a015121">Kategorie</a>, Qt::Horizontal, tr(<span class="stringliteral">"Kategorie"</span>));
<a name="l00367"></a>00367         model-&gt;setHeaderData(<a class="code" href="class_b_e_o___timing.html#d9ee9a58f0522671aebfe86b4987c738fddfb13341f6add1048f497cc312feb2">Fahrzeit</a>, Qt::Horizontal, tr(<span class="stringliteral">"Fahrzeit"</span>));
<a name="l00368"></a>00368         model-&gt;setHeaderData(<a class="code" href="class_b_e_o___timing.html#d9ee9a58f0522671aebfe86b4987c7387b1fdabc8963eb07a28fbfe34b74510b">Rueckstand</a>, Qt::Horizontal, tr(<span class="stringliteral">"Rückstand"</span>));
<a name="l00369"></a>00369         model-&gt;setHeaderData(<a class="code" href="class_b_e_o___timing.html#d9ee9a58f0522671aebfe86b4987c738b37056e809f1ac729fb04016b00c9d4e">RFID_SNR</a>, Qt::Horizontal, tr(<span class="stringliteral">"RFID-Snr"</span>));
<a name="l00370"></a>00370         model-&gt;setHeaderData(<a class="code" href="class_b_e_o___timing.html#d9ee9a58f0522671aebfe86b4987c738461715c513041d4a79d9ecf6fea24c66">StreckenKey</a>, Qt::Horizontal, tr(<span class="stringliteral">"Strecken-Nr"</span>));
<a name="l00371"></a>00371         model-&gt;setHeaderData(<a class="code" href="class_b_e_o___timing.html#d9ee9a58f0522671aebfe86b4987c7386b9d2c06f139583bd0d3e762d44d3e38">TimeID</a>, Qt::Horizontal, tr(<span class="stringliteral">"TimeID"</span>));
<a name="l00372"></a>00372         model-&gt;setHeaderData(<a class="code" href="class_b_e_o___timing.html#d9ee9a58f0522671aebfe86b4987c7386d9a3c79ea6149bad6aa9565c35c05c9">TimeKey</a>, Qt::Horizontal, tr(<span class="stringliteral">"TimeKey"</span>));
<a name="l00373"></a>00373         model-&gt;setHeaderData(<a class="code" href="class_b_e_o___timing.html#d9ee9a58f0522671aebfe86b4987c73813314225bf181333cf505eb2337aaf97">TeilnehmerKey</a>, Qt::Horizontal, tr(<span class="stringliteral">"TeilnehmerKey"</span>));
<a name="l00374"></a>00374         <span class="comment">// Model mit der Tabelle verbinden</span>
<a name="l00375"></a>00375         <a class="code" href="class_b_e_o___timing.html#48b9d6ca16febbddf487260d130925b1">view</a>-&gt;setModel(model); <span class="comment">// Modell der Tabelle zuweisen</span>
<a name="l00376"></a>00376         <span class="comment">// Auswahlmöglichkeiten einschränken</span>
<a name="l00377"></a>00377         <a class="code" href="class_b_e_o___timing.html#48b9d6ca16febbddf487260d130925b1">view</a>-&gt;setSelectionMode(QAbstractItemView::SingleSelection);
<a name="l00378"></a>00378         <a class="code" href="class_b_e_o___timing.html#48b9d6ca16febbddf487260d130925b1">view</a>-&gt;setSelectionBehavior(QAbstractItemView::SelectRows);
<a name="l00379"></a>00379         <span class="comment">// Spaltenbreite auf automatisch</span>
<a name="l00380"></a>00380         <a class="code" href="class_b_e_o___timing.html#48b9d6ca16febbddf487260d130925b1">view</a>-&gt;resizeColumnsToContents();
<a name="l00381"></a>00381         <span class="comment">// Editiermöglichkeiten einschränken (keine)</span>
<a name="l00382"></a>00382         <a class="code" href="class_b_e_o___timing.html#48b9d6ca16febbddf487260d130925b1">view</a>-&gt;setEditTriggers(QAbstractItemView::NoEditTriggers);
<a name="l00383"></a>00383         QHeaderView * header = <a class="code" href="class_b_e_o___timing.html#48b9d6ca16febbddf487260d130925b1">view</a>-&gt;horizontalHeader();
<a name="l00384"></a>00384         header-&gt;setStretchLastSection(<span class="keyword">true</span>);
<a name="l00385"></a>00385         <span class="comment">// SQL-Statement für die Rangliste</span>
<a name="l00386"></a>00386         QString sql = <span class="stringliteral">"SELECT teilnehmer.name, teilnehmer.vorname, teilnehmer.adresse, "</span>
<a name="l00387"></a>00387                         <span class="stringliteral">"teilnehmer.PLZ, teilnehmer.ort, teilnehmer.nationalitaet, "</span> 
<a name="l00388"></a>00388                         <span class="stringliteral">"teilnehmer.jahrgang, teilnehmer.geschlecht, teilnehmer.email, teilnehmer.telefon, "</span>
<a name="l00389"></a>00389                         <span class="stringliteral">"teilnehmer.mobile, teilnehmer.club, zeiten.kategorie, min(zeiten.fahrzeit) AS fahrzeit, "</span>
<a name="l00390"></a>00390                         <span class="stringliteral">"TIMEDIFF(min(zeiten.fahrzeit),(SELECT min(zeiten.fahrzeit) FROM zeiten WHERE Streckenkey = "</span>
<a name="l00391"></a>00391                         + QString::number(StreckenNummer) + <span class="stringliteral">")) AS rueckstand, "</span>
<a name="l00392"></a>00392                         <span class="stringliteral">"teilnehmer.SNR_RFID, zeiten.StreckenKey, zeiten.TimeID, zeiten.TimeKey, zeiten.TeilnehmerKey "</span> 
<a name="l00393"></a>00393                         <span class="stringliteral">"FROM strecken, zeiten , teilnehmer "</span> 
<a name="l00394"></a>00394                         <span class="stringliteral">"WHERE zeiten.StreckenKey = strecken.StreckenKey "</span> 
<a name="l00395"></a>00395                         <span class="stringliteral">"AND zeiten.TeilnehmerKey = teilnehmer.TeilnehmerKey "</span> 
<a name="l00396"></a>00396                         <span class="stringliteral">"AND strecken.StreckenKey = "</span> + QString::number(StreckenNummer) + <span class="stringliteral">" "</span>
<a name="l00397"></a>00397                         <span class="stringliteral">"GROUP BY teilnehmer.TeilnehmerKey "</span>
<a name="l00398"></a>00398                         <span class="stringliteral">"ORDER BY min(zeiten.fahrzeit)"</span>;
<a name="l00399"></a>00399         qDebug() &lt;&lt; sql;
<a name="l00400"></a>00400         QSqlQuery query(sql);
<a name="l00401"></a>00401         <span class="keywordflow">if</span>(query.isActive()){
<a name="l00402"></a>00402                 query.exec();
<a name="l00403"></a>00403                 qDebug() &lt;&lt; model-&gt;insertRows(0,query.numRowsAffected());
<a name="l00404"></a>00404                 qDebug() &lt;&lt; <span class="stringliteral">"Rec.count(): "</span> &lt;&lt; query.numRowsAffected() &lt;&lt; <span class="stringliteral">" -&gt; "</span> &lt;&lt; model-&gt;rowCount();
<a name="l00405"></a>00405                 <span class="comment">// Einfügen der gelesenen Daten in das Modell</span>
<a name="l00406"></a>00406                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt; query.numRowsAffected(); ++j){
<a name="l00407"></a>00407                         query.next();
<a name="l00408"></a>00408                         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;20;++i){
<a name="l00409"></a>00409                            model-&gt;setData(model-&gt;index(j,i),query.value(i));
<a name="l00410"></a>00410                            qDebug() &lt;&lt; query.value(i).toString();
<a name="l00411"></a>00411                         }
<a name="l00412"></a>00412                 }
<a name="l00413"></a>00413         }
<a name="l00414"></a>00414         qDebug() &lt;&lt; query.lastError();
<a name="l00415"></a>00415         <a class="code" href="class_b_e_o___timing.html#48b9d6ca16febbddf487260d130925b1">view</a>-&gt;resizeColumnsToContents();
<a name="l00416"></a>00416         <span class="comment">//connect(view,SIGNAL(doubleClicked()),this,SLOT(Table_Edit()));</span>
<a name="l00417"></a>00417                 
<a name="l00418"></a>00418 }
<a name="l00419"></a>00419 
<a name="l00420"></a>00420 <span class="comment">// Extra instanzierung der statischen Variabeln</span>
<a name="l00421"></a>00421 QLabel* <a class="code" href="class_b_e_o___timing.html#c021ff5e0e3900e27fb3fece4c719238">BEO_Timing::connectionLabel</a>;
<a name="l00422"></a>00422 QLabel* <a class="code" href="class_b_e_o___timing.html#7f14795095b944fc64585ec6af1df23a">BEO_Timing::userLabel</a>;
<a name="l00423"></a>00423 QLabel* <a class="code" href="class_b_e_o___timing.html#4d07aaff9e9e351ae75ec2b607157419">BEO_Timing::messageLabel</a>;
<a name="l00424"></a>00424 
<a name="l00429"></a><a class="code" href="class_b_e_o___timing.html#8f8ee452bed83bd1eb01ba25f3074232">00429</a> <span class="keywordtype">void</span> <a class="code" href="class_b_e_o___timing.html#8f8ee452bed83bd1eb01ba25f3074232" title="Erstellt die Statusbar mit den drei Labeln.">BEO_Timing::createStatusBar</a>(){
<a name="l00430"></a>00430         <span class="comment">// Label für den Benutzernamen</span>
<a name="l00431"></a>00431         <a class="code" href="class_b_e_o___timing.html#7f14795095b944fc64585ec6af1df23a">userLabel</a> = <span class="keyword">new</span> QLabel(<span class="stringliteral">"Benutzer:      "</span>);
<a name="l00432"></a>00432         <a class="code" href="class_b_e_o___timing.html#7f14795095b944fc64585ec6af1df23a">userLabel</a>-&gt;setAlignment(Qt::AlignHCenter);
<a name="l00433"></a>00433         <a class="code" href="class_b_e_o___timing.html#7f14795095b944fc64585ec6af1df23a">userLabel</a>-&gt;setMinimumSize(<a class="code" href="class_b_e_o___timing.html#7f14795095b944fc64585ec6af1df23a">userLabel</a>-&gt;sizeHint());
<a name="l00434"></a>00434         <span class="comment">// Label für die Verbindungsanzeigen</span>
<a name="l00435"></a>00435         <a class="code" href="class_b_e_o___timing.html#c021ff5e0e3900e27fb3fece4c719238">connectionLabel</a> = <span class="keyword">new</span> QLabel(<span class="stringliteral">"RFID-Leser:      "</span>);
<a name="l00436"></a>00436         <a class="code" href="class_b_e_o___timing.html#c021ff5e0e3900e27fb3fece4c719238">connectionLabel</a>-&gt;setAlignment(Qt::AlignLeft);
<a name="l00437"></a>00437         <a class="code" href="class_b_e_o___timing.html#c021ff5e0e3900e27fb3fece4c719238">connectionLabel</a>-&gt;setMinimumSize(<a class="code" href="class_b_e_o___timing.html#c021ff5e0e3900e27fb3fece4c719238">connectionLabel</a>-&gt;sizeHint());
<a name="l00438"></a>00438         <span class="comment">// Label für diverse Informationen</span>
<a name="l00439"></a>00439         <a class="code" href="class_b_e_o___timing.html#4d07aaff9e9e351ae75ec2b607157419">messageLabel</a> = <span class="keyword">new</span> QLabel(<span class="stringliteral">"Letzte Meldung:                  "</span>);
<a name="l00440"></a>00440         <a class="code" href="class_b_e_o___timing.html#4d07aaff9e9e351ae75ec2b607157419">messageLabel</a>-&gt;setIndent(3);
<a name="l00441"></a>00441         <span class="comment">// Labels mit der Statusliste verbinden </span>
<a name="l00442"></a>00442         statusBar()-&gt;addWidget(<a class="code" href="class_b_e_o___timing.html#7f14795095b944fc64585ec6af1df23a">userLabel</a>);
<a name="l00443"></a>00443         statusBar()-&gt;addWidget(<a class="code" href="class_b_e_o___timing.html#c021ff5e0e3900e27fb3fece4c719238">connectionLabel</a>,1);
<a name="l00444"></a>00444         statusBar()-&gt;addWidget(<a class="code" href="class_b_e_o___timing.html#4d07aaff9e9e351ae75ec2b607157419">messageLabel</a>);
<a name="l00445"></a>00445 }
<a name="l00446"></a>00446 
<a name="l00451"></a><a class="code" href="class_b_e_o___timing.html#c854db88175caa8572dd15831b4bfb18">00451</a> <span class="keywordtype">void</span> <a class="code" href="class_b_e_o___timing.html#c854db88175caa8572dd15831b4bfb18" title="Aufrufen des TableEdit-Dialogs mit den richtigen Parametern.">BEO_Timing::Table_Edit</a>(){
<a name="l00452"></a>00452         <span class="keywordtype">int</span> selected = 0;
<a name="l00453"></a>00453         QItemSelectionModel* <a class="code" href="_master_r_d_8h.html#234be45c406c2d8d2489673913eecfd4">model</a> = <a class="code" href="class_b_e_o___timing.html#48b9d6ca16febbddf487260d130925b1">view</a>-&gt;selectionModel();
<a name="l00454"></a>00454         <span class="comment">// Falls eine Zeile ausgewählt ist, wird der Dialog gestartet.</span>
<a name="l00455"></a>00455         <span class="keywordflow">if</span>(model-&gt;hasSelection()){
<a name="l00456"></a>00456                 selected=<a class="code" href="class_b_e_o___timing.html#48b9d6ca16febbddf487260d130925b1">view</a>-&gt;selectionModel()-&gt;selection().indexes().at(0).row();
<a name="l00457"></a>00457                 <span class="comment">// Aufrufen des Konstruktors des Dialogs und übergabe der Parameter</span>
<a name="l00458"></a>00458                 <a class="code" href="class_table_edit_dialog.html" title="Dieser Dialog dient dem Editieren der Eintraege.">TableEditDialog</a>* tableEdit = <span class="keyword">new</span> <a class="code" href="class_table_edit_dialog.html" title="Dieser Dialog dient dem Editieren der Eintraege.">TableEditDialog</a>(
<a name="l00459"></a>00459                                 <a class="code" href="class_b_e_o___timing.html#48b9d6ca16febbddf487260d130925b1">view</a>-&gt;model()-&gt;data(<a class="code" href="class_b_e_o___timing.html#48b9d6ca16febbddf487260d130925b1">view</a>-&gt;model()-&gt;index(selected,<a class="code" href="class_b_e_o___timing.html#d9ee9a58f0522671aebfe86b4987c73813314225bf181333cf505eb2337aaf97">TeilnehmerKey</a>)).toInt(),
<a name="l00460"></a>00460                                 <a class="code" href="class_b_e_o___timing.html#36f4e79080543317d02636f93b667c27">user</a>,<span class="keyword">this</span>);
<a name="l00461"></a>00461                 qDebug() &lt;&lt; <a class="code" href="class_b_e_o___timing.html#48b9d6ca16febbddf487260d130925b1">view</a>-&gt;model()-&gt;data(<a class="code" href="class_b_e_o___timing.html#48b9d6ca16febbddf487260d130925b1">view</a>-&gt;model()-&gt;index(selected,<a class="code" href="class_b_e_o___timing.html#d9ee9a58f0522671aebfe86b4987c73813314225bf181333cf505eb2337aaf97">TeilnehmerKey</a>)).toString();
<a name="l00462"></a>00462                 <span class="comment">// Symbol setzen </span>
<a name="l00463"></a>00463                 tableEdit-&gt;setWindowIcon(QPixmap(<span class="stringliteral">":/images/icon32_t.bmp"</span>));
<a name="l00464"></a>00464                 <span class="comment">// Titel definieren</span>
<a name="l00465"></a>00465                 tableEdit-&gt;setWindowTitle(tr(<span class="stringliteral">"Editieren der Daten"</span>));
<a name="l00466"></a>00466                 <span class="comment">// Dialog modal ausführen</span>
<a name="l00467"></a>00467                 tableEdit-&gt;exec();
<a name="l00468"></a>00468                 <span class="comment">// Dialog löschen, speicher freigeben</span>
<a name="l00469"></a>00469                 <span class="keyword">delete</span> tableEdit;
<a name="l00470"></a>00470         }       
<a name="l00471"></a>00471 }
<a name="l00472"></a>00472 
<a name="l00477"></a><a class="code" href="class_b_e_o___timing.html#6836bffd46ffdbf81149f4e245435731">00477</a> <span class="keywordtype">void</span> <a class="code" href="class_b_e_o___timing.html#6836bffd46ffdbf81149f4e245435731" title="Aufrufen des NeuesRennen-Dialogs.">BEO_Timing::NeuesRennen</a>(){
<a name="l00478"></a>00478         <span class="comment">// Dialog erstellen</span>
<a name="l00479"></a>00479         <a class="code" href="class_b_e_o___timing.html#4a79dc06af7ae3a6f89459062e2a7b85">neu</a> = <span class="keyword">new</span> <a class="code" href="class_neues_rennen_dialog.html" title="Dieser Dialog dient zum erstellen eines neunen Rennens.">NeuesRennenDialog</a>(<span class="keyword">this</span>);
<a name="l00480"></a>00480         <span class="comment">// Singal aus den Dialog mit dem Baum-Update verbinden</span>
<a name="l00481"></a>00481         connect(<a class="code" href="class_b_e_o___timing.html#4a79dc06af7ae3a6f89459062e2a7b85">neu</a>,SIGNAL(tree_update()),<span class="keyword">this</span>,SLOT(<a class="code" href="class_b_e_o___timing.html#454b16d1cfe5763b0812114e82108e55" title="Füllt die Baumansicht mit Ihalt, entsprechend der Benutzerrechte.">Tree_Build</a>()));
<a name="l00482"></a>00482 <span class="comment">//      neu-&gt;setWindowIcon(QPixmap(":/images/icon32_t.bmp"));</span>
<a name="l00483"></a>00483         <a class="code" href="class_b_e_o___timing.html#4a79dc06af7ae3a6f89459062e2a7b85">neu</a>-&gt;setWindowTitle(tr(<span class="stringliteral">"Neues Rennen erfassen"</span>));
<a name="l00484"></a>00484         <span class="comment">// Dialog modal ausführen</span>
<a name="l00485"></a>00485         <a class="code" href="class_b_e_o___timing.html#4a79dc06af7ae3a6f89459062e2a7b85">neu</a>-&gt;exec();
<a name="l00486"></a>00486         <span class="comment">// Die Verbindung zum Signal aufheben</span>
<a name="l00487"></a>00487         disconnect(<a class="code" href="class_b_e_o___timing.html#4a79dc06af7ae3a6f89459062e2a7b85">neu</a>,SIGNAL(tree_update()),<span class="keyword">this</span>,SLOT(<a class="code" href="class_b_e_o___timing.html#454b16d1cfe5763b0812114e82108e55" title="Füllt die Baumansicht mit Ihalt, entsprechend der Benutzerrechte.">Tree_Build</a>()));
<a name="l00488"></a>00488         <span class="comment">// Dialog löschen</span>
<a name="l00489"></a>00489         <span class="keyword">delete</span> <a class="code" href="class_b_e_o___timing.html#4a79dc06af7ae3a6f89459062e2a7b85">neu</a>;
<a name="l00490"></a>00490 }
<a name="l00491"></a>00491 
<a name="l00496"></a><a class="code" href="class_b_e_o___timing.html#b3d37415fce4b586bca4397bd790105c">00496</a> <span class="keywordtype">void</span> <a class="code" href="class_b_e_o___timing.html#b3d37415fce4b586bca4397bd790105c" title="Prüfen ob eine RFID-Karte im Feld ist.">BEO_Timing::checkRFID</a>(){
<a name="l00497"></a>00497         qDebug() &lt;&lt; <span class="stringliteral">"Signal ausgelöst"</span>;
<a name="l00498"></a>00498         <span class="comment">// Variable zum Blockieren der RFID-Thread aktivitäten, während der Dialog aktiv ist.</span>
<a name="l00499"></a>00499         <span class="keyword">static</span> <span class="keywordtype">bool</span> active = <span class="keyword">false</span>;
<a name="l00500"></a>00500         <span class="comment">// Verbindung prüfen</span>
<a name="l00501"></a>00501         <span class="comment">// Falls OK, Karte suchen</span>
<a name="l00502"></a>00502         <span class="comment">// Falls OK, Karte lesen</span>
<a name="l00503"></a>00503         <span class="comment">// Falls OK, Dialog erstellen</span>
<a name="l00504"></a>00504         <span class="keywordflow">if</span>(!active &amp;&amp; <a class="code" href="class_b_e_o___timing.html#a68330ea7c66ad7f7cf913e31d6facf2">pRfid</a>-&gt;<a class="code" href="class_r_f_i_d___c_r500.html#b349b713f9636e8f3c04ca4295bc3248" title="Funktion zum Testen der Verbindung zum Leser.">isConnected</a>() &amp;&amp; <a class="code" href="class_b_e_o___timing.html#a68330ea7c66ad7f7cf913e31d6facf2">pRfid</a>-&gt;<a class="code" href="class_r_f_i_d___c_r500.html#7d3f44b888f7da7cea83111f41bb6d95" title="Karte im Feld suchen.">findCard</a>() &amp;&amp; <a class="code" href="class_b_e_o___timing.html#a68330ea7c66ad7f7cf913e31d6facf2">pRfid</a>-&gt;<a class="code" href="class_r_f_i_d___c_r500.html#0ff3f9ea5a0d59d36532bcdd21854755" title="Lesen der gefundenen Karte.">readData</a>()){
<a name="l00505"></a>00505                 active = <span class="keyword">true</span>;
<a name="l00506"></a>00506                 <span class="comment">// Dialog erstellen</span>
<a name="l00507"></a>00507                 <a class="code" href="class_r_f_i_d_input_dialog.html" title="Stellt die Eingabemaske, sowie die benötigten Funktionen zum auswerten von RFID-Tags...">RFIDInputDialog</a>* rfidDialog = <span class="keyword">new</span> <a class="code" href="class_r_f_i_d_input_dialog.html" title="Stellt die Eingabemaske, sowie die benötigten Funktionen zum auswerten von RFID-Tags...">RFIDInputDialog</a>(<a class="code" href="class_b_e_o___timing.html#a68330ea7c66ad7f7cf913e31d6facf2">pRfid</a>);
<a name="l00508"></a>00508                 <span class="comment">// Symbol setzen</span>
<a name="l00509"></a>00509                 rfidDialog-&gt;setWindowIcon(QPixmap(<span class="stringliteral">":/images/icon32_t.bmp"</span>));
<a name="l00510"></a>00510                 <span class="comment">// Titel definieren</span>
<a name="l00511"></a>00511                 rfidDialog-&gt;setWindowTitle(<span class="stringliteral">"RFID-Karte auswerten"</span>);
<a name="l00512"></a>00512                 <span class="comment">// Dialog modal öffnen</span>
<a name="l00513"></a>00513                 rfidDialog-&gt;exec();
<a name="l00514"></a>00514                 <span class="comment">// Dialog löschen</span>
<a name="l00515"></a>00515                 <span class="keyword">delete</span> rfidDialog;
<a name="l00516"></a>00516                 <span class="comment">// Funktion freigeben für RFID-Thread</span>
<a name="l00517"></a>00517                 active = <span class="keyword">false</span>;
<a name="l00518"></a>00518         }
<a name="l00519"></a>00519 }
<a name="l00520"></a>00520 
<a name="l00525"></a><a class="code" href="class_b_e_o___timing.html#6695ca0572c0a4484d2926c16a3f477b">00525</a> <span class="keywordtype">void</span> <a class="code" href="class_b_e_o___timing.html#6695ca0572c0a4484d2926c16a3f477b" title="Datenbankverbindung ueberpruefen.">BEO_Timing::checkDB</a>(){
<a name="l00526"></a>00526         <span class="keyword">static</span> <span class="keywordtype">bool</span> active = <span class="keyword">false</span>;
<a name="l00527"></a>00527         <span class="keywordflow">if</span>(!active){
<a name="l00528"></a>00528                 active = <span class="keyword">true</span>;
<a name="l00529"></a>00529                 <span class="keywordflow">switch</span>(<a class="code" href="class_b_e_o___timing.html#2690847a55f7a275ba0df12f8a5e5827">pMySQL_thread</a>-&gt;<a class="code" href="class_d_b___thread.html#01d2131117426b8f76c3aacb901f6de7" title="lesen des States der Zustandsmaschine">getState</a>()){
<a name="l00530"></a>00530                 <span class="keywordflow">case</span> <a class="code" href="class_d_b___thread.html#056b06b7057fe2d2c90640629908d067e3fcc0be212969d602965ecffc92322a">DB_Thread::running</a>:
<a name="l00531"></a>00531                         <span class="keyword">static</span> <span class="keywordtype">bool</span> active = <span class="keyword">false</span>;
<a name="l00532"></a>00532                         <span class="keywordflow">if</span>(!active &amp;&amp; !<a class="code" href="class_b_e_o___timing.html#59ff5cd2ab570b6aaec5e4d6367e107b">pMySQL</a>-&gt;<a class="code" href="class_database.html#b480eca23d1bf71206cab822da9b0246">getDb</a>()-&gt;isOpen()){
<a name="l00533"></a>00533                                 <span class="comment">// Datenbankverbindung abgerissen</span>
<a name="l00534"></a>00534                                 active=<span class="keyword">true</span>;
<a name="l00535"></a>00535                                 <span class="comment">// Versuchen die Verbindung aufzubauen</span>
<a name="l00536"></a>00536                                 <span class="keywordflow">if</span>(<a class="code" href="class_b_e_o___timing.html#59ff5cd2ab570b6aaec5e4d6367e107b">pMySQL</a>-&gt;<a class="code" href="class_database.html#b480eca23d1bf71206cab822da9b0246">getDb</a>()-&gt;open())
<a name="l00537"></a>00537                                         QMessageBox::critical(0, QObject::tr(<span class="stringliteral">"Database Error"</span>),
<a name="l00538"></a>00538                                                                 <span class="stringliteral">"Die Verbindung zur Datenbank ist abgebrochen. Bitte überprüfen Sie Ihre Internetverbindung "</span>
<a name="l00539"></a>00539                                                                 <span class="stringliteral">"und bestätigen Sie mit Ok.\n\n"</span> + <a class="code" href="class_b_e_o___timing.html#59ff5cd2ab570b6aaec5e4d6367e107b">pMySQL</a>-&gt;<a class="code" href="class_database.html#b480eca23d1bf71206cab822da9b0246">getDb</a>()-&gt;lastError().text());
<a name="l00540"></a>00540                                 active=<span class="keyword">false</span>;
<a name="l00541"></a>00541                         }
<a name="l00542"></a>00542                         <span class="keywordflow">break</span>;
<a name="l00543"></a>00543                 <span class="keywordflow">case</span> <a class="code" href="class_d_b___thread.html#056b06b7057fe2d2c90640629908d06783b156701d5c8cf522dbe2fef9a4f86c">DB_Thread::stopp</a>:
<a name="l00544"></a>00544                         <a class="code" href="class_b_e_o___timing.html#59ff5cd2ab570b6aaec5e4d6367e107b">pMySQL</a>-&gt;<a class="code" href="class_database.html#b480eca23d1bf71206cab822da9b0246">getDb</a>()-&gt;close();
<a name="l00545"></a>00545                         <span class="keywordflow">break</span>;
<a name="l00546"></a>00546                 <span class="keywordflow">case</span> <a class="code" href="class_d_b___thread.html#056b06b7057fe2d2c90640629908d06775836f6eb7ea02e6179915382269ccd9">DB_Thread::restart</a>:
<a name="l00547"></a>00547                         <a class="code" href="class_b_e_o___timing.html#59ff5cd2ab570b6aaec5e4d6367e107b">pMySQL</a>-&gt;<a class="code" href="class_database.html#b480eca23d1bf71206cab822da9b0246">getDb</a>()-&gt;open(); 
<a name="l00548"></a>00548                         <span class="keywordflow">break</span>;
<a name="l00549"></a>00549                 }
<a name="l00550"></a>00550                 active=<span class="keyword">false</span>;   } <span class="comment">// end if(!active)</span>
<a name="l00551"></a>00551 }
<a name="l00552"></a>00552 
<a name="l00557"></a><a class="code" href="class_b_e_o___timing.html#c04ab99954514a018e78de4b0224cdb5">00557</a> <span class="keywordtype">void</span> <a class="code" href="class_b_e_o___timing.html#c04ab99954514a018e78de4b0224cdb5" title="Exportieren der Rangliste im CSV-Format.">BEO_Timing::exportToCsv</a>(){
<a name="l00558"></a>00558         QAbstractItemModel* <a class="code" href="_master_r_d_8h.html#234be45c406c2d8d2489673913eecfd4">model</a> = <a class="code" href="class_b_e_o___timing.html#48b9d6ca16febbddf487260d130925b1">view</a>-&gt;model();
<a name="l00559"></a>00559         <span class="comment">// Headerdaten schreiben</span>
<a name="l00560"></a>00560         QString csv = <span class="stringliteral">"Name;Vorname;Adresse;PLZ;Wohnort;Nationalität;"</span>
<a name="l00561"></a>00561                           <span class="stringliteral">"Jahrgang;Geschlecht;Email;Telefon;Mobile;Club-Team;"</span>
<a name="l00562"></a>00562                           <span class="stringliteral">"Kategorie;Fahrzeit;Rückstand;RFID_SNR;\n"</span>;
<a name="l00563"></a>00563         <span class="comment">// Tabelle auslesen: Spaltentrennung mit ';' und Zeilen mit '\n'</span>
<a name="l00564"></a>00564         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> row = 0; row &lt; model-&gt;rowCount(); ++row) {
<a name="l00565"></a>00565          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> field = 0; field &lt; model-&gt;columnCount(); ++field) {
<a name="l00566"></a>00566            csv += model-&gt;data(model-&gt;index(row,field)).toString() + <span class="stringliteral">";"</span>;
<a name="l00567"></a>00567          }
<a name="l00568"></a>00568          csv += <span class="stringliteral">"\n"</span>;
<a name="l00569"></a>00569         }
<a name="l00570"></a>00570         qDebug() &lt;&lt; csv;
<a name="l00571"></a>00571         <span class="comment">// Speichern unter - Dialog öffnen</span>
<a name="l00572"></a>00572         QString fileName = QFileDialog::getSaveFileName(<span class="keyword">this</span>,
<a name="l00573"></a>00573                                                         tr(<span class="stringliteral">"Speichere Rangliste"</span>), <span class="stringliteral">"."</span>, 
<a name="l00574"></a>00574                                                         tr(<span class="stringliteral">"Comma separated value Datei (*.csv)"</span>));
<a name="l00575"></a>00575         <span class="keywordflow">if</span>(!fileName.isEmpty()){
<a name="l00576"></a>00576                 QFile file(fileName);
<a name="l00577"></a>00577                 <span class="keywordflow">if</span>(!file.open(QIODevice::WriteOnly)){
<a name="l00578"></a>00578                         QMessageBox::warning(<span class="keyword">this</span>, tr(<span class="stringliteral">"Exportieren nach CSV"</span>),
<a name="l00579"></a>00579                                                                         tr(<span class="stringliteral">"Kann die Datei %1 nicht schreiben;\n%2"</span>)
<a name="l00580"></a>00580                                                                         .arg(file.fileName()).arg(file.errorString()));
<a name="l00581"></a>00581                         <span class="keywordflow">return</span>;
<a name="l00582"></a>00582                 }
<a name="l00583"></a>00583                 <span class="comment">// Stream für ASCII-File öffnen</span>
<a name="l00584"></a>00584                 QTextStream out(&amp;file);
<a name="l00585"></a>00585                 <span class="comment">// Daten schreiben</span>
<a name="l00586"></a>00586                 out &lt;&lt; csv;
<a name="l00587"></a>00587                 file.flush();
<a name="l00588"></a>00588                 file.close();
<a name="l00589"></a>00589         }
<a name="l00590"></a>00590 }
<a name="l00591"></a>00591 
<a name="l00596"></a><a class="code" href="class_b_e_o___timing.html#b705f7916ae9647060ea70c1e8fb60d8">00596</a> <span class="keywordtype">void</span> <a class="code" href="class_b_e_o___timing.html#b705f7916ae9647060ea70c1e8fb60d8" title="Passwort ändern Dialog öffnen.">BEO_Timing::changePwd</a>(){
<a name="l00597"></a>00597         <span class="comment">// Dialog erstellen mit dem Parameter user</span>
<a name="l00598"></a>00598         <a class="code" href="class_b_e_o___timing.html#00ca0d5e67f1d99118b529b9a9cbed9f">pwd</a> = <span class="keyword">new</span> <a class="code" href="class_password_change_dialog.html" title="Dieser Dialog dient zum aendern des Passworts des angemeldeten Benutzers.">PasswordChangeDialog</a>(<a class="code" href="class_b_e_o___timing.html#36f4e79080543317d02636f93b667c27">user</a>, <span class="keyword">this</span>);
<a name="l00599"></a>00599 <span class="comment">//      pwd-&gt;setWindowIcon(QPixmap(":/images/icon32_t.bmp"));</span>
<a name="l00600"></a>00600         <a class="code" href="class_b_e_o___timing.html#00ca0d5e67f1d99118b529b9a9cbed9f">pwd</a>-&gt;setWindowTitle(tr(<span class="stringliteral">"Password ändern"</span>));
<a name="l00601"></a>00601         <span class="comment">// Dialog modal starten</span>
<a name="l00602"></a>00602         <a class="code" href="class_b_e_o___timing.html#00ca0d5e67f1d99118b529b9a9cbed9f">pwd</a>-&gt;exec();
<a name="l00603"></a>00603         <span class="comment">// Dialog löschen</span>
<a name="l00604"></a>00604         <span class="keyword">delete</span> <a class="code" href="class_b_e_o___timing.html#00ca0d5e67f1d99118b529b9a9cbed9f">pwd</a>;
<a name="l00605"></a>00605 }
<a name="l00606"></a>00606 
<a name="l00611"></a><a class="code" href="class_b_e_o___timing.html#1ae33dd83b22ab12aed7c68028ad363a">00611</a> <span class="keywordtype">void</span> <a class="code" href="class_b_e_o___timing.html#1ae33dd83b22ab12aed7c68028ad363a" title="Neuer Benutzer - Dialog öffnen.">BEO_Timing::neuerUser</a>(){
<a name="l00612"></a>00612         <span class="comment">// Dialog erstellen, mit dem Paramter user</span>
<a name="l00613"></a>00613         <a class="code" href="class_b_e_o___timing.html#dbc64dafa7003517063029cd10e2b583">newUser</a> = <span class="keyword">new</span> <a class="code" href="class_neuer_user_dialog.html" title="Dieser Dialog dient zum erstellen eines neuen Benutzers.">NeuerUserDialog</a>(<a class="code" href="class_b_e_o___timing.html#36f4e79080543317d02636f93b667c27">user</a>, <span class="keyword">this</span>);
<a name="l00614"></a>00614 <span class="comment">//      newUser-&gt;setWindowIcon(QPixmap(":/images/icon32_t.bmp"));</span>
<a name="l00615"></a>00615         <a class="code" href="class_b_e_o___timing.html#dbc64dafa7003517063029cd10e2b583">newUser</a>-&gt;setWindowTitle(tr(<span class="stringliteral">"Neuer Benutzer erstellen"</span>));
<a name="l00616"></a>00616         <span class="comment">// Dialog modal starten</span>
<a name="l00617"></a>00617         <a class="code" href="class_b_e_o___timing.html#dbc64dafa7003517063029cd10e2b583">newUser</a>-&gt;exec();
<a name="l00618"></a>00618         <span class="keyword">delete</span> <a class="code" href="class_b_e_o___timing.html#dbc64dafa7003517063029cd10e2b583">newUser</a>;
<a name="l00619"></a>00619 }
<a name="l00620"></a>00620 
<a name="l00625"></a><a class="code" href="class_b_e_o___timing.html#c8299f8565050c6390965b2a1df80ab0">00625</a> <span class="keywordtype">void</span> <a class="code" href="class_b_e_o___timing.html#c8299f8565050c6390965b2a1df80ab0" title="Konfiguration erstellen - Dialog öffnen.">BEO_Timing::buildConfiguration</a>(){
<a name="l00626"></a>00626         <span class="comment">// Dialog erstellen</span>
<a name="l00627"></a>00627         <a class="code" href="class_b_e_o___timing.html#8abbf93b70915e725738223a587cb42d">config</a> = <span class="keyword">new</span> <a class="code" href="class_hardware_konfiguration.html" title="Dieser Dialog erstellt eine Konfiguration fuer eine Anlage.">HardwareKonfiguration</a>(<a class="code" href="class_b_e_o___timing.html#36f4e79080543317d02636f93b667c27">user</a>, <span class="keyword">this</span>);
<a name="l00628"></a>00628         <a class="code" href="class_b_e_o___timing.html#8abbf93b70915e725738223a587cb42d">config</a>-&gt;setWindowIcon(QPixmap(<span class="stringliteral">":/images/icon32_t.bmp"</span>));
<a name="l00629"></a>00629         <a class="code" href="class_b_e_o___timing.html#8abbf93b70915e725738223a587cb42d">config</a>-&gt;setWindowTitle(tr(<span class="stringliteral">"Neue Konfiguration für eine Station erstellen"</span>));
<a name="l00630"></a>00630         <span class="comment">// Dialog modal öffnen</span>
<a name="l00631"></a>00631         <a class="code" href="class_b_e_o___timing.html#8abbf93b70915e725738223a587cb42d">config</a>-&gt;exec();
<a name="l00632"></a>00632         <span class="comment">// Dialog löschen</span>
<a name="l00633"></a>00633         <span class="keyword">delete</span> <a class="code" href="class_b_e_o___timing.html#8abbf93b70915e725738223a587cb42d">config</a>;
<a name="l00634"></a>00634 }
<a name="l00635"></a>00635 
<a name="l00640"></a><a class="code" href="class_b_e_o___timing.html#0e2af5a5752098ca296327f4f41bf2c6">00640</a> <span class="keywordtype">void</span> <a class="code" href="class_b_e_o___timing.html#0e2af5a5752098ca296327f4f41bf2c6" title="Log-Datei Lesen - Dialog öffnen.">BEO_Timing::readLogFile</a>(){
<a name="l00641"></a>00641         <a class="code" href="class_b_e_o___timing.html#b8cfb6b1d41a21e54498a183eef54651">logfile</a> = <span class="keyword">new</span> <a class="code" href="class_logfile_lesen_dialog.html" title="Dieser Dialog sucht eine Log-Datei einer Zielstation nach nicht uebermittelten Eintraegen...">LogfileLesenDialog</a>(<span class="keyword">this</span>);
<a name="l00642"></a>00642         <a class="code" href="class_b_e_o___timing.html#b8cfb6b1d41a21e54498a183eef54651">logfile</a>-&gt;setWindowIcon(QPixmap(<span class="stringliteral">":/images/icon32_t.bmp"</span>));
<a name="l00643"></a>00643         <a class="code" href="class_b_e_o___timing.html#b8cfb6b1d41a21e54498a183eef54651">logfile</a>-&gt;setWindowTitle(tr(<span class="stringliteral">"Zeiten aus der Log-Datei interpretieren"</span>));
<a name="l00644"></a>00644         <span class="comment">// Dialog modal starten</span>
<a name="l00645"></a>00645         <a class="code" href="class_b_e_o___timing.html#b8cfb6b1d41a21e54498a183eef54651">logfile</a>-&gt;exec();
<a name="l00646"></a>00646         <span class="comment">// Dialog löschen</span>
<a name="l00647"></a>00647         <span class="keyword">delete</span> <a class="code" href="class_b_e_o___timing.html#b8cfb6b1d41a21e54498a183eef54651">logfile</a>;
<a name="l00648"></a>00648 }
<a name="l00649"></a>00649 
<a name="l00654"></a><a class="code" href="class_b_e_o___timing.html#92ea80de324e788dbc928e655b70e631">00654</a> <span class="keywordtype">void</span> <a class="code" href="class_b_e_o___timing.html#92ea80de324e788dbc928e655b70e631" title="Benutzerreche anpassen - Dialog öffnen.">BEO_Timing::rechteAnpassen</a>(){
<a name="l00655"></a>00655         <a class="code" href="class_b_e_o___timing.html#19f749ab5e005801517ec98286a89596">rechte</a> = <span class="keyword">new</span> <a class="code" href="class_rechte_anpassen.html" title="Dieser Dialog dient zum anpassen der Rechte eines beliebigen Benutzers.">RechteAnpassen</a>(<a class="code" href="class_b_e_o___timing.html#36f4e79080543317d02636f93b667c27">user</a>, <span class="keyword">this</span>);
<a name="l00656"></a>00656 <span class="comment">//      rechte-&gt;setWindowIcon(QPixmap(":/images/icon32_t.bmp"));</span>
<a name="l00657"></a>00657         <a class="code" href="class_b_e_o___timing.html#19f749ab5e005801517ec98286a89596">rechte</a>-&gt;setWindowTitle(tr(<span class="stringliteral">"Rechte eines Benutzer anpassen"</span>));
<a name="l00658"></a>00658         <span class="comment">// Dialog modal starten</span>
<a name="l00659"></a>00659         <a class="code" href="class_b_e_o___timing.html#19f749ab5e005801517ec98286a89596">rechte</a>-&gt;exec();
<a name="l00660"></a>00660         <span class="comment">// Dialog löschen</span>
<a name="l00661"></a>00661         <span class="keyword">delete</span> <a class="code" href="class_b_e_o___timing.html#19f749ab5e005801517ec98286a89596">rechte</a>;
<a name="l00662"></a>00662 }
<a name="l00663"></a>00663 
<a name="l00668"></a><a class="code" href="class_b_e_o___timing.html#2f021b28df0eb948aa69146ab5631c02">00668</a> <span class="keywordtype">void</span> <a class="code" href="class_b_e_o___timing.html#2f021b28df0eb948aa69146ab5631c02" title="About - Dialog der Managementsoftware anzeigen.">BEO_Timing::about</a>(){
<a name="l00669"></a>00669         QMessageBox::about(<span class="keyword">this</span>, tr(<span class="stringliteral">"BEO-Timing Managemenet-Software"</span>),
<a name="l00670"></a>00670                                                         tr(<span class="stringliteral">"&lt;h2&gt;BEO-Timing Management-Software 1.0 &lt;/h2&gt;"</span>
<a name="l00671"></a>00671                                                            <span class="stringliteral">"&lt;p&gt;Copyright &amp;copy; 2008 &lt;a href=\"http://www.rrc-thun.ch/\"&gt;RRC-Thun&lt;/a&gt; "</span>
<a name="l00672"></a>00672                                                            <span class="stringliteral">"und &lt;a href=\"http://www.rc-steffisburg.ch/\"&gt;RC-Steffisburg&lt;/a&gt; "</span>
<a name="l00673"></a>00673                                                            <span class="stringliteral">"&lt;p&gt;Diese Software bietet die Möglichkeiten zur Auswertung von RFID-Karten, "</span>
<a name="l00674"></a>00674                                                            <span class="stringliteral">"der Konfiguration der Stationen, Wartung und Administration der Datenbank und stellt "</span>
<a name="l00675"></a>00675                                                            <span class="stringliteral">"eine Benutzerverwaltung zur Verfügung."</span>
<a name="l00676"></a>00676                                                            <span class="stringliteral">"&lt;p&gt;Diese Software wurde im Rahmen der Bachelor-Thesis von Rico Zoss und "</span>
<a name="l00677"></a>00677                                                            <span class="stringliteral">"Moritz Leiser an der Berner Fachhochschule Technik und Informatik im Fachbereich "</span>
<a name="l00678"></a>00678                                                            <span class="stringliteral">"Elektrotechnik erstellt."</span>));
<a name="l00679"></a>00679 }
<a name="l00680"></a>00680 
<a name="l00685"></a><a class="code" href="class_b_e_o___timing.html#d303ff34c6d33593cb57e1fc1881d991">00685</a> <span class="keywordtype">void</span> <a class="code" href="class_b_e_o___timing.html#d303ff34c6d33593cb57e1fc1881d991" title="Verbindung zum RFID-Leser herstellen bzw. trennen.">BEO_Timing::rfidConnection</a>(<span class="keywordtype">bool</span> checked){
<a name="l00686"></a>00686         <span class="keywordflow">if</span>(checked){
<a name="l00687"></a>00687                 <a class="code" href="class_b_e_o___timing.html#a68330ea7c66ad7f7cf913e31d6facf2">pRfid</a> = <span class="keyword">new</span> <a class="code" href="class_r_f_i_d___c_r500.html" title="Enthält alle Eigenschaften des RFID-Lesers CR500-USB.">RFID_CR500</a>();
<a name="l00688"></a>00688                 <a class="code" href="class_b_e_o___timing.html#3f78ca1ff8e8b783d594c615e1204690">thread</a>-&gt;<a class="code" href="class_r_f_i_d___thread.html#1c13017995a135d84c7eac183a93fd6e" title="Setzen des Pointers auf den Leser.">setRFID</a>(<a class="code" href="class_b_e_o___timing.html#a68330ea7c66ad7f7cf913e31d6facf2">pRfid</a>);
<a name="l00689"></a>00689                 <a class="code" href="class_b_e_o___timing.html#3f78ca1ff8e8b783d594c615e1204690">thread</a>-&gt;<a class="code" href="class_r_f_i_d___thread.html#d7b71a78a4c22c00d384327101166086" title="Setter für den State.">setState</a>(<a class="code" href="class_r_f_i_d___thread.html#0c5695c7667faf1b1efe371bbfb81a7726a2d1b6047b8e68bd0167ef98ac01c9">RFID_Thread::restart</a>);
<a name="l00690"></a>00690         }<span class="keywordflow">else</span>{
<a name="l00691"></a>00691                 <a class="code" href="class_b_e_o___timing.html#3f78ca1ff8e8b783d594c615e1204690">thread</a>-&gt;<a class="code" href="class_r_f_i_d___thread.html#d7b71a78a4c22c00d384327101166086" title="Setter für den State.">setState</a>(<a class="code" href="class_r_f_i_d___thread.html#0c5695c7667faf1b1efe371bbfb81a774af436f3cc3d02f80ac0eb3ad84e375c">RFID_Thread::stopp</a>);
<a name="l00692"></a>00692                 <span class="keyword">delete</span> <a class="code" href="class_b_e_o___timing.html#a68330ea7c66ad7f7cf913e31d6facf2">pRfid</a>;
<a name="l00693"></a>00693         }
<a name="l00694"></a>00694 }
<a name="l00695"></a>00695 
<a name="l00700"></a><a class="code" href="class_b_e_o___timing.html#42c6266466562efb8e012cc0389767b7">00700</a> <span class="keywordtype">void</span> <a class="code" href="class_b_e_o___timing.html#42c6266466562efb8e012cc0389767b7" title="Verbindung zur Datenbank herstellen bzw. trennen (experimentell, nur Superadmin)...">BEO_Timing::mysqlConnection</a>(<span class="keywordtype">bool</span> checked){
<a name="l00701"></a>00701         <span class="keywordflow">if</span>(checked){
<a name="l00702"></a>00702                 <a class="code" href="class_b_e_o___timing.html#2690847a55f7a275ba0df12f8a5e5827">pMySQL_thread</a>-&gt;<a class="code" href="class_d_b___thread.html#5ca406169a78d0e196a7cb57aae01a30" title="setzen des States der Zustandsmaschine">setState</a>(<a class="code" href="class_d_b___thread.html#056b06b7057fe2d2c90640629908d06775836f6eb7ea02e6179915382269ccd9">DB_Thread::restart</a>);
<a name="l00703"></a>00703         }<span class="keywordflow">else</span>{
<a name="l00704"></a>00704                 <a class="code" href="class_b_e_o___timing.html#2690847a55f7a275ba0df12f8a5e5827">pMySQL_thread</a>-&gt;<a class="code" href="class_d_b___thread.html#5ca406169a78d0e196a7cb57aae01a30" title="setzen des States der Zustandsmaschine">setState</a>(<a class="code" href="class_d_b___thread.html#056b06b7057fe2d2c90640629908d06783b156701d5c8cf522dbe2fef9a4f86c">DB_Thread::stopp</a>);
<a name="l00705"></a>00705         }
<a name="l00706"></a>00706 }
<a name="l00707"></a>00707 
<a name="l00712"></a><a class="code" href="class_b_e_o___timing.html#fa8e65c455ffd3b02112fdd4e6e76878">00712</a> <span class="keywordtype">void</span> <a class="code" href="class_b_e_o___timing.html#fa8e65c455ffd3b02112fdd4e6e76878" title="Versionscheck.">BEO_Timing::newVersion</a>(){
<a name="l00713"></a>00713         <span class="comment">// Aktuelle Softwareversion aus der Datenbank lesen</span>
<a name="l00714"></a>00714         QSqlQuery query;
<a name="l00715"></a>00715         query.exec(<span class="stringliteral">"SELECT nummer FROM version"</span>);
<a name="l00716"></a>00716         query.next();
<a name="l00717"></a>00717         <span class="comment">// und mit der Definition im Sourcecode vergleichen</span>
<a name="l00718"></a>00718         <a class="code" href="class_b_e_o___timing.html#670385786b671be23b3b3b10dd3e7b91">version</a> = (query.value(0).toString().compare(<a class="code" href="beo__timing_8h.html#1c6d5de492ac61ad29aec7aa9a436bbf">VERSION</a>)!=0);
<a name="l00719"></a>00719 }
<a name="l00720"></a>00720 
<a name="l00725"></a><a class="code" href="class_b_e_o___timing.html#0736e099c5aa29e7169d74b5cd7da2d7">00725</a> <span class="keywordtype">void</span> <a class="code" href="class_b_e_o___timing.html#0736e099c5aa29e7169d74b5cd7da2d7" title="Datenbank bereinigen. Alle &amp;quot;(Noch nicht ausgewertet)&amp;quot;-Einträge entfernen...">BEO_Timing::purge</a>(){
<a name="l00726"></a>00726         QSqlQuery query;
<a name="l00727"></a>00727         <span class="comment">// Alle Einträge, die älter sind als Heute um Mitternacht, darstellen. </span>
<a name="l00728"></a>00728         query.exec(<span class="stringliteral">"SELECT zeiten.TeilnehmerKey FROM zeiten, teilnehmer WHERE "</span>
<a name="l00729"></a>00729                            <span class="stringliteral">"Eintrag &lt; '"</span> + QDate::currentDate().toString(<span class="stringliteral">"yyyy-MM-dd"</span>) + <span class="stringliteral">" 00:00:00' "</span>
<a name="l00730"></a>00730                            <span class="stringliteral">"AND zeiten.TeilnehmerKey=teilnehmer.TeilnehmerKey AND name='(noch'"</span>);
<a name="l00731"></a>00731         <span class="comment">// Liste mit dem TeilnehmerKeys erstellen</span>
<a name="l00732"></a>00732         QStringList keylist;
<a name="l00733"></a>00733         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;query.numRowsAffected();++i){
<a name="l00734"></a>00734                 query.next();
<a name="l00735"></a>00735                 keylist.append(query.value(0).toString());
<a name="l00736"></a>00736         }
<a name="l00737"></a>00737         qDebug() &lt;&lt; keylist;
<a name="l00738"></a>00738         <span class="comment">// Warnung ausgeben und den Vorgang bestätigen lassen</span>
<a name="l00739"></a>00739         QMessageBox msgBox;
<a name="l00740"></a>00740         QPushButton *loeschenButton = msgBox.addButton(tr(<span class="stringliteral">"Löschen"</span>), QMessageBox::ActionRole);
<a name="l00741"></a>00741         QPushButton *canButton = msgBox.addButton(tr(<span class="stringliteral">"Abbrechen"</span>), QMessageBox::ActionRole);
<a name="l00742"></a>00742         msgBox.setDefaultButton(canButton);
<a name="l00743"></a>00743         msgBox.setEscapeButton(canButton);
<a name="l00744"></a>00744         msgBox.setText(tr(<span class="stringliteral">"Alle unzugeordneten Einträge, welche vor dem heutigen Datum gemacht wurden, "</span>
<a name="l00745"></a>00745                                           <span class="stringliteral">"werden gelöscht. Diese Aktion sollte nur ausgeführt werden, wenn alle Karten "</span>
<a name="l00746"></a>00746                                           <span class="stringliteral">"bis zum heutigen Tag ausgewertet sind.\n\n Diese Aktion kann nicht Rückgängig gemacht werden!"</span>));
<a name="l00747"></a>00747         msgBox.setWindowTitle(tr(<span class="stringliteral">"Bestätigen des Löschvorgangs"</span>));
<a name="l00748"></a>00748         msgBox.setIcon(QMessageBox::Warning);
<a name="l00749"></a>00749         msgBox.exec();
<a name="l00750"></a>00750         <span class="comment">// Löschen der Einträge, falls bestätigt</span>
<a name="l00751"></a>00751         <span class="keywordflow">if</span>(msgBox.clickedButton() == loeschenButton){
<a name="l00752"></a>00752                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;keylist.count();++i)
<a name="l00753"></a>00753                         query.exec(<span class="stringliteral">"DELETE FROM zeiten WHERE TeilnehmerKey="</span> + keylist.at(i));
<a name="l00754"></a>00754                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;keylist.count();++i)
<a name="l00755"></a>00755                         query.exec(<span class="stringliteral">"DELETE FROM teilnehmer WHERE TeilnehmerKey="</span> + keylist.at(i));
<a name="l00756"></a>00756         }
<a name="l00757"></a>00757 }
<a name="l00758"></a>00758 
<a name="l00763"></a><a class="code" href="class_b_e_o___timing.html#85d0de732b79a53566feb1eb636c2886">00763</a> <span class="keywordtype">void</span> <a class="code" href="class_b_e_o___timing.html#85d0de732b79a53566feb1eb636c2886" title="Optimieren der Tabellen in der Datenbank.">BEO_Timing::optimieren</a>(){
<a name="l00764"></a>00764         QSqlQuery query;
<a name="l00765"></a>00765         <span class="comment">// SQL-Statement für die Optimierung</span>
<a name="l00766"></a>00766         query.exec(<span class="stringliteral">"OPTIMIZE TABLE kategorien, nationalitaeten, sommerzeit, stationen, "</span>
<a name="l00767"></a>00767                            <span class="stringliteral">"strecken, streckentyp, teilnehmer, user, usertype, version, zeiten"</span>);
<a name="l00768"></a>00768         QString feedback;
<a name="l00769"></a>00769         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt; query.numRowsAffected();++i){
<a name="l00770"></a>00770                 query.next();
<a name="l00771"></a>00771                 feedback += <span class="stringliteral">"- "</span> + query.value(0).toString() + <span class="stringliteral">": "</span> + query.value(3).toString() + <span class="stringliteral">"\n"</span>;
<a name="l00772"></a>00772         }
<a name="l00773"></a>00773         <span class="comment">// Ausgabe der Resultate</span>
<a name="l00774"></a>00774         QMessageBox::information(0, QObject::tr(<span class="stringliteral">"Optimieren der Datenbank"</span>),
<a name="l00775"></a>00775                                 <span class="stringliteral">"Die Datenbank wurde Optimiert:\n\n"</span> + feedback);
<a name="l00776"></a>00776 }
<a name="l00777"></a>00777 
<a name="l00782"></a><a class="code" href="class_b_e_o___timing.html#6d5901b04efdce11f441205714385160">00782</a> <span class="keywordtype">void</span> <a class="code" href="class_b_e_o___timing.html#6d5901b04efdce11f441205714385160" title="Verbinden des RFID-Lesers.">BEO_Timing::CR500_verbinden</a>(){
<a name="l00783"></a>00783         <a class="code" href="class_b_e_o___timing.html#a68330ea7c66ad7f7cf913e31d6facf2">pRfid</a> = <span class="keyword">new</span> <a class="code" href="class_r_f_i_d___c_r500.html" title="Enthält alle Eigenschaften des RFID-Lesers CR500-USB.">RFID_CR500</a>();
<a name="l00784"></a>00784         <a class="code" href="class_b_e_o___timing.html#3f78ca1ff8e8b783d594c615e1204690">thread</a>-&gt;<a class="code" href="class_r_f_i_d___thread.html#1c13017995a135d84c7eac183a93fd6e" title="Setzen des Pointers auf den Leser.">setRFID</a>(<a class="code" href="class_b_e_o___timing.html#a68330ea7c66ad7f7cf913e31d6facf2">pRfid</a>);
<a name="l00785"></a>00785         <span class="keywordflow">if</span>(<a class="code" href="class_b_e_o___timing.html#a68330ea7c66ad7f7cf913e31d6facf2">pRfid</a>-&gt;<a class="code" href="class_r_f_i_d___c_r500.html#b349b713f9636e8f3c04ca4295bc3248" title="Funktion zum Testen der Verbindung zum Leser.">isConnected</a>()){
<a name="l00786"></a>00786                 <a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#d5ff0108e29b7b18abdcd64e61b6828a">actionRFID_Leser</a>-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00787"></a>00787                 <a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#f79465573d96a63961f3c088b29b3084">actionRFID_Leser_verbinden</a>-&gt;setDisabled(<span class="keyword">true</span>);
<a name="l00788"></a>00788                 <a class="code" href="class_b_e_o___timing.html#3f78ca1ff8e8b783d594c615e1204690">thread</a>-&gt;<a class="code" href="class_r_f_i_d___thread.html#d7b71a78a4c22c00d384327101166086" title="Setter für den State.">setState</a>(<a class="code" href="class_r_f_i_d___thread.html#0c5695c7667faf1b1efe371bbfb81a772bc7a4d5978016c397b5e14e788c03c0">RFID_Thread::running</a>);
<a name="l00789"></a>00789         }<span class="keywordflow">else</span>{
<a name="l00790"></a>00790                 <a class="code" href="class_b_e_o___timing.html#3f78ca1ff8e8b783d594c615e1204690">thread</a>-&gt;<a class="code" href="class_r_f_i_d___thread.html#d7b71a78a4c22c00d384327101166086" title="Setter für den State.">setState</a>(<a class="code" href="class_r_f_i_d___thread.html#0c5695c7667faf1b1efe371bbfb81a77eef055b595dcb36e33abc1095b9f5901">RFID_Thread::pause</a>);
<a name="l00791"></a>00791                 <a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#d5ff0108e29b7b18abdcd64e61b6828a">actionRFID_Leser</a>-&gt;setDisabled(<span class="keyword">true</span>);
<a name="l00792"></a>00792                 <a class="code" href="class_b_e_o___timing.html#4e75592803bdf66af32320a30b8972c2">ui</a>.<a class="code" href="class_ui___b_e_o___timing_class.html#f79465573d96a63961f3c088b29b3084">actionRFID_Leser_verbinden</a>-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00793"></a>00793                 <span class="keyword">delete</span> <a class="code" href="class_b_e_o___timing.html#a68330ea7c66ad7f7cf913e31d6facf2">pRfid</a>;
<a name="l00794"></a>00794         }
<a name="l00795"></a>00795 }
<a name="l00796"></a>00796 
<a name="l00797"></a>00797 
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Jun 30 09:36:02 2008 for BEO-Timing by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
