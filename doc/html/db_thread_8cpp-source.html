<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>BEO-Timing: dbThread.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<h1>dbThread.cpp</h1><a href="db_thread_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00030"></a>00030 <span class="preprocessor">#include "<a class="code" href="_database_8h.html" title="Diese Klasse symbolisiert die Datenbank. Sie erstellt die Verbindung und stellt verschiedene...">database.h</a>"</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include "<a class="code" href="db_thread_8h.html" title="Dieser Thread ueberprueft alle 5 Sekunden die Verbindung zur Datenbank.">dbThread.h</a>"</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include "<a class="code" href="beo__timing_8h.html" title="Hauptklasse der Applikation.">beo_timing.h</a>"</span>
<a name="l00033"></a>00033 
<a name="l00037"></a><a class="code" href="class_d_b___thread.html#a46c43472b35bc30b885da7adb2ec480">00037</a> <a class="code" href="class_d_b___thread.html#a46c43472b35bc30b885da7adb2ec480" title="Konstruktor.">DB_Thread::DB_Thread</a>()
<a name="l00038"></a>00038 {
<a name="l00039"></a>00039         <a class="code" href="class_d_b___thread.html#31c37537c9902c0ebf175b2a35ec965f">stopped</a> = <span class="keyword">false</span>;
<a name="l00040"></a>00040         <a class="code" href="class_d_b___thread.html#9b38f026919bb5a09dd2e8af8e0feef7">state</a> = <a class="code" href="class_d_b___thread.html#056b06b7057fe2d2c90640629908d067e3fcc0be212969d602965ecffc92322a">running</a>;
<a name="l00041"></a>00041 
<a name="l00042"></a>00042 }
<a name="l00046"></a><a class="code" href="class_d_b___thread.html#3c4f9d073814887a717de180b2e8e6b9">00046</a> <a class="code" href="class_d_b___thread.html#3c4f9d073814887a717de180b2e8e6b9" title="Destruktor.">DB_Thread::~DB_Thread</a>(){
<a name="l00047"></a>00047 
<a name="l00048"></a>00048 }
<a name="l00052"></a><a class="code" href="class_d_b___thread.html#e468157edacaa0760e833bf643371e62">00052</a> <span class="keywordtype">void</span> <a class="code" href="class_d_b___thread.html#e468157edacaa0760e833bf643371e62" title="Stoppen des Threads.">DB_Thread::stop</a>(){
<a name="l00053"></a>00053         <a class="code" href="class_d_b___thread.html#31c37537c9902c0ebf175b2a35ec965f">stopped</a>=<span class="keyword">true</span>;
<a name="l00054"></a>00054 }
<a name="l00058"></a><a class="code" href="class_d_b___thread.html#5ca406169a78d0e196a7cb57aae01a30">00058</a> <span class="keywordtype">void</span> <a class="code" href="class_d_b___thread.html#5ca406169a78d0e196a7cb57aae01a30" title="setzen des States der Zustandsmaschine">DB_Thread::setState</a>(<a class="code" href="class_d_b___thread.html#a70b1b8bfaf0d6b88c1284b947234b5e">STATE</a> <a class="code" href="class_d_b___thread.html#9b38f026919bb5a09dd2e8af8e0feef7">state</a>){
<a name="l00059"></a>00059         this-&gt;state=state;
<a name="l00060"></a>00060 }
<a name="l00064"></a><a class="code" href="class_d_b___thread.html#01d2131117426b8f76c3aacb901f6de7">00064</a> <span class="keywordtype">int</span> <a class="code" href="class_d_b___thread.html#01d2131117426b8f76c3aacb901f6de7" title="lesen des States der Zustandsmaschine">DB_Thread::getState</a>(){
<a name="l00065"></a>00065         <span class="keywordflow">return</span> <a class="code" href="class_d_b___thread.html#9b38f026919bb5a09dd2e8af8e0feef7">state</a>;
<a name="l00066"></a>00066 }
<a name="l00067"></a>00067 
<a name="l00071"></a><a class="code" href="class_d_b___thread.html#bb50ad9355d7353eab556833a59e49e0">00071</a> <span class="keywordtype">void</span> <a class="code" href="class_d_b___thread.html#bb50ad9355d7353eab556833a59e49e0" title="Ãœberschreiben der vererbten Funktion &amp;quot;run&amp;quot;.">DB_Thread::run</a>(){
<a name="l00072"></a>00072         <span class="keywordflow">while</span>(!<a class="code" href="class_d_b___thread.html#31c37537c9902c0ebf175b2a35ec965f">stopped</a>){
<a name="l00073"></a>00073                 <span class="keywordflow">switch</span>(<a class="code" href="class_d_b___thread.html#9b38f026919bb5a09dd2e8af8e0feef7">state</a>){
<a name="l00074"></a>00074                 <span class="keywordflow">case</span> <a class="code" href="class_d_b___thread.html#056b06b7057fe2d2c90640629908d067e3fcc0be212969d602965ecffc92322a">running</a>:
<a name="l00075"></a>00075                         emit <a class="code" href="class_d_b___thread.html#4c701f484e76dda9fb89e6f0fadec67b">checkDB</a>();
<a name="l00076"></a>00076                         <span class="keywordflow">break</span>;
<a name="l00077"></a>00077                 <span class="keywordflow">case</span> <a class="code" href="class_d_b___thread.html#056b06b7057fe2d2c90640629908d06783b156701d5c8cf522dbe2fef9a4f86c">stopp</a>:
<a name="l00078"></a>00078                         emit <a class="code" href="class_d_b___thread.html#4c701f484e76dda9fb89e6f0fadec67b">checkDB</a>();
<a name="l00079"></a>00079                         <a class="code" href="class_d_b___thread.html#9b38f026919bb5a09dd2e8af8e0feef7">state</a>=<a class="code" href="class_d_b___thread.html#056b06b7057fe2d2c90640629908d0671d6c307cea966b1131a430c477f063b9">pause</a>;
<a name="l00080"></a>00080                         <span class="keywordflow">break</span>;
<a name="l00081"></a>00081                 <span class="keywordflow">case</span> <a class="code" href="class_d_b___thread.html#056b06b7057fe2d2c90640629908d0671d6c307cea966b1131a430c477f063b9">pause</a>: 
<a name="l00082"></a>00082                         <span class="keywordflow">break</span>;
<a name="l00083"></a>00083                 <span class="keywordflow">case</span> <a class="code" href="class_d_b___thread.html#056b06b7057fe2d2c90640629908d06775836f6eb7ea02e6179915382269ccd9">restart</a>:
<a name="l00084"></a>00084                         emit <a class="code" href="class_d_b___thread.html#4c701f484e76dda9fb89e6f0fadec67b">checkDB</a>();
<a name="l00085"></a>00085                         <a class="code" href="class_d_b___thread.html#9b38f026919bb5a09dd2e8af8e0feef7">state</a>=<a class="code" href="class_d_b___thread.html#056b06b7057fe2d2c90640629908d067e3fcc0be212969d602965ecffc92322a">running</a>;
<a name="l00086"></a>00086                         <span class="keywordflow">break</span>;
<a name="l00087"></a>00087                 }
<a name="l00088"></a>00088                 msleep(<a class="code" href="db_thread_8h.html#6c63320ad5fb80992c09d2724dc3df47">DB_REFRESH_RATE_ms</a>);
<a name="l00089"></a>00089         }
<a name="l00090"></a>00090         <a class="code" href="class_d_b___thread.html#31c37537c9902c0ebf175b2a35ec965f">stopped</a>=<span class="keyword">false</span>;
<a name="l00091"></a>00091 }
<a name="l00092"></a>00092 
<a name="l00093"></a>00093 
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Jun 30 09:36:02 2008 for BEO-Timing by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
